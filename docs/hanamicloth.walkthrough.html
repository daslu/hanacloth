<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.37">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Hanamicloth â€“ 2&nbsp; Walkthrough</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./index.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link rel="icon" href="data:,">


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./hanamicloth.walkthrough.html"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Walkthrough</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Hanamicloth</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Preface</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./hanamicloth.walkthrough.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Walkthrough</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#setup" id="toc-setup" class="nav-link active" data-scroll-target="#setup"><span class="header-section-number">2.1</span> Setup</a></li>
  <li><a href="#some-datasets" id="toc-some-datasets" class="nav-link" data-scroll-target="#some-datasets"><span class="header-section-number">2.2</span> Some datasets</a></li>
  <li><a href="#basic-usage" id="toc-basic-usage" class="nav-link" data-scroll-target="#basic-usage"><span class="header-section-number">2.3</span> Basic usage</a></li>
  <li><a href="#using-hanamicloth-templates-defaults" id="toc-using-hanamicloth-templates-defaults" class="nav-link" data-scroll-target="#using-hanamicloth-templates-defaults"><span class="header-section-number">2.4</span> Using Hanamicloth templates &amp; defaults</a></li>
  <li><a href="#inferring-and-overriding-field-types" id="toc-inferring-and-overriding-field-types" class="nav-link" data-scroll-target="#inferring-and-overriding-field-types"><span class="header-section-number">2.5</span> Inferring and overriding field types</a></li>
  <li><a href="#more-examples" id="toc-more-examples" class="nav-link" data-scroll-target="#more-examples"><span class="header-section-number">2.6</span> More examples</a></li>
  <li><a href="#delayed-transformation" id="toc-delayed-transformation" class="nav-link" data-scroll-target="#delayed-transformation"><span class="header-section-number">2.7</span> Delayed transformation</a></li>
  <li><a href="#adding-layers" id="toc-adding-layers" class="nav-link" data-scroll-target="#adding-layers"><span class="header-section-number">2.8</span> Adding layers</a></li>
  <li><a href="#updating-data" id="toc-updating-data" class="nav-link" data-scroll-target="#updating-data"><span class="header-section-number">2.9</span> Updating data</a></li>
  <li><a href="#processing-raw-vega-lite" id="toc-processing-raw-vega-lite" class="nav-link" data-scroll-target="#processing-raw-vega-lite"><span class="header-section-number">2.10</span> Processing raw vega-lite</a></li>
  <li><a href="#smoothing" id="toc-smoothing" class="nav-link" data-scroll-target="#smoothing"><span class="header-section-number">2.11</span> Smoothing</a></li>
  <li><a href="#grouping" id="toc-grouping" class="nav-link" data-scroll-target="#grouping"><span class="header-section-number">2.12</span> Grouping</a></li>
  <li><a href="#example-out-of-sample-predictions" id="toc-example-out-of-sample-predictions" class="nav-link" data-scroll-target="#example-out-of-sample-predictions"><span class="header-section-number">2.13</span> Example: out-of-sample predictions</a></li>
  <li><a href="#histograms" id="toc-histograms" class="nav-link" data-scroll-target="#histograms"><span class="header-section-number">2.14</span> Histograms</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Walkthrough</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<style></style>
<style>.printedClojure .sourceCode {
  background-color: transparent;
  border-style: none;
}
</style>
<style>.clay-limit-image-width .clay-image {max-width: 100%}
</style>
<script src="hanamicloth.walkthrough_files/md-default5.js" type="text/javascript"></script>
<script src="hanamicloth.walkthrough_files/md-default6.js" type="text/javascript"></script>
<script src="hanamicloth.walkthrough_files/vega7.js" type="text/javascript"></script>
<script src="hanamicloth.walkthrough_files/vega8.js" type="text/javascript"></script>
<script src="hanamicloth.walkthrough_files/vega9.js" type="text/javascript"></script>
<p>In this walkthrough, we will demonstrate its main functionality.</p>
<section id="setup" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="setup"><span class="header-section-number">2.1</span> Setup</h2>
<p>Here we require Hanamiclothâ€™s main API namepace as well as those of <a href="https://github.com/jsa-aerial/hanami">Hanami</a> and <a href="https://scicloj.github.io/tablecloth/">Tablecloth</a>, and also <a href="https://scicloj.github.io/kindly-noted/">Kindly</a> (which allows us to specify how values should be visualized).</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb1"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">ns</span> hanamicloth.walkthrough</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  (<span class="at">:require</span> [scicloj.hanamicloth.v1.api <span class="at">:as</span> hanami]</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>            [aerial.hanami.templates <span class="at">:as</span> ht]</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>            [tablecloth.api <span class="at">:as</span> tc]</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>            [scicloj.kindly.v4.kind <span class="at">:as</span> kind]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="some-datasets" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="some-datasets"><span class="header-section-number">2.2</span> Some datasets</h2>
<p>In this walkthrough, we will used the following datasets:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb2"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">defonce</span><span class="fu"> iris</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">-&gt;</span> <span class="st">"https://vincentarelbundock.github.io/Rdatasets/csv/datasets/iris.csv"</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>      (tc/dataset {<span class="at">:key-fn</span> <span class="kw">keyword</span>})</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>      (tc/rename-columns {<span class="at">:Sepal.Length</span> <span class="at">:sepal-length</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:Sepal.Width</span> <span class="at">:sepal-width</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:Petal.Length</span> <span class="at">:petal-length</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:Petal.Width</span> <span class="at">:petal-width</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:Species</span> <span class="at">:species</span>})))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb3"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>iris</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="clay-dataset">
<p>https://vincentarelbundock.github.io/Rdatasets/csv/datasets/iris.csv [150 6]:</p>
<table class="table">
<colgroup>
<col style="width: 13%">
<col style="width: 18%">
<col style="width: 17%">
<col style="width: 18%">
<col style="width: 17%">
<col style="width: 13%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">:rownames</th>
<th style="text-align: right;">:sepal-length</th>
<th style="text-align: right;">:sepal-width</th>
<th style="text-align: right;">:petal-length</th>
<th style="text-align: right;">:petal-width</th>
<th>:species</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">5.1</td>
<td style="text-align: right;">3.5</td>
<td style="text-align: right;">1.4</td>
<td style="text-align: right;">0.2</td>
<td>setosa</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: right;">4.9</td>
<td style="text-align: right;">3.0</td>
<td style="text-align: right;">1.4</td>
<td style="text-align: right;">0.2</td>
<td>setosa</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: right;">4.7</td>
<td style="text-align: right;">3.2</td>
<td style="text-align: right;">1.3</td>
<td style="text-align: right;">0.2</td>
<td>setosa</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td style="text-align: right;">4.6</td>
<td style="text-align: right;">3.1</td>
<td style="text-align: right;">1.5</td>
<td style="text-align: right;">0.2</td>
<td>setosa</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5</td>
<td style="text-align: right;">5.0</td>
<td style="text-align: right;">3.6</td>
<td style="text-align: right;">1.4</td>
<td style="text-align: right;">0.2</td>
<td>setosa</td>
</tr>
<tr class="even">
<td style="text-align: right;">6</td>
<td style="text-align: right;">5.4</td>
<td style="text-align: right;">3.9</td>
<td style="text-align: right;">1.7</td>
<td style="text-align: right;">0.4</td>
<td>setosa</td>
</tr>
<tr class="odd">
<td style="text-align: right;">7</td>
<td style="text-align: right;">4.6</td>
<td style="text-align: right;">3.4</td>
<td style="text-align: right;">1.4</td>
<td style="text-align: right;">0.3</td>
<td>setosa</td>
</tr>
<tr class="even">
<td style="text-align: right;">8</td>
<td style="text-align: right;">5.0</td>
<td style="text-align: right;">3.4</td>
<td style="text-align: right;">1.5</td>
<td style="text-align: right;">0.2</td>
<td>setosa</td>
</tr>
<tr class="odd">
<td style="text-align: right;">9</td>
<td style="text-align: right;">4.4</td>
<td style="text-align: right;">2.9</td>
<td style="text-align: right;">1.4</td>
<td style="text-align: right;">0.2</td>
<td>setosa</td>
</tr>
<tr class="even">
<td style="text-align: right;">10</td>
<td style="text-align: right;">4.9</td>
<td style="text-align: right;">3.1</td>
<td style="text-align: right;">1.5</td>
<td style="text-align: right;">0.1</td>
<td>setosa</td>
</tr>
<tr class="odd">
<td style="text-align: right;">â€¦</td>
<td style="text-align: right;">â€¦</td>
<td style="text-align: right;">â€¦</td>
<td style="text-align: right;">â€¦</td>
<td style="text-align: right;">â€¦</td>
<td>â€¦</td>
</tr>
<tr class="even">
<td style="text-align: right;">140</td>
<td style="text-align: right;">6.9</td>
<td style="text-align: right;">3.1</td>
<td style="text-align: right;">5.4</td>
<td style="text-align: right;">2.1</td>
<td>virginica</td>
</tr>
<tr class="odd">
<td style="text-align: right;">141</td>
<td style="text-align: right;">6.7</td>
<td style="text-align: right;">3.1</td>
<td style="text-align: right;">5.6</td>
<td style="text-align: right;">2.4</td>
<td>virginica</td>
</tr>
<tr class="even">
<td style="text-align: right;">142</td>
<td style="text-align: right;">6.9</td>
<td style="text-align: right;">3.1</td>
<td style="text-align: right;">5.1</td>
<td style="text-align: right;">2.3</td>
<td>virginica</td>
</tr>
<tr class="odd">
<td style="text-align: right;">143</td>
<td style="text-align: right;">5.8</td>
<td style="text-align: right;">2.7</td>
<td style="text-align: right;">5.1</td>
<td style="text-align: right;">1.9</td>
<td>virginica</td>
</tr>
<tr class="even">
<td style="text-align: right;">144</td>
<td style="text-align: right;">6.8</td>
<td style="text-align: right;">3.2</td>
<td style="text-align: right;">5.9</td>
<td style="text-align: right;">2.3</td>
<td>virginica</td>
</tr>
<tr class="odd">
<td style="text-align: right;">145</td>
<td style="text-align: right;">6.7</td>
<td style="text-align: right;">3.3</td>
<td style="text-align: right;">5.7</td>
<td style="text-align: right;">2.5</td>
<td>virginica</td>
</tr>
<tr class="even">
<td style="text-align: right;">146</td>
<td style="text-align: right;">6.7</td>
<td style="text-align: right;">3.0</td>
<td style="text-align: right;">5.2</td>
<td style="text-align: right;">2.3</td>
<td>virginica</td>
</tr>
<tr class="odd">
<td style="text-align: right;">147</td>
<td style="text-align: right;">6.3</td>
<td style="text-align: right;">2.5</td>
<td style="text-align: right;">5.0</td>
<td style="text-align: right;">1.9</td>
<td>virginica</td>
</tr>
<tr class="even">
<td style="text-align: right;">148</td>
<td style="text-align: right;">6.5</td>
<td style="text-align: right;">3.0</td>
<td style="text-align: right;">5.2</td>
<td style="text-align: right;">2.0</td>
<td>virginica</td>
</tr>
<tr class="odd">
<td style="text-align: right;">149</td>
<td style="text-align: right;">6.2</td>
<td style="text-align: right;">3.4</td>
<td style="text-align: right;">5.4</td>
<td style="text-align: right;">2.3</td>
<td>virginica</td>
</tr>
<tr class="even">
<td style="text-align: right;">150</td>
<td style="text-align: right;">5.9</td>
<td style="text-align: right;">3.0</td>
<td style="text-align: right;">5.1</td>
<td style="text-align: right;">1.8</td>
<td>virginica</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb4"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">defonce</span><span class="fu"> mtcars</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">-&gt;</span> <span class="st">"https://vincentarelbundock.github.io/Rdatasets/csv/datasets/mtcars.csv"</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>      (tc/dataset {<span class="at">:key-fn</span> <span class="kw">keyword</span>})))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb5"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>mtcars</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="clay-dataset">
<p>https://vincentarelbundock.github.io/Rdatasets/csv/datasets/mtcars.csv [32 12]:</p>
<table class="table">
<colgroup>
<col style="width: 21%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 7%">
<col style="width: 5%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 7%">
<col style="width: 7%">
</colgroup>
<thead>
<tr class="header">
<th>:rownames</th>
<th style="text-align: right;">:mpg</th>
<th style="text-align: right;">:cyl</th>
<th style="text-align: right;">:disp</th>
<th style="text-align: right;">:hp</th>
<th style="text-align: right;">:drat</th>
<th style="text-align: right;">:wt</th>
<th style="text-align: right;">:qsec</th>
<th style="text-align: right;">:vs</th>
<th style="text-align: right;">:am</th>
<th style="text-align: right;">:gear</th>
<th style="text-align: right;">:carb</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Mazda RX4</td>
<td style="text-align: right;">21.0</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">160.0</td>
<td style="text-align: right;">110</td>
<td style="text-align: right;">3.90</td>
<td style="text-align: right;">2.620</td>
<td style="text-align: right;">16.46</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="even">
<td>Mazda RX4 Wag</td>
<td style="text-align: right;">21.0</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">160.0</td>
<td style="text-align: right;">110</td>
<td style="text-align: right;">3.90</td>
<td style="text-align: right;">2.875</td>
<td style="text-align: right;">17.02</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="odd">
<td>Datsun 710</td>
<td style="text-align: right;">22.8</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">108.0</td>
<td style="text-align: right;">93</td>
<td style="text-align: right;">3.85</td>
<td style="text-align: right;">2.320</td>
<td style="text-align: right;">18.61</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td>Hornet 4 Drive</td>
<td style="text-align: right;">21.4</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">258.0</td>
<td style="text-align: right;">110</td>
<td style="text-align: right;">3.08</td>
<td style="text-align: right;">3.215</td>
<td style="text-align: right;">19.44</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td>Hornet Sportabout</td>
<td style="text-align: right;">18.7</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">360.0</td>
<td style="text-align: right;">175</td>
<td style="text-align: right;">3.15</td>
<td style="text-align: right;">3.440</td>
<td style="text-align: right;">17.02</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td>Valiant</td>
<td style="text-align: right;">18.1</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">225.0</td>
<td style="text-align: right;">105</td>
<td style="text-align: right;">2.76</td>
<td style="text-align: right;">3.460</td>
<td style="text-align: right;">20.22</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td>Duster 360</td>
<td style="text-align: right;">14.3</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">360.0</td>
<td style="text-align: right;">245</td>
<td style="text-align: right;">3.21</td>
<td style="text-align: right;">3.570</td>
<td style="text-align: right;">15.84</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="even">
<td>Merc 240D</td>
<td style="text-align: right;">24.4</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">146.7</td>
<td style="text-align: right;">62</td>
<td style="text-align: right;">3.69</td>
<td style="text-align: right;">3.190</td>
<td style="text-align: right;">20.00</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td>Merc 230</td>
<td style="text-align: right;">22.8</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">140.8</td>
<td style="text-align: right;">95</td>
<td style="text-align: right;">3.92</td>
<td style="text-align: right;">3.150</td>
<td style="text-align: right;">22.90</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td>Merc 280</td>
<td style="text-align: right;">19.2</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">167.6</td>
<td style="text-align: right;">123</td>
<td style="text-align: right;">3.92</td>
<td style="text-align: right;">3.440</td>
<td style="text-align: right;">18.30</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="odd">
<td>â€¦</td>
<td style="text-align: right;">â€¦</td>
<td style="text-align: right;">â€¦</td>
<td style="text-align: right;">â€¦</td>
<td style="text-align: right;">â€¦</td>
<td style="text-align: right;">â€¦</td>
<td style="text-align: right;">â€¦</td>
<td style="text-align: right;">â€¦</td>
<td style="text-align: right;">â€¦</td>
<td style="text-align: right;">â€¦</td>
<td style="text-align: right;">â€¦</td>
<td style="text-align: right;">â€¦</td>
</tr>
<tr class="even">
<td>Dodge Challenger</td>
<td style="text-align: right;">15.5</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">318.0</td>
<td style="text-align: right;">150</td>
<td style="text-align: right;">2.76</td>
<td style="text-align: right;">3.520</td>
<td style="text-align: right;">16.87</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td>AMC Javelin</td>
<td style="text-align: right;">15.2</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">304.0</td>
<td style="text-align: right;">150</td>
<td style="text-align: right;">3.15</td>
<td style="text-align: right;">3.435</td>
<td style="text-align: right;">17.30</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td>Camaro Z28</td>
<td style="text-align: right;">13.3</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">350.0</td>
<td style="text-align: right;">245</td>
<td style="text-align: right;">3.73</td>
<td style="text-align: right;">3.840</td>
<td style="text-align: right;">15.41</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="odd">
<td>Pontiac Firebird</td>
<td style="text-align: right;">19.2</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">400.0</td>
<td style="text-align: right;">175</td>
<td style="text-align: right;">3.08</td>
<td style="text-align: right;">3.845</td>
<td style="text-align: right;">17.05</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td>Fiat X1-9</td>
<td style="text-align: right;">27.3</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">79.0</td>
<td style="text-align: right;">66</td>
<td style="text-align: right;">4.08</td>
<td style="text-align: right;">1.935</td>
<td style="text-align: right;">18.90</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td>Porsche 914-2</td>
<td style="text-align: right;">26.0</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">120.3</td>
<td style="text-align: right;">91</td>
<td style="text-align: right;">4.43</td>
<td style="text-align: right;">2.140</td>
<td style="text-align: right;">16.70</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td>Lotus Europa</td>
<td style="text-align: right;">30.4</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">95.1</td>
<td style="text-align: right;">113</td>
<td style="text-align: right;">3.77</td>
<td style="text-align: right;">1.513</td>
<td style="text-align: right;">16.90</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td>Ford Pantera L</td>
<td style="text-align: right;">15.8</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">351.0</td>
<td style="text-align: right;">264</td>
<td style="text-align: right;">4.22</td>
<td style="text-align: right;">3.170</td>
<td style="text-align: right;">14.50</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="even">
<td>Ferrari Dino</td>
<td style="text-align: right;">19.7</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">145.0</td>
<td style="text-align: right;">175</td>
<td style="text-align: right;">3.62</td>
<td style="text-align: right;">2.770</td>
<td style="text-align: right;">15.50</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="odd">
<td>Maserati Bora</td>
<td style="text-align: right;">15.0</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">301.0</td>
<td style="text-align: right;">335</td>
<td style="text-align: right;">3.54</td>
<td style="text-align: right;">3.570</td>
<td style="text-align: right;">14.60</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">8</td>
</tr>
<tr class="even">
<td>Volvo 142E</td>
<td style="text-align: right;">21.4</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">121.0</td>
<td style="text-align: right;">109</td>
<td style="text-align: right;">4.11</td>
<td style="text-align: right;">2.780</td>
<td style="text-align: right;">18.60</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">2</td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="basic-usage" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="basic-usage"><span class="header-section-number">2.3</span> Basic usage</h2>
<p>Let us create a scatter plot from the Iris dataset. We pass a Tablecloth dataset to a Hanamicloth function with a Hanami template. Here we use Hanamiâ€™s original templates (<code>ht/chart</code>) and substitution keys (<code>:X</code>, <code>:Y</code>, <code>:MSIZE</code>).</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb6"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> iris</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    (hanami/plot ht/point-chart</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>                 {<span class="at">:X</span> <span class="at">:sepal-width</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>                  <span class="at">:Y</span> <span class="at">:sepal-length</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>                  <span class="at">:MSIZE</span> <span class="dv">200</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div><script>vegaEmbed(document.currentScript.parentElement, {"encoding":{"y":{"field":"sepal-length","type":"quantitative"},"x":{"field":"sepal-width","type":"quantitative"}},"mark":{"type":"circle","size":200,"tooltip":true},"width":400,"background":"floralwhite","height":300,"data":{"url":"hanamicloth.walkthrough_files\/0.csv","format":{"type":"csv"}}});</script></div>
<p>The resulting plot is displayed correctly, as it is annotated by Kindly.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb7"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> iris</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    (hanami/plot ht/point-chart</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>                 {<span class="at">:X</span> <span class="at">:sepal-width</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>                  <span class="at">:Y</span> <span class="at">:sepal-length</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>                  <span class="at">:MSIZE</span> <span class="dv">200</span>})</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">meta</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb8"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>#<span class="at">:kindly</span>{<span class="at">:kind</span> <span class="at">:kind/vega-lite</span>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The value returned by a <code>hanami/plot</code> function is a <a href="https://vega.github.io/vega-lite/">Vega-Lite</a> spec:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb9"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> iris</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>    (hanami/plot ht/point-chart</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>                 {<span class="at">:X</span> <span class="at">:sepal-width</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>                  <span class="at">:Y</span> <span class="at">:sepal-length</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>                  <span class="at">:MSIZE</span> <span class="dv">200</span>})</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    kind/pprint)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb10"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>{<span class="at">:encoding</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a> {<span class="at">:y</span> {<span class="at">:field</span> <span class="at">:sepal-length</span>, <span class="at">:type</span> <span class="st">"quantitative"</span>},</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">:x</span> {<span class="at">:field</span> <span class="at">:sepal-width</span>, <span class="at">:type</span> <span class="st">"quantitative"</span>}},</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a> <span class="at">:mark</span> {<span class="at">:type</span> <span class="st">"circle"</span>, <span class="at">:size</span> <span class="dv">200</span>, <span class="at">:tooltip</span> <span class="va">true</span>},</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a> <span class="at">:width</span> <span class="dv">400</span>,</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a> <span class="at">:background</span> <span class="st">"floralwhite"</span>,</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a> <span class="at">:height</span> <span class="dv">300</span>,</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a> <span class="at">:data</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a> {<span class="at">:values</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>  <span class="st">"rownames,sepal-length,sepal-width,petal-length,petal-width,species</span><span class="sc">\n</span><span class="st">1,5.1,3.5,1.4,0.2,setosa</span><span class="sc">\n</span><span class="st">2,4.9,3.0,1.4,0.2,setosa</span><span class="sc">\n</span><span class="st">3,4.7,3.2,1.3,0.2,setosa</span><span class="sc">\n</span><span class="st">4,4.6,3.1,1.5,0.2,setosa</span><span class="sc">\n</span><span class="st">5,5.0,3.6,1.4,0.2,setosa</span><span class="sc">\n</span><span class="st">6,5.4,3.9,1.7,0.4,setosa</span><span class="sc">\n</span><span class="st">7,4.6,3.4,1.4,0.3,setosa</span><span class="sc">\n</span><span class="st">8,5.0,3.4,1.5,0.2,setosa</span><span class="sc">\n</span><span class="st">9,4.4,2.9,1.4,0.2,setosa</span><span class="sc">\n</span><span class="st">10,4.9,3.1,1.5,0.1,setosa</span><span class="sc">\n</span><span class="st">11,5.4,3.7,1.5,0.2,setosa</span><span class="sc">\n</span><span class="st">12,4.8,3.4,1.6,0.2,setosa</span><span class="sc">\n</span><span class="st">13,4.8,3.0,1.4,0.1,setosa</span><span class="sc">\n</span><span class="st">14,4.3,3.0,1.1,0.1,setosa</span><span class="sc">\n</span><span class="st">15,5.8,4.0,1.2,0.2,setosa</span><span class="sc">\n</span><span class="st">16,5.7,4.4,1.5,0.4,setosa</span><span class="sc">\n</span><span class="st">17,5.4,3.9,1.3,0.4,setosa</span><span class="sc">\n</span><span class="st">18,5.1,3.5,1.4,0.3,setosa</span><span class="sc">\n</span><span class="st">19,5.7,3.8,1.7,0.3,setosa</span><span class="sc">\n</span><span class="st">20,5.1,3.8,1.5,0.3,setosa</span><span class="sc">\n</span><span class="st">21,5.4,3.4,1.7,0.2,setosa</span><span class="sc">\n</span><span class="st">22,5.1,3.7,1.5,0.4,setosa</span><span class="sc">\n</span><span class="st">23,4.6,3.6,1.0,0.2,setosa</span><span class="sc">\n</span><span class="st">24,5.1,3.3,1.7,0.5,setosa</span><span class="sc">\n</span><span class="st">25,4.8,3.4,1.9,0.2,setosa</span><span class="sc">\n</span><span class="st">26,5.0,3.0,1.6,0.2,setosa</span><span class="sc">\n</span><span class="st">27,5.0,3.4,1.6,0.4,setosa</span><span class="sc">\n</span><span class="st">28,5.2,3.5,1.5,0.2,setosa</span><span class="sc">\n</span><span class="st">29,5.2,3.4,1.4,0.2,setosa</span><span class="sc">\n</span><span class="st">30,4.7,3.2,1.6,0.2,setosa</span><span class="sc">\n</span><span class="st">31,4.8,3.1,1.6,0.2,setosa</span><span class="sc">\n</span><span class="st">32,5.4,3.4,1.5,0.4,setosa</span><span class="sc">\n</span><span class="st">33,5.2,4.1,1.5,0.1,setosa</span><span class="sc">\n</span><span class="st">34,5.5,4.2,1.4,0.2,setosa</span><span class="sc">\n</span><span class="st">35,4.9,3.1,1.5,0.2,setosa</span><span class="sc">\n</span><span class="st">36,5.0,3.2,1.2,0.2,setosa</span><span class="sc">\n</span><span class="st">37,5.5,3.5,1.3,0.2,setosa</span><span class="sc">\n</span><span class="st">38,4.9,3.6,1.4,0.1,setosa</span><span class="sc">\n</span><span class="st">39,4.4,3.0,1.3,0.2,setosa</span><span class="sc">\n</span><span class="st">40,5.1,3.4,1.5,0.2,setosa</span><span class="sc">\n</span><span class="st">41,5.0,3.5,1.3,0.3,setosa</span><span class="sc">\n</span><span class="st">42,4.5,2.3,1.3,0.3,setosa</span><span class="sc">\n</span><span class="st">43,4.4,3.2,1.3,0.2,setosa</span><span class="sc">\n</span><span class="st">44,5.0,3.5,1.6,0.6,setosa</span><span class="sc">\n</span><span class="st">45,5.1,3.8,1.9,0.4,setosa</span><span class="sc">\n</span><span class="st">46,4.8,3.0,1.4,0.3,setosa</span><span class="sc">\n</span><span class="st">47,5.1,3.8,1.6,0.2,setosa</span><span class="sc">\n</span><span class="st">48,4.6,3.2,1.4,0.2,setosa</span><span class="sc">\n</span><span class="st">49,5.3,3.7,1.5,0.2,setosa</span><span class="sc">\n</span><span class="st">50,5.0,3.3,1.4,0.2,setosa</span><span class="sc">\n</span><span class="st">51,7.0,3.2,4.7,1.4,versicolor</span><span class="sc">\n</span><span class="st">52,6.4,3.2,4.5,1.5,versicolor</span><span class="sc">\n</span><span class="st">53,6.9,3.1,4.9,1.5,versicolor</span><span class="sc">\n</span><span class="st">54,5.5,2.3,4.0,1.3,versicolor</span><span class="sc">\n</span><span class="st">55,6.5,2.8,4.6,1.5,versicolor</span><span class="sc">\n</span><span class="st">56,5.7,2.8,4.5,1.3,versicolor</span><span class="sc">\n</span><span class="st">57,6.3,3.3,4.7,1.6,versicolor</span><span class="sc">\n</span><span class="st">58,4.9,2.4,3.3,1.0,versicolor</span><span class="sc">\n</span><span class="st">59,6.6,2.9,4.6,1.3,versicolor</span><span class="sc">\n</span><span class="st">60,5.2,2.7,3.9,1.4,versicolor</span><span class="sc">\n</span><span class="st">61,5.0,2.0,3.5,1.0,versicolor</span><span class="sc">\n</span><span class="st">62,5.9,3.0,4.2,1.5,versicolor</span><span class="sc">\n</span><span class="st">63,6.0,2.2,4.0,1.0,versicolor</span><span class="sc">\n</span><span class="st">64,6.1,2.9,4.7,1.4,versicolor</span><span class="sc">\n</span><span class="st">65,5.6,2.9,3.6,1.3,versicolor</span><span class="sc">\n</span><span class="st">66,6.7,3.1,4.4,1.4,versicolor</span><span class="sc">\n</span><span class="st">67,5.6,3.0,4.5,1.5,versicolor</span><span class="sc">\n</span><span class="st">68,5.8,2.7,4.1,1.0,versicolor</span><span class="sc">\n</span><span class="st">69,6.2,2.2,4.5,1.5,versicolor</span><span class="sc">\n</span><span class="st">70,5.6,2.5,3.9,1.1,versicolor</span><span class="sc">\n</span><span class="st">71,5.9,3.2,4.8,1.8,versicolor</span><span class="sc">\n</span><span class="st">72,6.1,2.8,4.0,1.3,versicolor</span><span class="sc">\n</span><span class="st">73,6.3,2.5,4.9,1.5,versicolor</span><span class="sc">\n</span><span class="st">74,6.1,2.8,4.7,1.2,versicolor</span><span class="sc">\n</span><span class="st">75,6.4,2.9,4.3,1.3,versicolor</span><span class="sc">\n</span><span class="st">76,6.6,3.0,4.4,1.4,versicolor</span><span class="sc">\n</span><span class="st">77,6.8,2.8,4.8,1.4,versicolor</span><span class="sc">\n</span><span class="st">78,6.7,3.0,5.0,1.7,versicolor</span><span class="sc">\n</span><span class="st">79,6.0,2.9,4.5,1.5,versicolor</span><span class="sc">\n</span><span class="st">80,5.7,2.6,3.5,1.0,versicolor</span><span class="sc">\n</span><span class="st">81,5.5,2.4,3.8,1.1,versicolor</span><span class="sc">\n</span><span class="st">82,5.5,2.4,3.7,1.0,versicolor</span><span class="sc">\n</span><span class="st">83,5.8,2.7,3.9,1.2,versicolor</span><span class="sc">\n</span><span class="st">84,6.0,2.7,5.1,1.6,versicolor</span><span class="sc">\n</span><span class="st">85,5.4,3.0,4.5,1.5,versicolor</span><span class="sc">\n</span><span class="st">86,6.0,3.4,4.5,1.6,versicolor</span><span class="sc">\n</span><span class="st">87,6.7,3.1,4.7,1.5,versicolor</span><span class="sc">\n</span><span class="st">88,6.3,2.3,4.4,1.3,versicolor</span><span class="sc">\n</span><span class="st">89,5.6,3.0,4.1,1.3,versicolor</span><span class="sc">\n</span><span class="st">90,5.5,2.5,4.0,1.3,versicolor</span><span class="sc">\n</span><span class="st">91,5.5,2.6,4.4,1.2,versicolor</span><span class="sc">\n</span><span class="st">92,6.1,3.0,4.6,1.4,versicolor</span><span class="sc">\n</span><span class="st">93,5.8,2.6,4.0,1.2,versicolor</span><span class="sc">\n</span><span class="st">94,5.0,2.3,3.3,1.0,versicolor</span><span class="sc">\n</span><span class="st">95,5.6,2.7,4.2,1.3,versicolor</span><span class="sc">\n</span><span class="st">96,5.7,3.0,4.2,1.2,versicolor</span><span class="sc">\n</span><span class="st">97,5.7,2.9,4.2,1.3,versicolor</span><span class="sc">\n</span><span class="st">98,6.2,2.9,4.3,1.3,versicolor</span><span class="sc">\n</span><span class="st">99,5.1,2.5,3.0,1.1,versicolor</span><span class="sc">\n</span><span class="st">100,5.7,2.8,4.1,1.3,versicolor</span><span class="sc">\n</span><span class="st">101,6.3,3.3,6.0,2.5,virginica</span><span class="sc">\n</span><span class="st">102,5.8,2.7,5.1,1.9,virginica</span><span class="sc">\n</span><span class="st">103,7.1,3.0,5.9,2.1,virginica</span><span class="sc">\n</span><span class="st">104,6.3,2.9,5.6,1.8,virginica</span><span class="sc">\n</span><span class="st">105,6.5,3.0,5.8,2.2,virginica</span><span class="sc">\n</span><span class="st">106,7.6,3.0,6.6,2.1,virginica</span><span class="sc">\n</span><span class="st">107,4.9,2.5,4.5,1.7,virginica</span><span class="sc">\n</span><span class="st">108,7.3,2.9,6.3,1.8,virginica</span><span class="sc">\n</span><span class="st">109,6.7,2.5,5.8,1.8,virginica</span><span class="sc">\n</span><span class="st">110,7.2,3.6,6.1,2.5,virginica</span><span class="sc">\n</span><span class="st">111,6.5,3.2,5.1,2.0,virginica</span><span class="sc">\n</span><span class="st">112,6.4,2.7,5.3,1.9,virginica</span><span class="sc">\n</span><span class="st">113,6.8,3.0,5.5,2.1,virginica</span><span class="sc">\n</span><span class="st">114,5.7,2.5,5.0,2.0,virginica</span><span class="sc">\n</span><span class="st">115,5.8,2.8,5.1,2.4,virginica</span><span class="sc">\n</span><span class="st">116,6.4,3.2,5.3,2.3,virginica</span><span class="sc">\n</span><span class="st">117,6.5,3.0,5.5,1.8,virginica</span><span class="sc">\n</span><span class="st">118,7.7,3.8,6.7,2.2,virginica</span><span class="sc">\n</span><span class="st">119,7.7,2.6,6.9,2.3,virginica</span><span class="sc">\n</span><span class="st">120,6.0,2.2,5.0,1.5,virginica</span><span class="sc">\n</span><span class="st">121,6.9,3.2,5.7,2.3,virginica</span><span class="sc">\n</span><span class="st">122,5.6,2.8,4.9,2.0,virginica</span><span class="sc">\n</span><span class="st">123,7.7,2.8,6.7,2.0,virginica</span><span class="sc">\n</span><span class="st">124,6.3,2.7,4.9,1.8,virginica</span><span class="sc">\n</span><span class="st">125,6.7,3.3,5.7,2.1,virginica</span><span class="sc">\n</span><span class="st">126,7.2,3.2,6.0,1.8,virginica</span><span class="sc">\n</span><span class="st">127,6.2,2.8,4.8,1.8,virginica</span><span class="sc">\n</span><span class="st">128,6.1,3.0,4.9,1.8,virginica</span><span class="sc">\n</span><span class="st">129,6.4,2.8,5.6,2.1,virginica</span><span class="sc">\n</span><span class="st">130,7.2,3.0,5.8,1.6,virginica</span><span class="sc">\n</span><span class="st">131,7.4,2.8,6.1,1.9,virginica</span><span class="sc">\n</span><span class="st">132,7.9,3.8,6.4,2.0,virginica</span><span class="sc">\n</span><span class="st">133,6.4,2.8,5.6,2.2,virginica</span><span class="sc">\n</span><span class="st">134,6.3,2.8,5.1,1.5,virginica</span><span class="sc">\n</span><span class="st">135,6.1,2.6,5.6,1.4,virginica</span><span class="sc">\n</span><span class="st">136,7.7,3.0,6.1,2.3,virginica</span><span class="sc">\n</span><span class="st">137,6.3,3.4,5.6,2.4,virginica</span><span class="sc">\n</span><span class="st">138,6.4,3.1,5.5,1.8,virginica</span><span class="sc">\n</span><span class="st">139,6.0,3.0,4.8,1.8,virginica</span><span class="sc">\n</span><span class="st">140,6.9,3.1,5.4,2.1,virginica</span><span class="sc">\n</span><span class="st">141,6.7,3.1,5.6,2.4,virginica</span><span class="sc">\n</span><span class="st">142,6.9,3.1,5.1,2.3,virginica</span><span class="sc">\n</span><span class="st">143,5.8,2.7,5.1,1.9,virginica</span><span class="sc">\n</span><span class="st">144,6.8,3.2,5.9,2.3,virginica</span><span class="sc">\n</span><span class="st">145,6.7,3.3,5.7,2.5,virginica</span><span class="sc">\n</span><span class="st">146,6.7,3.0,5.2,2.3,virginica</span><span class="sc">\n</span><span class="st">147,6.3,2.5,5.0,1.9,virginica</span><span class="sc">\n</span><span class="st">148,6.5,3.0,5.2,2.0,virginica</span><span class="sc">\n</span><span class="st">149,6.2,3.4,5.4,2.3,virginica</span><span class="sc">\n</span><span class="st">150,5.9,3.0,5.1,1.8,virginica</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">:format</span> {<span class="at">:type</span> <span class="st">"csv"</span>}}}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>By looking at the <code>:values</code> key above, you can see that the dataset was implicitly represented as CSV.</p>
<p>You can also see that</p>
</section>
<section id="using-hanamicloth-templates-defaults" class="level2" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="using-hanamicloth-templates-defaults"><span class="header-section-number">2.4</span> Using Hanamicloth templates &amp; defaults</h2>
<p>Hanamicloth offers its own set of templates and substitution keys. Compared to Hanamiâ€™s original, it is similar but less sophisticated. Also, it supports the layered grammar which is demonstrated later in this document.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb11"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> iris</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>    (hanami/plot hanami/point-chart</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>                 #<span class="at">:hanami</span>{<span class="at">:x</span> <span class="at">:sepal-width</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:y</span> <span class="at">:sepal-length</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:mark-size</span> <span class="dv">200</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div><script>vegaEmbed(document.currentScript.parentElement, {"encoding":{"x":{"field":"sepal-width","type":"quantitative"},"y":{"field":"sepal-length","type":"quantitative"}},"usermeta":{"embedOptions":{"renderer":"svg"}},"mark":{"type":"circle","size":200,"tooltip":true},"width":400,"background":"floralwhite","height":300,"data":{"url":"hanamicloth.walkthrough_files\/0.csv","format":{"type":"csv"}}});</script></div>
<div class="sourceClojure">
<div class="sourceCode" id="cb12"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> iris</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>    (hanami/plot hanami/point-chart</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>                 #<span class="at">:hanami</span>{<span class="at">:x</span> <span class="at">:sepal-width</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:y</span> <span class="at">:sepal-length</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:mark-size</span> <span class="dv">200</span>})</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>    kind/pprint)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb13"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>{<span class="at">:encoding</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a> {<span class="at">:x</span> {<span class="at">:field</span> <span class="at">:sepal-width</span>, <span class="at">:type</span> <span class="at">:quantitative</span>},</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">:y</span> {<span class="at">:field</span> <span class="at">:sepal-length</span>, <span class="at">:type</span> <span class="at">:quantitative</span>}},</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a> <span class="at">:usermeta</span> {<span class="at">:embedOptions</span> {<span class="at">:renderer</span> <span class="at">:svg</span>}},</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a> <span class="at">:mark</span> {<span class="at">:type</span> <span class="st">"circle"</span>, <span class="at">:size</span> <span class="dv">200</span>, <span class="at">:tooltip</span> <span class="va">true</span>},</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a> <span class="at">:width</span> <span class="dv">400</span>,</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a> <span class="at">:background</span> <span class="st">"floralwhite"</span>,</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a> <span class="at">:height</span> <span class="dv">300</span>,</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a> <span class="at">:data</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a> {<span class="at">:values</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>  <span class="st">"rownames,sepal-length,sepal-width,petal-length,petal-width,species</span><span class="sc">\n</span><span class="st">1,5.1,3.5,1.4,0.2,setosa</span><span class="sc">\n</span><span class="st">2,4.9,3.0,1.4,0.2,setosa</span><span class="sc">\n</span><span class="st">3,4.7,3.2,1.3,0.2,setosa</span><span class="sc">\n</span><span class="st">4,4.6,3.1,1.5,0.2,setosa</span><span class="sc">\n</span><span class="st">5,5.0,3.6,1.4,0.2,setosa</span><span class="sc">\n</span><span class="st">6,5.4,3.9,1.7,0.4,setosa</span><span class="sc">\n</span><span class="st">7,4.6,3.4,1.4,0.3,setosa</span><span class="sc">\n</span><span class="st">8,5.0,3.4,1.5,0.2,setosa</span><span class="sc">\n</span><span class="st">9,4.4,2.9,1.4,0.2,setosa</span><span class="sc">\n</span><span class="st">10,4.9,3.1,1.5,0.1,setosa</span><span class="sc">\n</span><span class="st">11,5.4,3.7,1.5,0.2,setosa</span><span class="sc">\n</span><span class="st">12,4.8,3.4,1.6,0.2,setosa</span><span class="sc">\n</span><span class="st">13,4.8,3.0,1.4,0.1,setosa</span><span class="sc">\n</span><span class="st">14,4.3,3.0,1.1,0.1,setosa</span><span class="sc">\n</span><span class="st">15,5.8,4.0,1.2,0.2,setosa</span><span class="sc">\n</span><span class="st">16,5.7,4.4,1.5,0.4,setosa</span><span class="sc">\n</span><span class="st">17,5.4,3.9,1.3,0.4,setosa</span><span class="sc">\n</span><span class="st">18,5.1,3.5,1.4,0.3,setosa</span><span class="sc">\n</span><span class="st">19,5.7,3.8,1.7,0.3,setosa</span><span class="sc">\n</span><span class="st">20,5.1,3.8,1.5,0.3,setosa</span><span class="sc">\n</span><span class="st">21,5.4,3.4,1.7,0.2,setosa</span><span class="sc">\n</span><span class="st">22,5.1,3.7,1.5,0.4,setosa</span><span class="sc">\n</span><span class="st">23,4.6,3.6,1.0,0.2,setosa</span><span class="sc">\n</span><span class="st">24,5.1,3.3,1.7,0.5,setosa</span><span class="sc">\n</span><span class="st">25,4.8,3.4,1.9,0.2,setosa</span><span class="sc">\n</span><span class="st">26,5.0,3.0,1.6,0.2,setosa</span><span class="sc">\n</span><span class="st">27,5.0,3.4,1.6,0.4,setosa</span><span class="sc">\n</span><span class="st">28,5.2,3.5,1.5,0.2,setosa</span><span class="sc">\n</span><span class="st">29,5.2,3.4,1.4,0.2,setosa</span><span class="sc">\n</span><span class="st">30,4.7,3.2,1.6,0.2,setosa</span><span class="sc">\n</span><span class="st">31,4.8,3.1,1.6,0.2,setosa</span><span class="sc">\n</span><span class="st">32,5.4,3.4,1.5,0.4,setosa</span><span class="sc">\n</span><span class="st">33,5.2,4.1,1.5,0.1,setosa</span><span class="sc">\n</span><span class="st">34,5.5,4.2,1.4,0.2,setosa</span><span class="sc">\n</span><span class="st">35,4.9,3.1,1.5,0.2,setosa</span><span class="sc">\n</span><span class="st">36,5.0,3.2,1.2,0.2,setosa</span><span class="sc">\n</span><span class="st">37,5.5,3.5,1.3,0.2,setosa</span><span class="sc">\n</span><span class="st">38,4.9,3.6,1.4,0.1,setosa</span><span class="sc">\n</span><span class="st">39,4.4,3.0,1.3,0.2,setosa</span><span class="sc">\n</span><span class="st">40,5.1,3.4,1.5,0.2,setosa</span><span class="sc">\n</span><span class="st">41,5.0,3.5,1.3,0.3,setosa</span><span class="sc">\n</span><span class="st">42,4.5,2.3,1.3,0.3,setosa</span><span class="sc">\n</span><span class="st">43,4.4,3.2,1.3,0.2,setosa</span><span class="sc">\n</span><span class="st">44,5.0,3.5,1.6,0.6,setosa</span><span class="sc">\n</span><span class="st">45,5.1,3.8,1.9,0.4,setosa</span><span class="sc">\n</span><span class="st">46,4.8,3.0,1.4,0.3,setosa</span><span class="sc">\n</span><span class="st">47,5.1,3.8,1.6,0.2,setosa</span><span class="sc">\n</span><span class="st">48,4.6,3.2,1.4,0.2,setosa</span><span class="sc">\n</span><span class="st">49,5.3,3.7,1.5,0.2,setosa</span><span class="sc">\n</span><span class="st">50,5.0,3.3,1.4,0.2,setosa</span><span class="sc">\n</span><span class="st">51,7.0,3.2,4.7,1.4,versicolor</span><span class="sc">\n</span><span class="st">52,6.4,3.2,4.5,1.5,versicolor</span><span class="sc">\n</span><span class="st">53,6.9,3.1,4.9,1.5,versicolor</span><span class="sc">\n</span><span class="st">54,5.5,2.3,4.0,1.3,versicolor</span><span class="sc">\n</span><span class="st">55,6.5,2.8,4.6,1.5,versicolor</span><span class="sc">\n</span><span class="st">56,5.7,2.8,4.5,1.3,versicolor</span><span class="sc">\n</span><span class="st">57,6.3,3.3,4.7,1.6,versicolor</span><span class="sc">\n</span><span class="st">58,4.9,2.4,3.3,1.0,versicolor</span><span class="sc">\n</span><span class="st">59,6.6,2.9,4.6,1.3,versicolor</span><span class="sc">\n</span><span class="st">60,5.2,2.7,3.9,1.4,versicolor</span><span class="sc">\n</span><span class="st">61,5.0,2.0,3.5,1.0,versicolor</span><span class="sc">\n</span><span class="st">62,5.9,3.0,4.2,1.5,versicolor</span><span class="sc">\n</span><span class="st">63,6.0,2.2,4.0,1.0,versicolor</span><span class="sc">\n</span><span class="st">64,6.1,2.9,4.7,1.4,versicolor</span><span class="sc">\n</span><span class="st">65,5.6,2.9,3.6,1.3,versicolor</span><span class="sc">\n</span><span class="st">66,6.7,3.1,4.4,1.4,versicolor</span><span class="sc">\n</span><span class="st">67,5.6,3.0,4.5,1.5,versicolor</span><span class="sc">\n</span><span class="st">68,5.8,2.7,4.1,1.0,versicolor</span><span class="sc">\n</span><span class="st">69,6.2,2.2,4.5,1.5,versicolor</span><span class="sc">\n</span><span class="st">70,5.6,2.5,3.9,1.1,versicolor</span><span class="sc">\n</span><span class="st">71,5.9,3.2,4.8,1.8,versicolor</span><span class="sc">\n</span><span class="st">72,6.1,2.8,4.0,1.3,versicolor</span><span class="sc">\n</span><span class="st">73,6.3,2.5,4.9,1.5,versicolor</span><span class="sc">\n</span><span class="st">74,6.1,2.8,4.7,1.2,versicolor</span><span class="sc">\n</span><span class="st">75,6.4,2.9,4.3,1.3,versicolor</span><span class="sc">\n</span><span class="st">76,6.6,3.0,4.4,1.4,versicolor</span><span class="sc">\n</span><span class="st">77,6.8,2.8,4.8,1.4,versicolor</span><span class="sc">\n</span><span class="st">78,6.7,3.0,5.0,1.7,versicolor</span><span class="sc">\n</span><span class="st">79,6.0,2.9,4.5,1.5,versicolor</span><span class="sc">\n</span><span class="st">80,5.7,2.6,3.5,1.0,versicolor</span><span class="sc">\n</span><span class="st">81,5.5,2.4,3.8,1.1,versicolor</span><span class="sc">\n</span><span class="st">82,5.5,2.4,3.7,1.0,versicolor</span><span class="sc">\n</span><span class="st">83,5.8,2.7,3.9,1.2,versicolor</span><span class="sc">\n</span><span class="st">84,6.0,2.7,5.1,1.6,versicolor</span><span class="sc">\n</span><span class="st">85,5.4,3.0,4.5,1.5,versicolor</span><span class="sc">\n</span><span class="st">86,6.0,3.4,4.5,1.6,versicolor</span><span class="sc">\n</span><span class="st">87,6.7,3.1,4.7,1.5,versicolor</span><span class="sc">\n</span><span class="st">88,6.3,2.3,4.4,1.3,versicolor</span><span class="sc">\n</span><span class="st">89,5.6,3.0,4.1,1.3,versicolor</span><span class="sc">\n</span><span class="st">90,5.5,2.5,4.0,1.3,versicolor</span><span class="sc">\n</span><span class="st">91,5.5,2.6,4.4,1.2,versicolor</span><span class="sc">\n</span><span class="st">92,6.1,3.0,4.6,1.4,versicolor</span><span class="sc">\n</span><span class="st">93,5.8,2.6,4.0,1.2,versicolor</span><span class="sc">\n</span><span class="st">94,5.0,2.3,3.3,1.0,versicolor</span><span class="sc">\n</span><span class="st">95,5.6,2.7,4.2,1.3,versicolor</span><span class="sc">\n</span><span class="st">96,5.7,3.0,4.2,1.2,versicolor</span><span class="sc">\n</span><span class="st">97,5.7,2.9,4.2,1.3,versicolor</span><span class="sc">\n</span><span class="st">98,6.2,2.9,4.3,1.3,versicolor</span><span class="sc">\n</span><span class="st">99,5.1,2.5,3.0,1.1,versicolor</span><span class="sc">\n</span><span class="st">100,5.7,2.8,4.1,1.3,versicolor</span><span class="sc">\n</span><span class="st">101,6.3,3.3,6.0,2.5,virginica</span><span class="sc">\n</span><span class="st">102,5.8,2.7,5.1,1.9,virginica</span><span class="sc">\n</span><span class="st">103,7.1,3.0,5.9,2.1,virginica</span><span class="sc">\n</span><span class="st">104,6.3,2.9,5.6,1.8,virginica</span><span class="sc">\n</span><span class="st">105,6.5,3.0,5.8,2.2,virginica</span><span class="sc">\n</span><span class="st">106,7.6,3.0,6.6,2.1,virginica</span><span class="sc">\n</span><span class="st">107,4.9,2.5,4.5,1.7,virginica</span><span class="sc">\n</span><span class="st">108,7.3,2.9,6.3,1.8,virginica</span><span class="sc">\n</span><span class="st">109,6.7,2.5,5.8,1.8,virginica</span><span class="sc">\n</span><span class="st">110,7.2,3.6,6.1,2.5,virginica</span><span class="sc">\n</span><span class="st">111,6.5,3.2,5.1,2.0,virginica</span><span class="sc">\n</span><span class="st">112,6.4,2.7,5.3,1.9,virginica</span><span class="sc">\n</span><span class="st">113,6.8,3.0,5.5,2.1,virginica</span><span class="sc">\n</span><span class="st">114,5.7,2.5,5.0,2.0,virginica</span><span class="sc">\n</span><span class="st">115,5.8,2.8,5.1,2.4,virginica</span><span class="sc">\n</span><span class="st">116,6.4,3.2,5.3,2.3,virginica</span><span class="sc">\n</span><span class="st">117,6.5,3.0,5.5,1.8,virginica</span><span class="sc">\n</span><span class="st">118,7.7,3.8,6.7,2.2,virginica</span><span class="sc">\n</span><span class="st">119,7.7,2.6,6.9,2.3,virginica</span><span class="sc">\n</span><span class="st">120,6.0,2.2,5.0,1.5,virginica</span><span class="sc">\n</span><span class="st">121,6.9,3.2,5.7,2.3,virginica</span><span class="sc">\n</span><span class="st">122,5.6,2.8,4.9,2.0,virginica</span><span class="sc">\n</span><span class="st">123,7.7,2.8,6.7,2.0,virginica</span><span class="sc">\n</span><span class="st">124,6.3,2.7,4.9,1.8,virginica</span><span class="sc">\n</span><span class="st">125,6.7,3.3,5.7,2.1,virginica</span><span class="sc">\n</span><span class="st">126,7.2,3.2,6.0,1.8,virginica</span><span class="sc">\n</span><span class="st">127,6.2,2.8,4.8,1.8,virginica</span><span class="sc">\n</span><span class="st">128,6.1,3.0,4.9,1.8,virginica</span><span class="sc">\n</span><span class="st">129,6.4,2.8,5.6,2.1,virginica</span><span class="sc">\n</span><span class="st">130,7.2,3.0,5.8,1.6,virginica</span><span class="sc">\n</span><span class="st">131,7.4,2.8,6.1,1.9,virginica</span><span class="sc">\n</span><span class="st">132,7.9,3.8,6.4,2.0,virginica</span><span class="sc">\n</span><span class="st">133,6.4,2.8,5.6,2.2,virginica</span><span class="sc">\n</span><span class="st">134,6.3,2.8,5.1,1.5,virginica</span><span class="sc">\n</span><span class="st">135,6.1,2.6,5.6,1.4,virginica</span><span class="sc">\n</span><span class="st">136,7.7,3.0,6.1,2.3,virginica</span><span class="sc">\n</span><span class="st">137,6.3,3.4,5.6,2.4,virginica</span><span class="sc">\n</span><span class="st">138,6.4,3.1,5.5,1.8,virginica</span><span class="sc">\n</span><span class="st">139,6.0,3.0,4.8,1.8,virginica</span><span class="sc">\n</span><span class="st">140,6.9,3.1,5.4,2.1,virginica</span><span class="sc">\n</span><span class="st">141,6.7,3.1,5.6,2.4,virginica</span><span class="sc">\n</span><span class="st">142,6.9,3.1,5.1,2.3,virginica</span><span class="sc">\n</span><span class="st">143,5.8,2.7,5.1,1.9,virginica</span><span class="sc">\n</span><span class="st">144,6.8,3.2,5.9,2.3,virginica</span><span class="sc">\n</span><span class="st">145,6.7,3.3,5.7,2.5,virginica</span><span class="sc">\n</span><span class="st">146,6.7,3.0,5.2,2.3,virginica</span><span class="sc">\n</span><span class="st">147,6.3,2.5,5.0,1.9,virginica</span><span class="sc">\n</span><span class="st">148,6.5,3.0,5.2,2.0,virginica</span><span class="sc">\n</span><span class="st">149,6.2,3.4,5.4,2.3,virginica</span><span class="sc">\n</span><span class="st">150,5.9,3.0,5.1,1.8,virginica</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">:format</span> {<span class="at">:type</span> <span class="st">"csv"</span>}}}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You see a slight differnece in the resulting spec: it is defined to be rendered as <code>:svg</code> by default.</p>
</section>
<section id="inferring-and-overriding-field-types" class="level2" data-number="2.5">
<h2 data-number="2.5" class="anchored" data-anchor-id="inferring-and-overriding-field-types"><span class="header-section-number">2.5</span> Inferring and overriding field types</h2>
<p>Field types are inferred from the Column type. Here, for example, <code>:x</code> and <code>:y</code> are <code>:quantitative</code>, and <code>:species</code> is <code>:nominal</code> (and is thus coloured with distinct colours rather than a gradient).</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb14"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> iris</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>    (hanami/plot hanami/point-chart</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>                 #<span class="at">:hanami</span>{<span class="at">:x</span> <span class="at">:sepal-width</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:y</span> <span class="at">:sepal-length</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:color</span> <span class="at">:species</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:mark-size</span> <span class="dv">200</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div><script>vegaEmbed(document.currentScript.parentElement, {"encoding":{"color":{"field":"species","type":"nominal"},"x":{"field":"sepal-width","type":"quantitative"},"y":{"field":"sepal-length","type":"quantitative"}},"usermeta":{"embedOptions":{"renderer":"svg"}},"mark":{"type":"circle","size":200,"tooltip":true},"width":400,"background":"floralwhite","height":300,"data":{"url":"hanamicloth.walkthrough_files\/0.csv","format":{"type":"csv"}}});</script></div>
<p>On the other hand, in the following example, <code>:color</code> is <code>:quantitative</code>:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb15"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> mtcars</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>    (hanami/plot hanami/point-chart</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>                 #<span class="at">:hanami</span>{<span class="at">:x</span> <span class="at">:mpg</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:y</span> <span class="at">:disp</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:color</span> <span class="at">:cyl</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:mark-size</span> <span class="dv">200</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div><script>vegaEmbed(document.currentScript.parentElement, {"encoding":{"color":{"field":"cyl","type":"quantitative"},"x":{"field":"mpg","type":"quantitative"},"y":{"field":"disp","type":"quantitative"}},"usermeta":{"embedOptions":{"renderer":"svg"}},"mark":{"type":"circle","size":200,"tooltip":true},"width":400,"background":"floralwhite","height":300,"data":{"url":"hanamicloth.walkthrough_files\/1.csv","format":{"type":"csv"}}});</script></div>
<p>This can be overridden:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb16"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> mtcars</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>    (hanami/plot hanami/point-chart</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>                 #<span class="at">:hanami</span>{<span class="at">:x</span> <span class="at">:mpg</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:y</span> <span class="at">:disp</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:color</span> <span class="at">:cyl</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:color-type</span> <span class="at">:nominal</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:mark-size</span> <span class="dv">200</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div><script>vegaEmbed(document.currentScript.parentElement, {"encoding":{"color":{"field":"cyl","type":"nominal"},"x":{"field":"mpg","type":"quantitative"},"y":{"field":"disp","type":"quantitative"}},"usermeta":{"embedOptions":{"renderer":"svg"}},"mark":{"type":"circle","size":200,"tooltip":true},"width":400,"background":"floralwhite","height":300,"data":{"url":"hanamicloth.walkthrough_files\/1.csv","format":{"type":"csv"}}});</script></div>
</section>
<section id="more-examples" class="level2" data-number="2.6">
<h2 data-number="2.6" class="anchored" data-anchor-id="more-examples"><span class="header-section-number">2.6</span> More examples</h2>
<div class="sourceClojure">
<div class="sourceCode" id="cb17"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> mtcars</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>    (hanami/plot hanami/boxplot-chart</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>                 #<span class="at">:hanami</span>{<span class="at">:x</span> <span class="at">:cyl</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:x-type</span> <span class="at">:nominal</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:y</span> <span class="at">:disp</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div><script>vegaEmbed(document.currentScript.parentElement, {"encoding":{"x":{"field":"cyl","type":"quantitative"},"y":{"field":"disp","type":"quantitative"}},"usermeta":{"embedOptions":{"renderer":"svg"}},"mark":{"type":"boxplot","tooltip":true},"width":400,"background":"floralwhite","height":300,"data":{"url":"hanamicloth.walkthrough_files\/1.csv","format":{"type":"csv"}}});</script></div>
<div class="sourceClojure">
<div class="sourceCode" id="cb18"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> iris</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>    (hanami/plot hanami/rule-chart</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>                 #<span class="at">:hanami</span>{<span class="at">:x</span> <span class="at">:sepal-width</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:y</span> <span class="at">:sepal-length</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:x2</span> <span class="at">:petal-width</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:y2</span> <span class="at">:petal-length</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:mark-opacity</span> <span class="fl">0.5</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:mark-size</span> <span class="dv">3</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:color</span> <span class="at">:species</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div><script>vegaEmbed(document.currentScript.parentElement, {"encoding":{"color":{"field":"species","type":"nominal"},"x":{"field":"sepal-width","type":"quantitative"},"y":{"field":"sepal-length","type":"quantitative"},"x2":{"field":"petal-width","type":"quantitative"},"y2":{"field":"petal-length","type":"quantitative"}},"usermeta":{"embedOptions":{"renderer":"svg"}},"mark":{"type":"rule","size":3,"opacity":0.5,"tooltip":true},"width":400,"background":"floralwhite","height":300,"data":{"url":"hanamicloth.walkthrough_files\/0.csv","format":{"type":"csv"}}});</script></div>
</section>
<section id="delayed-transformation" class="level2" data-number="2.7">
<h2 data-number="2.7" class="anchored" data-anchor-id="delayed-transformation"><span class="header-section-number">2.7</span> Delayed transformation</h2>
<p>Instead of the <code>hanami/plot</code> function, it is possible to used <code>hanami/base</code>:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb19"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> iris</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>    (hanami/base hanami/point-chart</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>                 #<span class="at">:hanami</span>{<span class="at">:x</span> <span class="at">:sepal-width</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:y</span> <span class="at">:sepal-length</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:mark-size</span> <span class="dv">200</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div><script>vegaEmbed(document.currentScript.parentElement, {"encoding":{"x":{"field":"sepal-width","type":"quantitative"},"y":{"field":"sepal-length","type":"quantitative"}},"usermeta":{"embedOptions":{"renderer":"svg"}},"mark":{"type":"circle","size":200,"tooltip":true},"width":400,"background":"floralwhite","height":300,"data":{"url":"hanamicloth.walkthrough_files\/0.csv","format":{"type":"csv"}}});</script></div>
<p>The result is displayed the same way, but the internal representation delays the Hanami transformation of templates.</p>
<p>Let us compare the two:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb20"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> iris</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>    (hanami/plot hanami/point-chart</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>                 #<span class="at">:hanami</span>{<span class="at">:x</span> <span class="at">:sepal-width</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:y</span> <span class="at">:sepal-length</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:color</span> <span class="at">:species</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:mark-size</span> <span class="dv">200</span>})</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>    kind/pprint)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb21"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>{<span class="at">:encoding</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a> {<span class="at">:color</span> {<span class="at">:field</span> <span class="at">:species</span>, <span class="at">:type</span> <span class="at">:nominal</span>},</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">:x</span> {<span class="at">:field</span> <span class="at">:sepal-width</span>, <span class="at">:type</span> <span class="at">:quantitative</span>},</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">:y</span> {<span class="at">:field</span> <span class="at">:sepal-length</span>, <span class="at">:type</span> <span class="at">:quantitative</span>}},</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a> <span class="at">:usermeta</span> {<span class="at">:embedOptions</span> {<span class="at">:renderer</span> <span class="at">:svg</span>}},</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a> <span class="at">:mark</span> {<span class="at">:type</span> <span class="st">"circle"</span>, <span class="at">:size</span> <span class="dv">200</span>, <span class="at">:tooltip</span> <span class="va">true</span>},</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a> <span class="at">:width</span> <span class="dv">400</span>,</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a> <span class="at">:background</span> <span class="st">"floralwhite"</span>,</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a> <span class="at">:height</span> <span class="dv">300</span>,</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a> <span class="at">:data</span></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a> {<span class="at">:values</span></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>  <span class="st">"rownames,sepal-length,sepal-width,petal-length,petal-width,species</span><span class="sc">\n</span><span class="st">1,5.1,3.5,1.4,0.2,setosa</span><span class="sc">\n</span><span class="st">2,4.9,3.0,1.4,0.2,setosa</span><span class="sc">\n</span><span class="st">3,4.7,3.2,1.3,0.2,setosa</span><span class="sc">\n</span><span class="st">4,4.6,3.1,1.5,0.2,setosa</span><span class="sc">\n</span><span class="st">5,5.0,3.6,1.4,0.2,setosa</span><span class="sc">\n</span><span class="st">6,5.4,3.9,1.7,0.4,setosa</span><span class="sc">\n</span><span class="st">7,4.6,3.4,1.4,0.3,setosa</span><span class="sc">\n</span><span class="st">8,5.0,3.4,1.5,0.2,setosa</span><span class="sc">\n</span><span class="st">9,4.4,2.9,1.4,0.2,setosa</span><span class="sc">\n</span><span class="st">10,4.9,3.1,1.5,0.1,setosa</span><span class="sc">\n</span><span class="st">11,5.4,3.7,1.5,0.2,setosa</span><span class="sc">\n</span><span class="st">12,4.8,3.4,1.6,0.2,setosa</span><span class="sc">\n</span><span class="st">13,4.8,3.0,1.4,0.1,setosa</span><span class="sc">\n</span><span class="st">14,4.3,3.0,1.1,0.1,setosa</span><span class="sc">\n</span><span class="st">15,5.8,4.0,1.2,0.2,setosa</span><span class="sc">\n</span><span class="st">16,5.7,4.4,1.5,0.4,setosa</span><span class="sc">\n</span><span class="st">17,5.4,3.9,1.3,0.4,setosa</span><span class="sc">\n</span><span class="st">18,5.1,3.5,1.4,0.3,setosa</span><span class="sc">\n</span><span class="st">19,5.7,3.8,1.7,0.3,setosa</span><span class="sc">\n</span><span class="st">20,5.1,3.8,1.5,0.3,setosa</span><span class="sc">\n</span><span class="st">21,5.4,3.4,1.7,0.2,setosa</span><span class="sc">\n</span><span class="st">22,5.1,3.7,1.5,0.4,setosa</span><span class="sc">\n</span><span class="st">23,4.6,3.6,1.0,0.2,setosa</span><span class="sc">\n</span><span class="st">24,5.1,3.3,1.7,0.5,setosa</span><span class="sc">\n</span><span class="st">25,4.8,3.4,1.9,0.2,setosa</span><span class="sc">\n</span><span class="st">26,5.0,3.0,1.6,0.2,setosa</span><span class="sc">\n</span><span class="st">27,5.0,3.4,1.6,0.4,setosa</span><span class="sc">\n</span><span class="st">28,5.2,3.5,1.5,0.2,setosa</span><span class="sc">\n</span><span class="st">29,5.2,3.4,1.4,0.2,setosa</span><span class="sc">\n</span><span class="st">30,4.7,3.2,1.6,0.2,setosa</span><span class="sc">\n</span><span class="st">31,4.8,3.1,1.6,0.2,setosa</span><span class="sc">\n</span><span class="st">32,5.4,3.4,1.5,0.4,setosa</span><span class="sc">\n</span><span class="st">33,5.2,4.1,1.5,0.1,setosa</span><span class="sc">\n</span><span class="st">34,5.5,4.2,1.4,0.2,setosa</span><span class="sc">\n</span><span class="st">35,4.9,3.1,1.5,0.2,setosa</span><span class="sc">\n</span><span class="st">36,5.0,3.2,1.2,0.2,setosa</span><span class="sc">\n</span><span class="st">37,5.5,3.5,1.3,0.2,setosa</span><span class="sc">\n</span><span class="st">38,4.9,3.6,1.4,0.1,setosa</span><span class="sc">\n</span><span class="st">39,4.4,3.0,1.3,0.2,setosa</span><span class="sc">\n</span><span class="st">40,5.1,3.4,1.5,0.2,setosa</span><span class="sc">\n</span><span class="st">41,5.0,3.5,1.3,0.3,setosa</span><span class="sc">\n</span><span class="st">42,4.5,2.3,1.3,0.3,setosa</span><span class="sc">\n</span><span class="st">43,4.4,3.2,1.3,0.2,setosa</span><span class="sc">\n</span><span class="st">44,5.0,3.5,1.6,0.6,setosa</span><span class="sc">\n</span><span class="st">45,5.1,3.8,1.9,0.4,setosa</span><span class="sc">\n</span><span class="st">46,4.8,3.0,1.4,0.3,setosa</span><span class="sc">\n</span><span class="st">47,5.1,3.8,1.6,0.2,setosa</span><span class="sc">\n</span><span class="st">48,4.6,3.2,1.4,0.2,setosa</span><span class="sc">\n</span><span class="st">49,5.3,3.7,1.5,0.2,setosa</span><span class="sc">\n</span><span class="st">50,5.0,3.3,1.4,0.2,setosa</span><span class="sc">\n</span><span class="st">51,7.0,3.2,4.7,1.4,versicolor</span><span class="sc">\n</span><span class="st">52,6.4,3.2,4.5,1.5,versicolor</span><span class="sc">\n</span><span class="st">53,6.9,3.1,4.9,1.5,versicolor</span><span class="sc">\n</span><span class="st">54,5.5,2.3,4.0,1.3,versicolor</span><span class="sc">\n</span><span class="st">55,6.5,2.8,4.6,1.5,versicolor</span><span class="sc">\n</span><span class="st">56,5.7,2.8,4.5,1.3,versicolor</span><span class="sc">\n</span><span class="st">57,6.3,3.3,4.7,1.6,versicolor</span><span class="sc">\n</span><span class="st">58,4.9,2.4,3.3,1.0,versicolor</span><span class="sc">\n</span><span class="st">59,6.6,2.9,4.6,1.3,versicolor</span><span class="sc">\n</span><span class="st">60,5.2,2.7,3.9,1.4,versicolor</span><span class="sc">\n</span><span class="st">61,5.0,2.0,3.5,1.0,versicolor</span><span class="sc">\n</span><span class="st">62,5.9,3.0,4.2,1.5,versicolor</span><span class="sc">\n</span><span class="st">63,6.0,2.2,4.0,1.0,versicolor</span><span class="sc">\n</span><span class="st">64,6.1,2.9,4.7,1.4,versicolor</span><span class="sc">\n</span><span class="st">65,5.6,2.9,3.6,1.3,versicolor</span><span class="sc">\n</span><span class="st">66,6.7,3.1,4.4,1.4,versicolor</span><span class="sc">\n</span><span class="st">67,5.6,3.0,4.5,1.5,versicolor</span><span class="sc">\n</span><span class="st">68,5.8,2.7,4.1,1.0,versicolor</span><span class="sc">\n</span><span class="st">69,6.2,2.2,4.5,1.5,versicolor</span><span class="sc">\n</span><span class="st">70,5.6,2.5,3.9,1.1,versicolor</span><span class="sc">\n</span><span class="st">71,5.9,3.2,4.8,1.8,versicolor</span><span class="sc">\n</span><span class="st">72,6.1,2.8,4.0,1.3,versicolor</span><span class="sc">\n</span><span class="st">73,6.3,2.5,4.9,1.5,versicolor</span><span class="sc">\n</span><span class="st">74,6.1,2.8,4.7,1.2,versicolor</span><span class="sc">\n</span><span class="st">75,6.4,2.9,4.3,1.3,versicolor</span><span class="sc">\n</span><span class="st">76,6.6,3.0,4.4,1.4,versicolor</span><span class="sc">\n</span><span class="st">77,6.8,2.8,4.8,1.4,versicolor</span><span class="sc">\n</span><span class="st">78,6.7,3.0,5.0,1.7,versicolor</span><span class="sc">\n</span><span class="st">79,6.0,2.9,4.5,1.5,versicolor</span><span class="sc">\n</span><span class="st">80,5.7,2.6,3.5,1.0,versicolor</span><span class="sc">\n</span><span class="st">81,5.5,2.4,3.8,1.1,versicolor</span><span class="sc">\n</span><span class="st">82,5.5,2.4,3.7,1.0,versicolor</span><span class="sc">\n</span><span class="st">83,5.8,2.7,3.9,1.2,versicolor</span><span class="sc">\n</span><span class="st">84,6.0,2.7,5.1,1.6,versicolor</span><span class="sc">\n</span><span class="st">85,5.4,3.0,4.5,1.5,versicolor</span><span class="sc">\n</span><span class="st">86,6.0,3.4,4.5,1.6,versicolor</span><span class="sc">\n</span><span class="st">87,6.7,3.1,4.7,1.5,versicolor</span><span class="sc">\n</span><span class="st">88,6.3,2.3,4.4,1.3,versicolor</span><span class="sc">\n</span><span class="st">89,5.6,3.0,4.1,1.3,versicolor</span><span class="sc">\n</span><span class="st">90,5.5,2.5,4.0,1.3,versicolor</span><span class="sc">\n</span><span class="st">91,5.5,2.6,4.4,1.2,versicolor</span><span class="sc">\n</span><span class="st">92,6.1,3.0,4.6,1.4,versicolor</span><span class="sc">\n</span><span class="st">93,5.8,2.6,4.0,1.2,versicolor</span><span class="sc">\n</span><span class="st">94,5.0,2.3,3.3,1.0,versicolor</span><span class="sc">\n</span><span class="st">95,5.6,2.7,4.2,1.3,versicolor</span><span class="sc">\n</span><span class="st">96,5.7,3.0,4.2,1.2,versicolor</span><span class="sc">\n</span><span class="st">97,5.7,2.9,4.2,1.3,versicolor</span><span class="sc">\n</span><span class="st">98,6.2,2.9,4.3,1.3,versicolor</span><span class="sc">\n</span><span class="st">99,5.1,2.5,3.0,1.1,versicolor</span><span class="sc">\n</span><span class="st">100,5.7,2.8,4.1,1.3,versicolor</span><span class="sc">\n</span><span class="st">101,6.3,3.3,6.0,2.5,virginica</span><span class="sc">\n</span><span class="st">102,5.8,2.7,5.1,1.9,virginica</span><span class="sc">\n</span><span class="st">103,7.1,3.0,5.9,2.1,virginica</span><span class="sc">\n</span><span class="st">104,6.3,2.9,5.6,1.8,virginica</span><span class="sc">\n</span><span class="st">105,6.5,3.0,5.8,2.2,virginica</span><span class="sc">\n</span><span class="st">106,7.6,3.0,6.6,2.1,virginica</span><span class="sc">\n</span><span class="st">107,4.9,2.5,4.5,1.7,virginica</span><span class="sc">\n</span><span class="st">108,7.3,2.9,6.3,1.8,virginica</span><span class="sc">\n</span><span class="st">109,6.7,2.5,5.8,1.8,virginica</span><span class="sc">\n</span><span class="st">110,7.2,3.6,6.1,2.5,virginica</span><span class="sc">\n</span><span class="st">111,6.5,3.2,5.1,2.0,virginica</span><span class="sc">\n</span><span class="st">112,6.4,2.7,5.3,1.9,virginica</span><span class="sc">\n</span><span class="st">113,6.8,3.0,5.5,2.1,virginica</span><span class="sc">\n</span><span class="st">114,5.7,2.5,5.0,2.0,virginica</span><span class="sc">\n</span><span class="st">115,5.8,2.8,5.1,2.4,virginica</span><span class="sc">\n</span><span class="st">116,6.4,3.2,5.3,2.3,virginica</span><span class="sc">\n</span><span class="st">117,6.5,3.0,5.5,1.8,virginica</span><span class="sc">\n</span><span class="st">118,7.7,3.8,6.7,2.2,virginica</span><span class="sc">\n</span><span class="st">119,7.7,2.6,6.9,2.3,virginica</span><span class="sc">\n</span><span class="st">120,6.0,2.2,5.0,1.5,virginica</span><span class="sc">\n</span><span class="st">121,6.9,3.2,5.7,2.3,virginica</span><span class="sc">\n</span><span class="st">122,5.6,2.8,4.9,2.0,virginica</span><span class="sc">\n</span><span class="st">123,7.7,2.8,6.7,2.0,virginica</span><span class="sc">\n</span><span class="st">124,6.3,2.7,4.9,1.8,virginica</span><span class="sc">\n</span><span class="st">125,6.7,3.3,5.7,2.1,virginica</span><span class="sc">\n</span><span class="st">126,7.2,3.2,6.0,1.8,virginica</span><span class="sc">\n</span><span class="st">127,6.2,2.8,4.8,1.8,virginica</span><span class="sc">\n</span><span class="st">128,6.1,3.0,4.9,1.8,virginica</span><span class="sc">\n</span><span class="st">129,6.4,2.8,5.6,2.1,virginica</span><span class="sc">\n</span><span class="st">130,7.2,3.0,5.8,1.6,virginica</span><span class="sc">\n</span><span class="st">131,7.4,2.8,6.1,1.9,virginica</span><span class="sc">\n</span><span class="st">132,7.9,3.8,6.4,2.0,virginica</span><span class="sc">\n</span><span class="st">133,6.4,2.8,5.6,2.2,virginica</span><span class="sc">\n</span><span class="st">134,6.3,2.8,5.1,1.5,virginica</span><span class="sc">\n</span><span class="st">135,6.1,2.6,5.6,1.4,virginica</span><span class="sc">\n</span><span class="st">136,7.7,3.0,6.1,2.3,virginica</span><span class="sc">\n</span><span class="st">137,6.3,3.4,5.6,2.4,virginica</span><span class="sc">\n</span><span class="st">138,6.4,3.1,5.5,1.8,virginica</span><span class="sc">\n</span><span class="st">139,6.0,3.0,4.8,1.8,virginica</span><span class="sc">\n</span><span class="st">140,6.9,3.1,5.4,2.1,virginica</span><span class="sc">\n</span><span class="st">141,6.7,3.1,5.6,2.4,virginica</span><span class="sc">\n</span><span class="st">142,6.9,3.1,5.1,2.3,virginica</span><span class="sc">\n</span><span class="st">143,5.8,2.7,5.1,1.9,virginica</span><span class="sc">\n</span><span class="st">144,6.8,3.2,5.9,2.3,virginica</span><span class="sc">\n</span><span class="st">145,6.7,3.3,5.7,2.5,virginica</span><span class="sc">\n</span><span class="st">146,6.7,3.0,5.2,2.3,virginica</span><span class="sc">\n</span><span class="st">147,6.3,2.5,5.0,1.9,virginica</span><span class="sc">\n</span><span class="st">148,6.5,3.0,5.2,2.0,virginica</span><span class="sc">\n</span><span class="st">149,6.2,3.4,5.4,2.3,virginica</span><span class="sc">\n</span><span class="st">150,5.9,3.0,5.1,1.8,virginica</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">:format</span> {<span class="at">:type</span> <span class="st">"csv"</span>}}}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb22"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> iris</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>    (hanami/base hanami/point-chart</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>                 #<span class="at">:hanami</span>{<span class="at">:x</span> <span class="at">:sepal-width</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:y</span> <span class="at">:sepal-length</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:color</span> <span class="at">:species</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:mark-size</span> <span class="dv">200</span>})</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>    kind/pprint)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb23"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>{<span class="at">:encoding</span> <span class="at">:hanami/encoding</span>,</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a> <span class="at">:usermeta</span> <span class="at">:hanami/usermeta</span>,</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a> <span class="at">:mark</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a> {<span class="at">:type</span> <span class="st">"circle"</span>,</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">:color</span> <span class="at">:hanami/mark-color</span>,</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">:size</span> <span class="at">:hanami/mark-size</span>,</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">:opacity</span> <span class="at">:hanami/mark-opacity</span>,</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">:tooltip</span> <span class="at">:hanami/mark-tooltip</span>},</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a> <span class="at">:width</span> <span class="at">:hanami/width</span>,</span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a> <span class="at">:background</span> <span class="at">:hanami/background</span>,</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a> <span class="at">:title</span> <span class="at">:hanami/title</span>,</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a> <span class="at">:layer</span> <span class="at">:hanami/layer</span>,</span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a> <span class="at">:kindly/f</span> <span class="va">#'scicloj.hanamicloth.v1.api/vega-lite-xform,</span></span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a> <span class="at">:aerial.hanami.templates/defaults</span></span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a> {<span class="at">:hanami/x-title</span> <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">:hanami/mark-size</span> <span class="dv">200</span>,</span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">:hanami/y2-after-stat</span> <span class="at">:hanami/y2</span>,</span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">:hanami/y2</span> <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">:hanami/mark-opacity</span> <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">:hanami/y-title</span> <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">:hanami/x-type</span></span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a>  #function[scicloj.hanamicloth.v1.dag/fn-with-deps-keys/fn--<span class="dv">46609</span>],</span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a>  <span class="at">:hanami/y-type</span></span>
<span id="cb23-24"><a href="#cb23-24" aria-hidden="true" tabindex="-1"></a>  #function[scicloj.hanamicloth.v1.dag/fn-with-deps-keys/fn--<span class="dv">46609</span>],</span>
<span id="cb23-25"><a href="#cb23-25" aria-hidden="true" tabindex="-1"></a>  <span class="at">:hanami/x2</span> <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb23-26"><a href="#cb23-26" aria-hidden="true" tabindex="-1"></a>  <span class="at">:hanami/dataset</span></span>
<span id="cb23-27"><a href="#cb23-27" aria-hidden="true" tabindex="-1"></a>  #&lt;WrappedValue<span class="at">@7fbc9f13:</span> </span>
<span id="cb23-28"><a href="#cb23-28" aria-hidden="true" tabindex="-1"></a>    https<span class="at">://vincentarelbundock.github.io/Rdatasets/csv/datasets/iris.csv</span> [<span class="dv">150</span> <span class="dv">6</span>]:</span>
<span id="cb23-29"><a href="#cb23-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-30"><a href="#cb23-30" aria-hidden="true" tabindex="-1"></a>| <span class="at">:rownames</span> | <span class="at">:sepal-length</span> | <span class="at">:sepal-width</span> | <span class="at">:petal-length</span> | <span class="at">:petal-width</span> |  <span class="at">:species</span> |</span>
<span id="cb23-31"><a href="#cb23-31" aria-hidden="true" tabindex="-1"></a>|----------:|--------------:|-------------:|--------------:|-------------:|-----------|</span>
<span id="cb23-32"><a href="#cb23-32" aria-hidden="true" tabindex="-1"></a>|         <span class="dv">1</span> |           <span class="fl">5.1</span> |          <span class="fl">3.5</span> |           <span class="fl">1.4</span> |          <span class="fl">0.2</span> |    setosa |</span>
<span id="cb23-33"><a href="#cb23-33" aria-hidden="true" tabindex="-1"></a>|         <span class="dv">2</span> |           <span class="fl">4.9</span> |          <span class="fl">3.0</span> |           <span class="fl">1.4</span> |          <span class="fl">0.2</span> |    setosa |</span>
<span id="cb23-34"><a href="#cb23-34" aria-hidden="true" tabindex="-1"></a>|         <span class="dv">3</span> |           <span class="fl">4.7</span> |          <span class="fl">3.2</span> |           <span class="fl">1.3</span> |          <span class="fl">0.2</span> |    setosa |</span>
<span id="cb23-35"><a href="#cb23-35" aria-hidden="true" tabindex="-1"></a>|         <span class="dv">4</span> |           <span class="fl">4.6</span> |          <span class="fl">3.1</span> |           <span class="fl">1.5</span> |          <span class="fl">0.2</span> |    setosa |</span>
<span id="cb23-36"><a href="#cb23-36" aria-hidden="true" tabindex="-1"></a>|         <span class="dv">5</span> |           <span class="fl">5.0</span> |          <span class="fl">3.6</span> |           <span class="fl">1.4</span> |          <span class="fl">0.2</span> |    setosa |</span>
<span id="cb23-37"><a href="#cb23-37" aria-hidden="true" tabindex="-1"></a>|         <span class="dv">6</span> |           <span class="fl">5.4</span> |          <span class="fl">3.9</span> |           <span class="fl">1.7</span> |          <span class="fl">0.4</span> |    setosa |</span>
<span id="cb23-38"><a href="#cb23-38" aria-hidden="true" tabindex="-1"></a>|         <span class="dv">7</span> |           <span class="fl">4.6</span> |          <span class="fl">3.4</span> |           <span class="fl">1.4</span> |          <span class="fl">0.3</span> |    setosa |</span>
<span id="cb23-39"><a href="#cb23-39" aria-hidden="true" tabindex="-1"></a>|         <span class="dv">8</span> |           <span class="fl">5.0</span> |          <span class="fl">3.4</span> |           <span class="fl">1.5</span> |          <span class="fl">0.2</span> |    setosa |</span>
<span id="cb23-40"><a href="#cb23-40" aria-hidden="true" tabindex="-1"></a>|         <span class="dv">9</span> |           <span class="fl">4.4</span> |          <span class="fl">2.9</span> |           <span class="fl">1.4</span> |          <span class="fl">0.2</span> |    setosa |</span>
<span id="cb23-41"><a href="#cb23-41" aria-hidden="true" tabindex="-1"></a>|        <span class="dv">10</span> |           <span class="fl">4.9</span> |          <span class="fl">3.1</span> |           <span class="fl">1.5</span> |          <span class="fl">0.1</span> |    setosa |</span>
<span id="cb23-42"><a href="#cb23-42" aria-hidden="true" tabindex="-1"></a>|       ... |           ... |          ... |           ... |          ... |       ... |</span>
<span id="cb23-43"><a href="#cb23-43" aria-hidden="true" tabindex="-1"></a>|       <span class="dv">140</span> |           <span class="fl">6.9</span> |          <span class="fl">3.1</span> |           <span class="fl">5.4</span> |          <span class="fl">2.1</span> | virginica |</span>
<span id="cb23-44"><a href="#cb23-44" aria-hidden="true" tabindex="-1"></a>|       <span class="dv">141</span> |           <span class="fl">6.7</span> |          <span class="fl">3.1</span> |           <span class="fl">5.6</span> |          <span class="fl">2.4</span> | virginica |</span>
<span id="cb23-45"><a href="#cb23-45" aria-hidden="true" tabindex="-1"></a>|       <span class="dv">142</span> |           <span class="fl">6.9</span> |          <span class="fl">3.1</span> |           <span class="fl">5.1</span> |          <span class="fl">2.3</span> | virginica |</span>
<span id="cb23-46"><a href="#cb23-46" aria-hidden="true" tabindex="-1"></a>|       <span class="dv">143</span> |           <span class="fl">5.8</span> |          <span class="fl">2.7</span> |           <span class="fl">5.1</span> |          <span class="fl">1.9</span> | virginica |</span>
<span id="cb23-47"><a href="#cb23-47" aria-hidden="true" tabindex="-1"></a>|       <span class="dv">144</span> |           <span class="fl">6.8</span> |          <span class="fl">3.2</span> |           <span class="fl">5.9</span> |          <span class="fl">2.3</span> | virginica |</span>
<span id="cb23-48"><a href="#cb23-48" aria-hidden="true" tabindex="-1"></a>|       <span class="dv">145</span> |           <span class="fl">6.7</span> |          <span class="fl">3.3</span> |           <span class="fl">5.7</span> |          <span class="fl">2.5</span> | virginica |</span>
<span id="cb23-49"><a href="#cb23-49" aria-hidden="true" tabindex="-1"></a>|       <span class="dv">146</span> |           <span class="fl">6.7</span> |          <span class="fl">3.0</span> |           <span class="fl">5.2</span> |          <span class="fl">2.3</span> | virginica |</span>
<span id="cb23-50"><a href="#cb23-50" aria-hidden="true" tabindex="-1"></a>|       <span class="dv">147</span> |           <span class="fl">6.3</span> |          <span class="fl">2.5</span> |           <span class="fl">5.0</span> |          <span class="fl">1.9</span> | virginica |</span>
<span id="cb23-51"><a href="#cb23-51" aria-hidden="true" tabindex="-1"></a>|       <span class="dv">148</span> |           <span class="fl">6.5</span> |          <span class="fl">3.0</span> |           <span class="fl">5.2</span> |          <span class="fl">2.0</span> | virginica |</span>
<span id="cb23-52"><a href="#cb23-52" aria-hidden="true" tabindex="-1"></a>|       <span class="dv">149</span> |           <span class="fl">6.2</span> |          <span class="fl">3.4</span> |           <span class="fl">5.4</span> |          <span class="fl">2.3</span> | virginica |</span>
<span id="cb23-53"><a href="#cb23-53" aria-hidden="true" tabindex="-1"></a>|       <span class="dv">150</span> |           <span class="fl">5.9</span> |          <span class="fl">3.0</span> |           <span class="fl">5.1</span> |          <span class="fl">1.8</span> | virginica |</span>
<span id="cb23-54"><a href="#cb23-54" aria-hidden="true" tabindex="-1"></a><span class="kw">&gt;</span>,</span>
<span id="cb23-55"><a href="#cb23-55" aria-hidden="true" tabindex="-1"></a>  <span class="at">:hanami/column</span> <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb23-56"><a href="#cb23-56" aria-hidden="true" tabindex="-1"></a>  <span class="at">:hanami/row</span> <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb23-57"><a href="#cb23-57" aria-hidden="true" tabindex="-1"></a>  <span class="at">:hanami/x2-encoding</span></span>
<span id="cb23-58"><a href="#cb23-58" aria-hidden="true" tabindex="-1"></a>  #function[scicloj.hanamicloth.v1.dag/fn-with-deps-keys/fn--<span class="dv">46609</span>],</span>
<span id="cb23-59"><a href="#cb23-59" aria-hidden="true" tabindex="-1"></a>  <span class="at">:hanami/color-type</span></span>
<span id="cb23-60"><a href="#cb23-60" aria-hidden="true" tabindex="-1"></a>  #function[scicloj.hanamicloth.v1.dag/fn-with-deps-keys/fn--<span class="dv">46609</span>],</span>
<span id="cb23-61"><a href="#cb23-61" aria-hidden="true" tabindex="-1"></a>  <span class="at">:hanami/y-bin</span> <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb23-62"><a href="#cb23-62" aria-hidden="true" tabindex="-1"></a>  <span class="at">:hanami/layer</span> [],</span>
<span id="cb23-63"><a href="#cb23-63" aria-hidden="true" tabindex="-1"></a>  <span class="at">:hanami/opacity</span> <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb23-64"><a href="#cb23-64" aria-hidden="true" tabindex="-1"></a>  <span class="at">:hanami/group</span></span>
<span id="cb23-65"><a href="#cb23-65" aria-hidden="true" tabindex="-1"></a>  #function[scicloj.hanamicloth.v1.dag/fn-with-deps-keys/fn--<span class="dv">46609</span>],</span>
<span id="cb23-66"><a href="#cb23-66" aria-hidden="true" tabindex="-1"></a>  <span class="at">:hanami/color</span> <span class="at">:species</span>,</span>
<span id="cb23-67"><a href="#cb23-67" aria-hidden="true" tabindex="-1"></a>  <span class="at">:hanami/usermeta</span> {<span class="at">:embedOptions</span> {<span class="at">:renderer</span> <span class="at">:hanami/renderer</span>}},</span>
<span id="cb23-68"><a href="#cb23-68" aria-hidden="true" tabindex="-1"></a>  <span class="at">:hanami/predictors</span> [<span class="at">:hanami/x</span>],</span>
<span id="cb23-69"><a href="#cb23-69" aria-hidden="true" tabindex="-1"></a>  <span class="at">:hanami/mark-tooltip</span> <span class="va">true</span>,</span>
<span id="cb23-70"><a href="#cb23-70" aria-hidden="true" tabindex="-1"></a>  <span class="at">:hanami/x-after-stat</span> <span class="at">:hanami/x</span>,</span>
<span id="cb23-71"><a href="#cb23-71" aria-hidden="true" tabindex="-1"></a>  <span class="at">:hanami/x</span> <span class="at">:sepal-width</span>,</span>
<span id="cb23-72"><a href="#cb23-72" aria-hidden="true" tabindex="-1"></a>  <span class="at">:DFMT</span> {<span class="at">:type</span> <span class="st">"csv"</span>},</span>
<span id="cb23-73"><a href="#cb23-73" aria-hidden="true" tabindex="-1"></a>  <span class="at">:hanami/x-type-after-stat</span></span>
<span id="cb23-74"><a href="#cb23-74" aria-hidden="true" tabindex="-1"></a>  #function[scicloj.hanamicloth.v1.dag/fn-with-deps-keys/fn--<span class="dv">46609</span>],</span>
<span id="cb23-75"><a href="#cb23-75" aria-hidden="true" tabindex="-1"></a>  <span class="at">:hanami/background</span> <span class="st">"floralwhite"</span>,</span>
<span id="cb23-76"><a href="#cb23-76" aria-hidden="true" tabindex="-1"></a>  <span class="at">:hanami/width</span> <span class="dv">400</span>,</span>
<span id="cb23-77"><a href="#cb23-77" aria-hidden="true" tabindex="-1"></a>  <span class="at">:hanami/dataset-after-stat</span></span>
<span id="cb23-78"><a href="#cb23-78" aria-hidden="true" tabindex="-1"></a>  #function[scicloj.hanamicloth.v1.dag/fn-with-deps-keys/fn--<span class="dv">46609</span>],</span>
<span id="cb23-79"><a href="#cb23-79" aria-hidden="true" tabindex="-1"></a>  <span class="at">:hanami/csv-data</span></span>
<span id="cb23-80"><a href="#cb23-80" aria-hidden="true" tabindex="-1"></a>  #function[scicloj.hanamicloth.v1.dag/fn-with-deps-keys/fn--<span class="dv">46609</span>],</span>
<span id="cb23-81"><a href="#cb23-81" aria-hidden="true" tabindex="-1"></a>  <span class="at">:hanami/height</span> <span class="dv">300</span>,</span>
<span id="cb23-82"><a href="#cb23-82" aria-hidden="true" tabindex="-1"></a>  <span class="at">:hanami/x2-after-stat</span> <span class="at">:hanami/x2</span>,</span>
<span id="cb23-83"><a href="#cb23-83" aria-hidden="true" tabindex="-1"></a>  <span class="at">:hanami/renderer</span> <span class="at">:svg</span>,</span>
<span id="cb23-84"><a href="#cb23-84" aria-hidden="true" tabindex="-1"></a>  <span class="at">:hanami/title</span> <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb23-85"><a href="#cb23-85" aria-hidden="true" tabindex="-1"></a>  <span class="at">:hanami/size-type</span></span>
<span id="cb23-86"><a href="#cb23-86" aria-hidden="true" tabindex="-1"></a>  #function[scicloj.hanamicloth.v1.dag/fn-with-deps-keys/fn--<span class="dv">46609</span>],</span>
<span id="cb23-87"><a href="#cb23-87" aria-hidden="true" tabindex="-1"></a>  <span class="at">:hanami/data</span> {<span class="at">:values</span> <span class="at">:hanami/csv-data</span>, <span class="at">:format</span> {<span class="at">:type</span> <span class="st">"csv"</span>}},</span>
<span id="cb23-88"><a href="#cb23-88" aria-hidden="true" tabindex="-1"></a>  <span class="at">:hanami/size</span> <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb23-89"><a href="#cb23-89" aria-hidden="true" tabindex="-1"></a>  <span class="at">:hanami/y-type-after-stat</span></span>
<span id="cb23-90"><a href="#cb23-90" aria-hidden="true" tabindex="-1"></a>  #function[scicloj.hanamicloth.v1.dag/fn-with-deps-keys/fn--<span class="dv">46609</span>],</span>
<span id="cb23-91"><a href="#cb23-91" aria-hidden="true" tabindex="-1"></a>  <span class="at">:hanami/y</span> <span class="at">:sepal-length</span>,</span>
<span id="cb23-92"><a href="#cb23-92" aria-hidden="true" tabindex="-1"></a>  <span class="at">:hanami/encoding</span></span>
<span id="cb23-93"><a href="#cb23-93" aria-hidden="true" tabindex="-1"></a>  {<span class="at">:color</span> {<span class="at">:field</span> <span class="at">:hanami/color</span>, <span class="at">:type</span> <span class="at">:hanami/color-type</span>},</span>
<span id="cb23-94"><a href="#cb23-94" aria-hidden="true" tabindex="-1"></a>   <span class="at">:size</span> {<span class="at">:field</span> <span class="at">:hanami/size</span>, <span class="at">:type</span> <span class="at">:hanami/size-type</span>},</span>
<span id="cb23-95"><a href="#cb23-95" aria-hidden="true" tabindex="-1"></a>   <span class="at">:x</span></span>
<span id="cb23-96"><a href="#cb23-96" aria-hidden="true" tabindex="-1"></a>   {<span class="at">:field</span> <span class="at">:hanami/x-after-stat</span>,</span>
<span id="cb23-97"><a href="#cb23-97" aria-hidden="true" tabindex="-1"></a>    <span class="at">:type</span> <span class="at">:hanami/x-type-after-stat</span>,</span>
<span id="cb23-98"><a href="#cb23-98" aria-hidden="true" tabindex="-1"></a>    <span class="at">:title</span> <span class="at">:hanami/x-title</span>,</span>
<span id="cb23-99"><a href="#cb23-99" aria-hidden="true" tabindex="-1"></a>    <span class="at">:bin</span> <span class="at">:hanami/x-bin</span>},</span>
<span id="cb23-100"><a href="#cb23-100" aria-hidden="true" tabindex="-1"></a>   <span class="at">:y</span></span>
<span id="cb23-101"><a href="#cb23-101" aria-hidden="true" tabindex="-1"></a>   {<span class="at">:field</span> <span class="at">:hanami/y-after-stat</span>,</span>
<span id="cb23-102"><a href="#cb23-102" aria-hidden="true" tabindex="-1"></a>    <span class="at">:type</span> <span class="at">:hanami/y-type-after-stat</span>,</span>
<span id="cb23-103"><a href="#cb23-103" aria-hidden="true" tabindex="-1"></a>    <span class="at">:title</span> <span class="at">:hanami/y-title</span>,</span>
<span id="cb23-104"><a href="#cb23-104" aria-hidden="true" tabindex="-1"></a>    <span class="at">:bin</span> <span class="at">:hanami/y-bin</span>},</span>
<span id="cb23-105"><a href="#cb23-105" aria-hidden="true" tabindex="-1"></a>   <span class="at">:x2</span> <span class="at">:hanami/x2-encoding</span>,</span>
<span id="cb23-106"><a href="#cb23-106" aria-hidden="true" tabindex="-1"></a>   <span class="at">:y2</span> <span class="at">:hanami/y2-encoding</span>},</span>
<span id="cb23-107"><a href="#cb23-107" aria-hidden="true" tabindex="-1"></a>  <span class="at">:hanami/y2-encoding</span></span>
<span id="cb23-108"><a href="#cb23-108" aria-hidden="true" tabindex="-1"></a>  #function[scicloj.hanamicloth.v1.dag/fn-with-deps-keys/fn--<span class="dv">46609</span>],</span>
<span id="cb23-109"><a href="#cb23-109" aria-hidden="true" tabindex="-1"></a>  <span class="at">:hanami/mark-color</span> <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb23-110"><a href="#cb23-110" aria-hidden="true" tabindex="-1"></a>  <span class="at">:hanami/x-bin</span> <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb23-111"><a href="#cb23-111" aria-hidden="true" tabindex="-1"></a>  <span class="at">:hanami/y-after-stat</span> <span class="at">:hanami/y</span>,</span>
<span id="cb23-112"><a href="#cb23-112" aria-hidden="true" tabindex="-1"></a>  <span class="at">:hanami/stat</span> <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb23-113"><a href="#cb23-113" aria-hidden="true" tabindex="-1"></a>  <span class="at">:VALDATA</span> <span class="at">:hanami/csv-data</span>,</span>
<span id="cb23-114"><a href="#cb23-114" aria-hidden="true" tabindex="-1"></a>  <span class="at">:hanami/histogram-nbins</span> <span class="dv">10</span>,</span>
<span id="cb23-115"><a href="#cb23-115" aria-hidden="true" tabindex="-1"></a>  <span class="at">:hanami/mark</span> <span class="st">"circle"</span>},</span>
<span id="cb23-116"><a href="#cb23-116" aria-hidden="true" tabindex="-1"></a> <span class="at">:height</span> <span class="at">:hanami/height</span>,</span>
<span id="cb23-117"><a href="#cb23-117" aria-hidden="true" tabindex="-1"></a> <span class="at">:data</span> <span class="at">:hanami/data</span>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The structure returned by <code>hanami/base</code> is a Hanami template (with <a href="https://github.com/jsa-aerial/hanami?tab=readme-ov-file#template-local-defaults">local defaults</a>). When it is displayed, it goes through the Hanami transform to recieve the Vega-Lite spec.</p>
<p>When we use base, we can keep processing the template in a pipeline of transformations. We will use it soon with layers.</p>
</section>
<section id="adding-layers" class="level2" data-number="2.8">
<h2 data-number="2.8" class="anchored" data-anchor-id="adding-layers"><span class="header-section-number">2.8</span> Adding layers</h2>
<p>A base plot does not need to have a specified chart. Instead, we may add layers:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb24"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> iris</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>    (hanami/base #<span class="at">:hanami</span>{<span class="at">:x</span> <span class="at">:sepal-width</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:y</span> <span class="at">:sepal-length</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:mark-size</span> <span class="dv">200</span>})</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>    hanami/layer-point)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div><script>vegaEmbed(document.currentScript.parentElement, {"encoding":{"x":{"field":"sepal-width","type":"quantitative"},"y":{"field":"sepal-length","type":"quantitative"}},"usermeta":{"embedOptions":{"renderer":"svg"}},"width":400,"background":"floralwhite","layer":[{"mark":{"type":"circle","size":200,"tooltip":true},"encoding":{"x":{"field":"sepal-width","type":"quantitative"},"y":{"field":"sepal-length","type":"quantitative"}},"data":{"values":"rownames,sepal-length,sepal-width,petal-length,petal-width,species\n1,5.1,3.5,1.4,0.2,setosa\n2,4.9,3.0,1.4,0.2,setosa\n3,4.7,3.2,1.3,0.2,setosa\n4,4.6,3.1,1.5,0.2,setosa\n5,5.0,3.6,1.4,0.2,setosa\n6,5.4,3.9,1.7,0.4,setosa\n7,4.6,3.4,1.4,0.3,setosa\n8,5.0,3.4,1.5,0.2,setosa\n9,4.4,2.9,1.4,0.2,setosa\n10,4.9,3.1,1.5,0.1,setosa\n11,5.4,3.7,1.5,0.2,setosa\n12,4.8,3.4,1.6,0.2,setosa\n13,4.8,3.0,1.4,0.1,setosa\n14,4.3,3.0,1.1,0.1,setosa\n15,5.8,4.0,1.2,0.2,setosa\n16,5.7,4.4,1.5,0.4,setosa\n17,5.4,3.9,1.3,0.4,setosa\n18,5.1,3.5,1.4,0.3,setosa\n19,5.7,3.8,1.7,0.3,setosa\n20,5.1,3.8,1.5,0.3,setosa\n21,5.4,3.4,1.7,0.2,setosa\n22,5.1,3.7,1.5,0.4,setosa\n23,4.6,3.6,1.0,0.2,setosa\n24,5.1,3.3,1.7,0.5,setosa\n25,4.8,3.4,1.9,0.2,setosa\n26,5.0,3.0,1.6,0.2,setosa\n27,5.0,3.4,1.6,0.4,setosa\n28,5.2,3.5,1.5,0.2,setosa\n29,5.2,3.4,1.4,0.2,setosa\n30,4.7,3.2,1.6,0.2,setosa\n31,4.8,3.1,1.6,0.2,setosa\n32,5.4,3.4,1.5,0.4,setosa\n33,5.2,4.1,1.5,0.1,setosa\n34,5.5,4.2,1.4,0.2,setosa\n35,4.9,3.1,1.5,0.2,setosa\n36,5.0,3.2,1.2,0.2,setosa\n37,5.5,3.5,1.3,0.2,setosa\n38,4.9,3.6,1.4,0.1,setosa\n39,4.4,3.0,1.3,0.2,setosa\n40,5.1,3.4,1.5,0.2,setosa\n41,5.0,3.5,1.3,0.3,setosa\n42,4.5,2.3,1.3,0.3,setosa\n43,4.4,3.2,1.3,0.2,setosa\n44,5.0,3.5,1.6,0.6,setosa\n45,5.1,3.8,1.9,0.4,setosa\n46,4.8,3.0,1.4,0.3,setosa\n47,5.1,3.8,1.6,0.2,setosa\n48,4.6,3.2,1.4,0.2,setosa\n49,5.3,3.7,1.5,0.2,setosa\n50,5.0,3.3,1.4,0.2,setosa\n51,7.0,3.2,4.7,1.4,versicolor\n52,6.4,3.2,4.5,1.5,versicolor\n53,6.9,3.1,4.9,1.5,versicolor\n54,5.5,2.3,4.0,1.3,versicolor\n55,6.5,2.8,4.6,1.5,versicolor\n56,5.7,2.8,4.5,1.3,versicolor\n57,6.3,3.3,4.7,1.6,versicolor\n58,4.9,2.4,3.3,1.0,versicolor\n59,6.6,2.9,4.6,1.3,versicolor\n60,5.2,2.7,3.9,1.4,versicolor\n61,5.0,2.0,3.5,1.0,versicolor\n62,5.9,3.0,4.2,1.5,versicolor\n63,6.0,2.2,4.0,1.0,versicolor\n64,6.1,2.9,4.7,1.4,versicolor\n65,5.6,2.9,3.6,1.3,versicolor\n66,6.7,3.1,4.4,1.4,versicolor\n67,5.6,3.0,4.5,1.5,versicolor\n68,5.8,2.7,4.1,1.0,versicolor\n69,6.2,2.2,4.5,1.5,versicolor\n70,5.6,2.5,3.9,1.1,versicolor\n71,5.9,3.2,4.8,1.8,versicolor\n72,6.1,2.8,4.0,1.3,versicolor\n73,6.3,2.5,4.9,1.5,versicolor\n74,6.1,2.8,4.7,1.2,versicolor\n75,6.4,2.9,4.3,1.3,versicolor\n76,6.6,3.0,4.4,1.4,versicolor\n77,6.8,2.8,4.8,1.4,versicolor\n78,6.7,3.0,5.0,1.7,versicolor\n79,6.0,2.9,4.5,1.5,versicolor\n80,5.7,2.6,3.5,1.0,versicolor\n81,5.5,2.4,3.8,1.1,versicolor\n82,5.5,2.4,3.7,1.0,versicolor\n83,5.8,2.7,3.9,1.2,versicolor\n84,6.0,2.7,5.1,1.6,versicolor\n85,5.4,3.0,4.5,1.5,versicolor\n86,6.0,3.4,4.5,1.6,versicolor\n87,6.7,3.1,4.7,1.5,versicolor\n88,6.3,2.3,4.4,1.3,versicolor\n89,5.6,3.0,4.1,1.3,versicolor\n90,5.5,2.5,4.0,1.3,versicolor\n91,5.5,2.6,4.4,1.2,versicolor\n92,6.1,3.0,4.6,1.4,versicolor\n93,5.8,2.6,4.0,1.2,versicolor\n94,5.0,2.3,3.3,1.0,versicolor\n95,5.6,2.7,4.2,1.3,versicolor\n96,5.7,3.0,4.2,1.2,versicolor\n97,5.7,2.9,4.2,1.3,versicolor\n98,6.2,2.9,4.3,1.3,versicolor\n99,5.1,2.5,3.0,1.1,versicolor\n100,5.7,2.8,4.1,1.3,versicolor\n101,6.3,3.3,6.0,2.5,virginica\n102,5.8,2.7,5.1,1.9,virginica\n103,7.1,3.0,5.9,2.1,virginica\n104,6.3,2.9,5.6,1.8,virginica\n105,6.5,3.0,5.8,2.2,virginica\n106,7.6,3.0,6.6,2.1,virginica\n107,4.9,2.5,4.5,1.7,virginica\n108,7.3,2.9,6.3,1.8,virginica\n109,6.7,2.5,5.8,1.8,virginica\n110,7.2,3.6,6.1,2.5,virginica\n111,6.5,3.2,5.1,2.0,virginica\n112,6.4,2.7,5.3,1.9,virginica\n113,6.8,3.0,5.5,2.1,virginica\n114,5.7,2.5,5.0,2.0,virginica\n115,5.8,2.8,5.1,2.4,virginica\n116,6.4,3.2,5.3,2.3,virginica\n117,6.5,3.0,5.5,1.8,virginica\n118,7.7,3.8,6.7,2.2,virginica\n119,7.7,2.6,6.9,2.3,virginica\n120,6.0,2.2,5.0,1.5,virginica\n121,6.9,3.2,5.7,2.3,virginica\n122,5.6,2.8,4.9,2.0,virginica\n123,7.7,2.8,6.7,2.0,virginica\n124,6.3,2.7,4.9,1.8,virginica\n125,6.7,3.3,5.7,2.1,virginica\n126,7.2,3.2,6.0,1.8,virginica\n127,6.2,2.8,4.8,1.8,virginica\n128,6.1,3.0,4.9,1.8,virginica\n129,6.4,2.8,5.6,2.1,virginica\n130,7.2,3.0,5.8,1.6,virginica\n131,7.4,2.8,6.1,1.9,virginica\n132,7.9,3.8,6.4,2.0,virginica\n133,6.4,2.8,5.6,2.2,virginica\n134,6.3,2.8,5.1,1.5,virginica\n135,6.1,2.6,5.6,1.4,virginica\n136,7.7,3.0,6.1,2.3,virginica\n137,6.3,3.4,5.6,2.4,virginica\n138,6.4,3.1,5.5,1.8,virginica\n139,6.0,3.0,4.8,1.8,virginica\n140,6.9,3.1,5.4,2.1,virginica\n141,6.7,3.1,5.6,2.4,virginica\n142,6.9,3.1,5.1,2.3,virginica\n143,5.8,2.7,5.1,1.9,virginica\n144,6.8,3.2,5.9,2.3,virginica\n145,6.7,3.3,5.7,2.5,virginica\n146,6.7,3.0,5.2,2.3,virginica\n147,6.3,2.5,5.0,1.9,virginica\n148,6.5,3.0,5.2,2.0,virginica\n149,6.2,3.4,5.4,2.3,virginica\n150,5.9,3.0,5.1,1.8,virginica\n","format":{"type":"csv"}}}],"height":300,"data":{"url":"hanamicloth.walkthrough_files\/0.csv","format":{"type":"csv"}}});</script></div>
<p>The substitution keys can also be specified on the layer level:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb25"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> iris</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>    (hanami/base #<span class="at">:hanami</span>{<span class="at">:x</span> <span class="at">:sepal-width</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:y</span> <span class="at">:sepal-length</span>})</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>    (hanami/layer-point #<span class="at">:hanami</span>{<span class="at">:mark-size</span> <span class="dv">200</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div><script>vegaEmbed(document.currentScript.parentElement, {"encoding":{"x":{"field":"sepal-width","type":"quantitative"},"y":{"field":"sepal-length","type":"quantitative"}},"usermeta":{"embedOptions":{"renderer":"svg"}},"width":400,"background":"floralwhite","layer":[{"mark":{"type":"circle","size":200,"tooltip":true},"encoding":{"x":{"field":"sepal-width","type":"quantitative"},"y":{"field":"sepal-length","type":"quantitative"}},"data":{"values":"rownames,sepal-length,sepal-width,petal-length,petal-width,species\n1,5.1,3.5,1.4,0.2,setosa\n2,4.9,3.0,1.4,0.2,setosa\n3,4.7,3.2,1.3,0.2,setosa\n4,4.6,3.1,1.5,0.2,setosa\n5,5.0,3.6,1.4,0.2,setosa\n6,5.4,3.9,1.7,0.4,setosa\n7,4.6,3.4,1.4,0.3,setosa\n8,5.0,3.4,1.5,0.2,setosa\n9,4.4,2.9,1.4,0.2,setosa\n10,4.9,3.1,1.5,0.1,setosa\n11,5.4,3.7,1.5,0.2,setosa\n12,4.8,3.4,1.6,0.2,setosa\n13,4.8,3.0,1.4,0.1,setosa\n14,4.3,3.0,1.1,0.1,setosa\n15,5.8,4.0,1.2,0.2,setosa\n16,5.7,4.4,1.5,0.4,setosa\n17,5.4,3.9,1.3,0.4,setosa\n18,5.1,3.5,1.4,0.3,setosa\n19,5.7,3.8,1.7,0.3,setosa\n20,5.1,3.8,1.5,0.3,setosa\n21,5.4,3.4,1.7,0.2,setosa\n22,5.1,3.7,1.5,0.4,setosa\n23,4.6,3.6,1.0,0.2,setosa\n24,5.1,3.3,1.7,0.5,setosa\n25,4.8,3.4,1.9,0.2,setosa\n26,5.0,3.0,1.6,0.2,setosa\n27,5.0,3.4,1.6,0.4,setosa\n28,5.2,3.5,1.5,0.2,setosa\n29,5.2,3.4,1.4,0.2,setosa\n30,4.7,3.2,1.6,0.2,setosa\n31,4.8,3.1,1.6,0.2,setosa\n32,5.4,3.4,1.5,0.4,setosa\n33,5.2,4.1,1.5,0.1,setosa\n34,5.5,4.2,1.4,0.2,setosa\n35,4.9,3.1,1.5,0.2,setosa\n36,5.0,3.2,1.2,0.2,setosa\n37,5.5,3.5,1.3,0.2,setosa\n38,4.9,3.6,1.4,0.1,setosa\n39,4.4,3.0,1.3,0.2,setosa\n40,5.1,3.4,1.5,0.2,setosa\n41,5.0,3.5,1.3,0.3,setosa\n42,4.5,2.3,1.3,0.3,setosa\n43,4.4,3.2,1.3,0.2,setosa\n44,5.0,3.5,1.6,0.6,setosa\n45,5.1,3.8,1.9,0.4,setosa\n46,4.8,3.0,1.4,0.3,setosa\n47,5.1,3.8,1.6,0.2,setosa\n48,4.6,3.2,1.4,0.2,setosa\n49,5.3,3.7,1.5,0.2,setosa\n50,5.0,3.3,1.4,0.2,setosa\n51,7.0,3.2,4.7,1.4,versicolor\n52,6.4,3.2,4.5,1.5,versicolor\n53,6.9,3.1,4.9,1.5,versicolor\n54,5.5,2.3,4.0,1.3,versicolor\n55,6.5,2.8,4.6,1.5,versicolor\n56,5.7,2.8,4.5,1.3,versicolor\n57,6.3,3.3,4.7,1.6,versicolor\n58,4.9,2.4,3.3,1.0,versicolor\n59,6.6,2.9,4.6,1.3,versicolor\n60,5.2,2.7,3.9,1.4,versicolor\n61,5.0,2.0,3.5,1.0,versicolor\n62,5.9,3.0,4.2,1.5,versicolor\n63,6.0,2.2,4.0,1.0,versicolor\n64,6.1,2.9,4.7,1.4,versicolor\n65,5.6,2.9,3.6,1.3,versicolor\n66,6.7,3.1,4.4,1.4,versicolor\n67,5.6,3.0,4.5,1.5,versicolor\n68,5.8,2.7,4.1,1.0,versicolor\n69,6.2,2.2,4.5,1.5,versicolor\n70,5.6,2.5,3.9,1.1,versicolor\n71,5.9,3.2,4.8,1.8,versicolor\n72,6.1,2.8,4.0,1.3,versicolor\n73,6.3,2.5,4.9,1.5,versicolor\n74,6.1,2.8,4.7,1.2,versicolor\n75,6.4,2.9,4.3,1.3,versicolor\n76,6.6,3.0,4.4,1.4,versicolor\n77,6.8,2.8,4.8,1.4,versicolor\n78,6.7,3.0,5.0,1.7,versicolor\n79,6.0,2.9,4.5,1.5,versicolor\n80,5.7,2.6,3.5,1.0,versicolor\n81,5.5,2.4,3.8,1.1,versicolor\n82,5.5,2.4,3.7,1.0,versicolor\n83,5.8,2.7,3.9,1.2,versicolor\n84,6.0,2.7,5.1,1.6,versicolor\n85,5.4,3.0,4.5,1.5,versicolor\n86,6.0,3.4,4.5,1.6,versicolor\n87,6.7,3.1,4.7,1.5,versicolor\n88,6.3,2.3,4.4,1.3,versicolor\n89,5.6,3.0,4.1,1.3,versicolor\n90,5.5,2.5,4.0,1.3,versicolor\n91,5.5,2.6,4.4,1.2,versicolor\n92,6.1,3.0,4.6,1.4,versicolor\n93,5.8,2.6,4.0,1.2,versicolor\n94,5.0,2.3,3.3,1.0,versicolor\n95,5.6,2.7,4.2,1.3,versicolor\n96,5.7,3.0,4.2,1.2,versicolor\n97,5.7,2.9,4.2,1.3,versicolor\n98,6.2,2.9,4.3,1.3,versicolor\n99,5.1,2.5,3.0,1.1,versicolor\n100,5.7,2.8,4.1,1.3,versicolor\n101,6.3,3.3,6.0,2.5,virginica\n102,5.8,2.7,5.1,1.9,virginica\n103,7.1,3.0,5.9,2.1,virginica\n104,6.3,2.9,5.6,1.8,virginica\n105,6.5,3.0,5.8,2.2,virginica\n106,7.6,3.0,6.6,2.1,virginica\n107,4.9,2.5,4.5,1.7,virginica\n108,7.3,2.9,6.3,1.8,virginica\n109,6.7,2.5,5.8,1.8,virginica\n110,7.2,3.6,6.1,2.5,virginica\n111,6.5,3.2,5.1,2.0,virginica\n112,6.4,2.7,5.3,1.9,virginica\n113,6.8,3.0,5.5,2.1,virginica\n114,5.7,2.5,5.0,2.0,virginica\n115,5.8,2.8,5.1,2.4,virginica\n116,6.4,3.2,5.3,2.3,virginica\n117,6.5,3.0,5.5,1.8,virginica\n118,7.7,3.8,6.7,2.2,virginica\n119,7.7,2.6,6.9,2.3,virginica\n120,6.0,2.2,5.0,1.5,virginica\n121,6.9,3.2,5.7,2.3,virginica\n122,5.6,2.8,4.9,2.0,virginica\n123,7.7,2.8,6.7,2.0,virginica\n124,6.3,2.7,4.9,1.8,virginica\n125,6.7,3.3,5.7,2.1,virginica\n126,7.2,3.2,6.0,1.8,virginica\n127,6.2,2.8,4.8,1.8,virginica\n128,6.1,3.0,4.9,1.8,virginica\n129,6.4,2.8,5.6,2.1,virginica\n130,7.2,3.0,5.8,1.6,virginica\n131,7.4,2.8,6.1,1.9,virginica\n132,7.9,3.8,6.4,2.0,virginica\n133,6.4,2.8,5.6,2.2,virginica\n134,6.3,2.8,5.1,1.5,virginica\n135,6.1,2.6,5.6,1.4,virginica\n136,7.7,3.0,6.1,2.3,virginica\n137,6.3,3.4,5.6,2.4,virginica\n138,6.4,3.1,5.5,1.8,virginica\n139,6.0,3.0,4.8,1.8,virginica\n140,6.9,3.1,5.4,2.1,virginica\n141,6.7,3.1,5.6,2.4,virginica\n142,6.9,3.1,5.1,2.3,virginica\n143,5.8,2.7,5.1,1.9,virginica\n144,6.8,3.2,5.9,2.3,virginica\n145,6.7,3.3,5.7,2.5,virginica\n146,6.7,3.0,5.2,2.3,virginica\n147,6.3,2.5,5.0,1.9,virginica\n148,6.5,3.0,5.2,2.0,virginica\n149,6.2,3.4,5.4,2.3,virginica\n150,5.9,3.0,5.1,1.8,virginica\n","format":{"type":"csv"}}}],"height":300,"data":{"url":"hanamicloth.walkthrough_files\/0.csv","format":{"type":"csv"}}});</script></div>
<p>This allows us to create aesthetic differences between layers:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb26"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> iris</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>    (hanami/base #<span class="at">:hanami</span>{<span class="at">:title</span> <span class="st">"dummy"</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:mark-color</span> <span class="st">"green"</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:x</span> <span class="at">:sepal-width</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:y</span> <span class="at">:sepal-length</span>})</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>    (hanami/layer-line #<span class="at">:hanami</span>{<span class="at">:mark-size</span> <span class="dv">4</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>                                <span class="at">:mark-color</span> <span class="st">"brown"</span>})</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>    (hanami/layer-point #<span class="at">:hanami</span>{<span class="at">:mark-size</span> <span class="dv">200</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div><script>vegaEmbed(document.currentScript.parentElement, {"encoding":{"x":{"field":"sepal-width","type":"quantitative"},"y":{"field":"sepal-length","type":"quantitative"}},"usermeta":{"embedOptions":{"renderer":"svg"}},"width":400,"background":"floralwhite","title":"dummy","layer":[{"mark":{"type":"line","color":"brown","size":4,"tooltip":true},"encoding":{"x":{"field":"sepal-width","type":"quantitative"},"y":{"field":"sepal-length","type":"quantitative"}},"data":{"values":"rownames,sepal-length,sepal-width,petal-length,petal-width,species\n1,5.1,3.5,1.4,0.2,setosa\n2,4.9,3.0,1.4,0.2,setosa\n3,4.7,3.2,1.3,0.2,setosa\n4,4.6,3.1,1.5,0.2,setosa\n5,5.0,3.6,1.4,0.2,setosa\n6,5.4,3.9,1.7,0.4,setosa\n7,4.6,3.4,1.4,0.3,setosa\n8,5.0,3.4,1.5,0.2,setosa\n9,4.4,2.9,1.4,0.2,setosa\n10,4.9,3.1,1.5,0.1,setosa\n11,5.4,3.7,1.5,0.2,setosa\n12,4.8,3.4,1.6,0.2,setosa\n13,4.8,3.0,1.4,0.1,setosa\n14,4.3,3.0,1.1,0.1,setosa\n15,5.8,4.0,1.2,0.2,setosa\n16,5.7,4.4,1.5,0.4,setosa\n17,5.4,3.9,1.3,0.4,setosa\n18,5.1,3.5,1.4,0.3,setosa\n19,5.7,3.8,1.7,0.3,setosa\n20,5.1,3.8,1.5,0.3,setosa\n21,5.4,3.4,1.7,0.2,setosa\n22,5.1,3.7,1.5,0.4,setosa\n23,4.6,3.6,1.0,0.2,setosa\n24,5.1,3.3,1.7,0.5,setosa\n25,4.8,3.4,1.9,0.2,setosa\n26,5.0,3.0,1.6,0.2,setosa\n27,5.0,3.4,1.6,0.4,setosa\n28,5.2,3.5,1.5,0.2,setosa\n29,5.2,3.4,1.4,0.2,setosa\n30,4.7,3.2,1.6,0.2,setosa\n31,4.8,3.1,1.6,0.2,setosa\n32,5.4,3.4,1.5,0.4,setosa\n33,5.2,4.1,1.5,0.1,setosa\n34,5.5,4.2,1.4,0.2,setosa\n35,4.9,3.1,1.5,0.2,setosa\n36,5.0,3.2,1.2,0.2,setosa\n37,5.5,3.5,1.3,0.2,setosa\n38,4.9,3.6,1.4,0.1,setosa\n39,4.4,3.0,1.3,0.2,setosa\n40,5.1,3.4,1.5,0.2,setosa\n41,5.0,3.5,1.3,0.3,setosa\n42,4.5,2.3,1.3,0.3,setosa\n43,4.4,3.2,1.3,0.2,setosa\n44,5.0,3.5,1.6,0.6,setosa\n45,5.1,3.8,1.9,0.4,setosa\n46,4.8,3.0,1.4,0.3,setosa\n47,5.1,3.8,1.6,0.2,setosa\n48,4.6,3.2,1.4,0.2,setosa\n49,5.3,3.7,1.5,0.2,setosa\n50,5.0,3.3,1.4,0.2,setosa\n51,7.0,3.2,4.7,1.4,versicolor\n52,6.4,3.2,4.5,1.5,versicolor\n53,6.9,3.1,4.9,1.5,versicolor\n54,5.5,2.3,4.0,1.3,versicolor\n55,6.5,2.8,4.6,1.5,versicolor\n56,5.7,2.8,4.5,1.3,versicolor\n57,6.3,3.3,4.7,1.6,versicolor\n58,4.9,2.4,3.3,1.0,versicolor\n59,6.6,2.9,4.6,1.3,versicolor\n60,5.2,2.7,3.9,1.4,versicolor\n61,5.0,2.0,3.5,1.0,versicolor\n62,5.9,3.0,4.2,1.5,versicolor\n63,6.0,2.2,4.0,1.0,versicolor\n64,6.1,2.9,4.7,1.4,versicolor\n65,5.6,2.9,3.6,1.3,versicolor\n66,6.7,3.1,4.4,1.4,versicolor\n67,5.6,3.0,4.5,1.5,versicolor\n68,5.8,2.7,4.1,1.0,versicolor\n69,6.2,2.2,4.5,1.5,versicolor\n70,5.6,2.5,3.9,1.1,versicolor\n71,5.9,3.2,4.8,1.8,versicolor\n72,6.1,2.8,4.0,1.3,versicolor\n73,6.3,2.5,4.9,1.5,versicolor\n74,6.1,2.8,4.7,1.2,versicolor\n75,6.4,2.9,4.3,1.3,versicolor\n76,6.6,3.0,4.4,1.4,versicolor\n77,6.8,2.8,4.8,1.4,versicolor\n78,6.7,3.0,5.0,1.7,versicolor\n79,6.0,2.9,4.5,1.5,versicolor\n80,5.7,2.6,3.5,1.0,versicolor\n81,5.5,2.4,3.8,1.1,versicolor\n82,5.5,2.4,3.7,1.0,versicolor\n83,5.8,2.7,3.9,1.2,versicolor\n84,6.0,2.7,5.1,1.6,versicolor\n85,5.4,3.0,4.5,1.5,versicolor\n86,6.0,3.4,4.5,1.6,versicolor\n87,6.7,3.1,4.7,1.5,versicolor\n88,6.3,2.3,4.4,1.3,versicolor\n89,5.6,3.0,4.1,1.3,versicolor\n90,5.5,2.5,4.0,1.3,versicolor\n91,5.5,2.6,4.4,1.2,versicolor\n92,6.1,3.0,4.6,1.4,versicolor\n93,5.8,2.6,4.0,1.2,versicolor\n94,5.0,2.3,3.3,1.0,versicolor\n95,5.6,2.7,4.2,1.3,versicolor\n96,5.7,3.0,4.2,1.2,versicolor\n97,5.7,2.9,4.2,1.3,versicolor\n98,6.2,2.9,4.3,1.3,versicolor\n99,5.1,2.5,3.0,1.1,versicolor\n100,5.7,2.8,4.1,1.3,versicolor\n101,6.3,3.3,6.0,2.5,virginica\n102,5.8,2.7,5.1,1.9,virginica\n103,7.1,3.0,5.9,2.1,virginica\n104,6.3,2.9,5.6,1.8,virginica\n105,6.5,3.0,5.8,2.2,virginica\n106,7.6,3.0,6.6,2.1,virginica\n107,4.9,2.5,4.5,1.7,virginica\n108,7.3,2.9,6.3,1.8,virginica\n109,6.7,2.5,5.8,1.8,virginica\n110,7.2,3.6,6.1,2.5,virginica\n111,6.5,3.2,5.1,2.0,virginica\n112,6.4,2.7,5.3,1.9,virginica\n113,6.8,3.0,5.5,2.1,virginica\n114,5.7,2.5,5.0,2.0,virginica\n115,5.8,2.8,5.1,2.4,virginica\n116,6.4,3.2,5.3,2.3,virginica\n117,6.5,3.0,5.5,1.8,virginica\n118,7.7,3.8,6.7,2.2,virginica\n119,7.7,2.6,6.9,2.3,virginica\n120,6.0,2.2,5.0,1.5,virginica\n121,6.9,3.2,5.7,2.3,virginica\n122,5.6,2.8,4.9,2.0,virginica\n123,7.7,2.8,6.7,2.0,virginica\n124,6.3,2.7,4.9,1.8,virginica\n125,6.7,3.3,5.7,2.1,virginica\n126,7.2,3.2,6.0,1.8,virginica\n127,6.2,2.8,4.8,1.8,virginica\n128,6.1,3.0,4.9,1.8,virginica\n129,6.4,2.8,5.6,2.1,virginica\n130,7.2,3.0,5.8,1.6,virginica\n131,7.4,2.8,6.1,1.9,virginica\n132,7.9,3.8,6.4,2.0,virginica\n133,6.4,2.8,5.6,2.2,virginica\n134,6.3,2.8,5.1,1.5,virginica\n135,6.1,2.6,5.6,1.4,virginica\n136,7.7,3.0,6.1,2.3,virginica\n137,6.3,3.4,5.6,2.4,virginica\n138,6.4,3.1,5.5,1.8,virginica\n139,6.0,3.0,4.8,1.8,virginica\n140,6.9,3.1,5.4,2.1,virginica\n141,6.7,3.1,5.6,2.4,virginica\n142,6.9,3.1,5.1,2.3,virginica\n143,5.8,2.7,5.1,1.9,virginica\n144,6.8,3.2,5.9,2.3,virginica\n145,6.7,3.3,5.7,2.5,virginica\n146,6.7,3.0,5.2,2.3,virginica\n147,6.3,2.5,5.0,1.9,virginica\n148,6.5,3.0,5.2,2.0,virginica\n149,6.2,3.4,5.4,2.3,virginica\n150,5.9,3.0,5.1,1.8,virginica\n","format":{"type":"csv"}}},{"mark":{"type":"circle","color":"green","size":200,"tooltip":true},"encoding":{"x":{"field":"sepal-width","type":"quantitative"},"y":{"field":"sepal-length","type":"quantitative"}},"data":{"values":"rownames,sepal-length,sepal-width,petal-length,petal-width,species\n1,5.1,3.5,1.4,0.2,setosa\n2,4.9,3.0,1.4,0.2,setosa\n3,4.7,3.2,1.3,0.2,setosa\n4,4.6,3.1,1.5,0.2,setosa\n5,5.0,3.6,1.4,0.2,setosa\n6,5.4,3.9,1.7,0.4,setosa\n7,4.6,3.4,1.4,0.3,setosa\n8,5.0,3.4,1.5,0.2,setosa\n9,4.4,2.9,1.4,0.2,setosa\n10,4.9,3.1,1.5,0.1,setosa\n11,5.4,3.7,1.5,0.2,setosa\n12,4.8,3.4,1.6,0.2,setosa\n13,4.8,3.0,1.4,0.1,setosa\n14,4.3,3.0,1.1,0.1,setosa\n15,5.8,4.0,1.2,0.2,setosa\n16,5.7,4.4,1.5,0.4,setosa\n17,5.4,3.9,1.3,0.4,setosa\n18,5.1,3.5,1.4,0.3,setosa\n19,5.7,3.8,1.7,0.3,setosa\n20,5.1,3.8,1.5,0.3,setosa\n21,5.4,3.4,1.7,0.2,setosa\n22,5.1,3.7,1.5,0.4,setosa\n23,4.6,3.6,1.0,0.2,setosa\n24,5.1,3.3,1.7,0.5,setosa\n25,4.8,3.4,1.9,0.2,setosa\n26,5.0,3.0,1.6,0.2,setosa\n27,5.0,3.4,1.6,0.4,setosa\n28,5.2,3.5,1.5,0.2,setosa\n29,5.2,3.4,1.4,0.2,setosa\n30,4.7,3.2,1.6,0.2,setosa\n31,4.8,3.1,1.6,0.2,setosa\n32,5.4,3.4,1.5,0.4,setosa\n33,5.2,4.1,1.5,0.1,setosa\n34,5.5,4.2,1.4,0.2,setosa\n35,4.9,3.1,1.5,0.2,setosa\n36,5.0,3.2,1.2,0.2,setosa\n37,5.5,3.5,1.3,0.2,setosa\n38,4.9,3.6,1.4,0.1,setosa\n39,4.4,3.0,1.3,0.2,setosa\n40,5.1,3.4,1.5,0.2,setosa\n41,5.0,3.5,1.3,0.3,setosa\n42,4.5,2.3,1.3,0.3,setosa\n43,4.4,3.2,1.3,0.2,setosa\n44,5.0,3.5,1.6,0.6,setosa\n45,5.1,3.8,1.9,0.4,setosa\n46,4.8,3.0,1.4,0.3,setosa\n47,5.1,3.8,1.6,0.2,setosa\n48,4.6,3.2,1.4,0.2,setosa\n49,5.3,3.7,1.5,0.2,setosa\n50,5.0,3.3,1.4,0.2,setosa\n51,7.0,3.2,4.7,1.4,versicolor\n52,6.4,3.2,4.5,1.5,versicolor\n53,6.9,3.1,4.9,1.5,versicolor\n54,5.5,2.3,4.0,1.3,versicolor\n55,6.5,2.8,4.6,1.5,versicolor\n56,5.7,2.8,4.5,1.3,versicolor\n57,6.3,3.3,4.7,1.6,versicolor\n58,4.9,2.4,3.3,1.0,versicolor\n59,6.6,2.9,4.6,1.3,versicolor\n60,5.2,2.7,3.9,1.4,versicolor\n61,5.0,2.0,3.5,1.0,versicolor\n62,5.9,3.0,4.2,1.5,versicolor\n63,6.0,2.2,4.0,1.0,versicolor\n64,6.1,2.9,4.7,1.4,versicolor\n65,5.6,2.9,3.6,1.3,versicolor\n66,6.7,3.1,4.4,1.4,versicolor\n67,5.6,3.0,4.5,1.5,versicolor\n68,5.8,2.7,4.1,1.0,versicolor\n69,6.2,2.2,4.5,1.5,versicolor\n70,5.6,2.5,3.9,1.1,versicolor\n71,5.9,3.2,4.8,1.8,versicolor\n72,6.1,2.8,4.0,1.3,versicolor\n73,6.3,2.5,4.9,1.5,versicolor\n74,6.1,2.8,4.7,1.2,versicolor\n75,6.4,2.9,4.3,1.3,versicolor\n76,6.6,3.0,4.4,1.4,versicolor\n77,6.8,2.8,4.8,1.4,versicolor\n78,6.7,3.0,5.0,1.7,versicolor\n79,6.0,2.9,4.5,1.5,versicolor\n80,5.7,2.6,3.5,1.0,versicolor\n81,5.5,2.4,3.8,1.1,versicolor\n82,5.5,2.4,3.7,1.0,versicolor\n83,5.8,2.7,3.9,1.2,versicolor\n84,6.0,2.7,5.1,1.6,versicolor\n85,5.4,3.0,4.5,1.5,versicolor\n86,6.0,3.4,4.5,1.6,versicolor\n87,6.7,3.1,4.7,1.5,versicolor\n88,6.3,2.3,4.4,1.3,versicolor\n89,5.6,3.0,4.1,1.3,versicolor\n90,5.5,2.5,4.0,1.3,versicolor\n91,5.5,2.6,4.4,1.2,versicolor\n92,6.1,3.0,4.6,1.4,versicolor\n93,5.8,2.6,4.0,1.2,versicolor\n94,5.0,2.3,3.3,1.0,versicolor\n95,5.6,2.7,4.2,1.3,versicolor\n96,5.7,3.0,4.2,1.2,versicolor\n97,5.7,2.9,4.2,1.3,versicolor\n98,6.2,2.9,4.3,1.3,versicolor\n99,5.1,2.5,3.0,1.1,versicolor\n100,5.7,2.8,4.1,1.3,versicolor\n101,6.3,3.3,6.0,2.5,virginica\n102,5.8,2.7,5.1,1.9,virginica\n103,7.1,3.0,5.9,2.1,virginica\n104,6.3,2.9,5.6,1.8,virginica\n105,6.5,3.0,5.8,2.2,virginica\n106,7.6,3.0,6.6,2.1,virginica\n107,4.9,2.5,4.5,1.7,virginica\n108,7.3,2.9,6.3,1.8,virginica\n109,6.7,2.5,5.8,1.8,virginica\n110,7.2,3.6,6.1,2.5,virginica\n111,6.5,3.2,5.1,2.0,virginica\n112,6.4,2.7,5.3,1.9,virginica\n113,6.8,3.0,5.5,2.1,virginica\n114,5.7,2.5,5.0,2.0,virginica\n115,5.8,2.8,5.1,2.4,virginica\n116,6.4,3.2,5.3,2.3,virginica\n117,6.5,3.0,5.5,1.8,virginica\n118,7.7,3.8,6.7,2.2,virginica\n119,7.7,2.6,6.9,2.3,virginica\n120,6.0,2.2,5.0,1.5,virginica\n121,6.9,3.2,5.7,2.3,virginica\n122,5.6,2.8,4.9,2.0,virginica\n123,7.7,2.8,6.7,2.0,virginica\n124,6.3,2.7,4.9,1.8,virginica\n125,6.7,3.3,5.7,2.1,virginica\n126,7.2,3.2,6.0,1.8,virginica\n127,6.2,2.8,4.8,1.8,virginica\n128,6.1,3.0,4.9,1.8,virginica\n129,6.4,2.8,5.6,2.1,virginica\n130,7.2,3.0,5.8,1.6,virginica\n131,7.4,2.8,6.1,1.9,virginica\n132,7.9,3.8,6.4,2.0,virginica\n133,6.4,2.8,5.6,2.2,virginica\n134,6.3,2.8,5.1,1.5,virginica\n135,6.1,2.6,5.6,1.4,virginica\n136,7.7,3.0,6.1,2.3,virginica\n137,6.3,3.4,5.6,2.4,virginica\n138,6.4,3.1,5.5,1.8,virginica\n139,6.0,3.0,4.8,1.8,virginica\n140,6.9,3.1,5.4,2.1,virginica\n141,6.7,3.1,5.6,2.4,virginica\n142,6.9,3.1,5.1,2.3,virginica\n143,5.8,2.7,5.1,1.9,virginica\n144,6.8,3.2,5.9,2.3,virginica\n145,6.7,3.3,5.7,2.5,virginica\n146,6.7,3.0,5.2,2.3,virginica\n147,6.3,2.5,5.0,1.9,virginica\n148,6.5,3.0,5.2,2.0,virginica\n149,6.2,3.4,5.4,2.3,virginica\n150,5.9,3.0,5.1,1.8,virginica\n","format":{"type":"csv"}}}],"height":300,"data":{"url":"hanamicloth.walkthrough_files\/0.csv","format":{"type":"csv"}}});</script></div>
</section>
<section id="updating-data" class="level2" data-number="2.9">
<h2 data-number="2.9" class="anchored" data-anchor-id="updating-data"><span class="header-section-number">2.9</span> Updating data</h2>
<p>Using <code>hanami/update-data</code>, we may process the dataset during the pipeline, affecting only the layers added further down the pipeline.</p>
<p>This functionality is inspired by <a href="https://github.com/mjskay/ggbuilder">ggbuilder</a> and <a href="https://github.com/scicloj/metamorph">metamorph</a>.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb27"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> iris</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>    (hanami/base #<span class="at">:hanami</span>{<span class="at">:title</span> <span class="st">"dummy"</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:mark-color</span> <span class="st">"green"</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:x</span> <span class="at">:sepal-width</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:y</span> <span class="at">:sepal-length</span>})</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>    (hanami/layer-line #<span class="at">:hanami</span>{<span class="at">:mark-size</span> <span class="dv">4</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>                                <span class="at">:mark-color</span> <span class="st">"brown"</span>})</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>    (hanami/update-data tc/random <span class="dv">5</span>)</span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>    (hanami/layer-point #<span class="at">:hanami</span>{<span class="at">:mark-size</span> <span class="dv">200</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div><script>vegaEmbed(document.currentScript.parentElement, {"encoding":{"x":{"field":"sepal-width","type":"quantitative"},"y":{"field":"sepal-length","type":"quantitative"}},"usermeta":{"embedOptions":{"renderer":"svg"}},"width":400,"background":"floralwhite","title":"dummy","layer":[{"mark":{"type":"line","color":"brown","size":4,"tooltip":true},"encoding":{"x":{"field":"sepal-width","type":"quantitative"},"y":{"field":"sepal-length","type":"quantitative"}},"data":{"values":"rownames,sepal-length,sepal-width,petal-length,petal-width,species\n1,5.1,3.5,1.4,0.2,setosa\n2,4.9,3.0,1.4,0.2,setosa\n3,4.7,3.2,1.3,0.2,setosa\n4,4.6,3.1,1.5,0.2,setosa\n5,5.0,3.6,1.4,0.2,setosa\n6,5.4,3.9,1.7,0.4,setosa\n7,4.6,3.4,1.4,0.3,setosa\n8,5.0,3.4,1.5,0.2,setosa\n9,4.4,2.9,1.4,0.2,setosa\n10,4.9,3.1,1.5,0.1,setosa\n11,5.4,3.7,1.5,0.2,setosa\n12,4.8,3.4,1.6,0.2,setosa\n13,4.8,3.0,1.4,0.1,setosa\n14,4.3,3.0,1.1,0.1,setosa\n15,5.8,4.0,1.2,0.2,setosa\n16,5.7,4.4,1.5,0.4,setosa\n17,5.4,3.9,1.3,0.4,setosa\n18,5.1,3.5,1.4,0.3,setosa\n19,5.7,3.8,1.7,0.3,setosa\n20,5.1,3.8,1.5,0.3,setosa\n21,5.4,3.4,1.7,0.2,setosa\n22,5.1,3.7,1.5,0.4,setosa\n23,4.6,3.6,1.0,0.2,setosa\n24,5.1,3.3,1.7,0.5,setosa\n25,4.8,3.4,1.9,0.2,setosa\n26,5.0,3.0,1.6,0.2,setosa\n27,5.0,3.4,1.6,0.4,setosa\n28,5.2,3.5,1.5,0.2,setosa\n29,5.2,3.4,1.4,0.2,setosa\n30,4.7,3.2,1.6,0.2,setosa\n31,4.8,3.1,1.6,0.2,setosa\n32,5.4,3.4,1.5,0.4,setosa\n33,5.2,4.1,1.5,0.1,setosa\n34,5.5,4.2,1.4,0.2,setosa\n35,4.9,3.1,1.5,0.2,setosa\n36,5.0,3.2,1.2,0.2,setosa\n37,5.5,3.5,1.3,0.2,setosa\n38,4.9,3.6,1.4,0.1,setosa\n39,4.4,3.0,1.3,0.2,setosa\n40,5.1,3.4,1.5,0.2,setosa\n41,5.0,3.5,1.3,0.3,setosa\n42,4.5,2.3,1.3,0.3,setosa\n43,4.4,3.2,1.3,0.2,setosa\n44,5.0,3.5,1.6,0.6,setosa\n45,5.1,3.8,1.9,0.4,setosa\n46,4.8,3.0,1.4,0.3,setosa\n47,5.1,3.8,1.6,0.2,setosa\n48,4.6,3.2,1.4,0.2,setosa\n49,5.3,3.7,1.5,0.2,setosa\n50,5.0,3.3,1.4,0.2,setosa\n51,7.0,3.2,4.7,1.4,versicolor\n52,6.4,3.2,4.5,1.5,versicolor\n53,6.9,3.1,4.9,1.5,versicolor\n54,5.5,2.3,4.0,1.3,versicolor\n55,6.5,2.8,4.6,1.5,versicolor\n56,5.7,2.8,4.5,1.3,versicolor\n57,6.3,3.3,4.7,1.6,versicolor\n58,4.9,2.4,3.3,1.0,versicolor\n59,6.6,2.9,4.6,1.3,versicolor\n60,5.2,2.7,3.9,1.4,versicolor\n61,5.0,2.0,3.5,1.0,versicolor\n62,5.9,3.0,4.2,1.5,versicolor\n63,6.0,2.2,4.0,1.0,versicolor\n64,6.1,2.9,4.7,1.4,versicolor\n65,5.6,2.9,3.6,1.3,versicolor\n66,6.7,3.1,4.4,1.4,versicolor\n67,5.6,3.0,4.5,1.5,versicolor\n68,5.8,2.7,4.1,1.0,versicolor\n69,6.2,2.2,4.5,1.5,versicolor\n70,5.6,2.5,3.9,1.1,versicolor\n71,5.9,3.2,4.8,1.8,versicolor\n72,6.1,2.8,4.0,1.3,versicolor\n73,6.3,2.5,4.9,1.5,versicolor\n74,6.1,2.8,4.7,1.2,versicolor\n75,6.4,2.9,4.3,1.3,versicolor\n76,6.6,3.0,4.4,1.4,versicolor\n77,6.8,2.8,4.8,1.4,versicolor\n78,6.7,3.0,5.0,1.7,versicolor\n79,6.0,2.9,4.5,1.5,versicolor\n80,5.7,2.6,3.5,1.0,versicolor\n81,5.5,2.4,3.8,1.1,versicolor\n82,5.5,2.4,3.7,1.0,versicolor\n83,5.8,2.7,3.9,1.2,versicolor\n84,6.0,2.7,5.1,1.6,versicolor\n85,5.4,3.0,4.5,1.5,versicolor\n86,6.0,3.4,4.5,1.6,versicolor\n87,6.7,3.1,4.7,1.5,versicolor\n88,6.3,2.3,4.4,1.3,versicolor\n89,5.6,3.0,4.1,1.3,versicolor\n90,5.5,2.5,4.0,1.3,versicolor\n91,5.5,2.6,4.4,1.2,versicolor\n92,6.1,3.0,4.6,1.4,versicolor\n93,5.8,2.6,4.0,1.2,versicolor\n94,5.0,2.3,3.3,1.0,versicolor\n95,5.6,2.7,4.2,1.3,versicolor\n96,5.7,3.0,4.2,1.2,versicolor\n97,5.7,2.9,4.2,1.3,versicolor\n98,6.2,2.9,4.3,1.3,versicolor\n99,5.1,2.5,3.0,1.1,versicolor\n100,5.7,2.8,4.1,1.3,versicolor\n101,6.3,3.3,6.0,2.5,virginica\n102,5.8,2.7,5.1,1.9,virginica\n103,7.1,3.0,5.9,2.1,virginica\n104,6.3,2.9,5.6,1.8,virginica\n105,6.5,3.0,5.8,2.2,virginica\n106,7.6,3.0,6.6,2.1,virginica\n107,4.9,2.5,4.5,1.7,virginica\n108,7.3,2.9,6.3,1.8,virginica\n109,6.7,2.5,5.8,1.8,virginica\n110,7.2,3.6,6.1,2.5,virginica\n111,6.5,3.2,5.1,2.0,virginica\n112,6.4,2.7,5.3,1.9,virginica\n113,6.8,3.0,5.5,2.1,virginica\n114,5.7,2.5,5.0,2.0,virginica\n115,5.8,2.8,5.1,2.4,virginica\n116,6.4,3.2,5.3,2.3,virginica\n117,6.5,3.0,5.5,1.8,virginica\n118,7.7,3.8,6.7,2.2,virginica\n119,7.7,2.6,6.9,2.3,virginica\n120,6.0,2.2,5.0,1.5,virginica\n121,6.9,3.2,5.7,2.3,virginica\n122,5.6,2.8,4.9,2.0,virginica\n123,7.7,2.8,6.7,2.0,virginica\n124,6.3,2.7,4.9,1.8,virginica\n125,6.7,3.3,5.7,2.1,virginica\n126,7.2,3.2,6.0,1.8,virginica\n127,6.2,2.8,4.8,1.8,virginica\n128,6.1,3.0,4.9,1.8,virginica\n129,6.4,2.8,5.6,2.1,virginica\n130,7.2,3.0,5.8,1.6,virginica\n131,7.4,2.8,6.1,1.9,virginica\n132,7.9,3.8,6.4,2.0,virginica\n133,6.4,2.8,5.6,2.2,virginica\n134,6.3,2.8,5.1,1.5,virginica\n135,6.1,2.6,5.6,1.4,virginica\n136,7.7,3.0,6.1,2.3,virginica\n137,6.3,3.4,5.6,2.4,virginica\n138,6.4,3.1,5.5,1.8,virginica\n139,6.0,3.0,4.8,1.8,virginica\n140,6.9,3.1,5.4,2.1,virginica\n141,6.7,3.1,5.6,2.4,virginica\n142,6.9,3.1,5.1,2.3,virginica\n143,5.8,2.7,5.1,1.9,virginica\n144,6.8,3.2,5.9,2.3,virginica\n145,6.7,3.3,5.7,2.5,virginica\n146,6.7,3.0,5.2,2.3,virginica\n147,6.3,2.5,5.0,1.9,virginica\n148,6.5,3.0,5.2,2.0,virginica\n149,6.2,3.4,5.4,2.3,virginica\n150,5.9,3.0,5.1,1.8,virginica\n","format":{"type":"csv"}}},{"mark":{"type":"circle","color":"green","size":200,"tooltip":true},"encoding":{"x":{"field":"sepal-width","type":"quantitative"},"y":{"field":"sepal-length","type":"quantitative"}},"data":{"values":"rownames,sepal-length,sepal-width,petal-length,petal-width,species\n34,5.5,4.2,1.4,0.2,setosa\n12,4.8,3.4,1.6,0.2,setosa\n3,4.7,3.2,1.3,0.2,setosa\n53,6.9,3.1,4.9,1.5,versicolor\n120,6.0,2.2,5.0,1.5,virginica\n","format":{"type":"csv"}}}],"height":300,"data":{"url":"hanamicloth.walkthrough_files\/2.csv","format":{"type":"csv"}}});</script></div>
<p>You see, we have lots of data for the lines, but only five random points.</p>
</section>
<section id="processing-raw-vega-lite" class="level2" data-number="2.10">
<h2 data-number="2.10" class="anchored" data-anchor-id="processing-raw-vega-lite"><span class="header-section-number">2.10</span> Processing raw vega-lite</h2>
<p>During a pipeline, we may call <code>hanami/plot</code> to apply the Hanami transform and realize the <code>Vega-Lite</code> spec.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb28"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> iris</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>    (hanami/base #<span class="at">:hanami</span>{<span class="at">:title</span> <span class="st">"dummy"</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:mark-color</span> <span class="st">"green"</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:x</span> <span class="at">:sepal-width</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:y</span> <span class="at">:sepal-length</span>})</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>    (hanami/layer-line #<span class="at">:hanami</span>{<span class="at">:mark-size</span> <span class="dv">4</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>                                <span class="at">:mark-color</span> <span class="st">"brown"</span>})</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>    (hanami/update-data tc/random <span class="dv">5</span>)</span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>    (hanami/layer-point #<span class="at">:hanami</span>{<span class="at">:mark-size</span> <span class="dv">200</span>})</span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>    hanami/plot</span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>    kind/pprint)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb29"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>{<span class="at">:encoding</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a> {<span class="at">:x</span> {<span class="at">:field</span> <span class="at">:sepal-width</span>, <span class="at">:type</span> <span class="at">:quantitative</span>},</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">:y</span> {<span class="at">:field</span> <span class="at">:sepal-length</span>, <span class="at">:type</span> <span class="at">:quantitative</span>}},</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a> <span class="at">:usermeta</span> {<span class="at">:embedOptions</span> {<span class="at">:renderer</span> <span class="at">:svg</span>}},</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a> <span class="at">:width</span> <span class="dv">400</span>,</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a> <span class="at">:background</span> <span class="st">"floralwhite"</span>,</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a> <span class="at">:title</span> <span class="st">"dummy"</span>,</span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a> <span class="at">:layer</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a> [{<span class="at">:mark</span> {<span class="at">:type</span> <span class="st">"line"</span>, <span class="at">:color</span> <span class="st">"brown"</span>, <span class="at">:size</span> <span class="dv">4</span>, <span class="at">:tooltip</span> <span class="va">true</span>},</span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>   <span class="at">:encoding</span></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>   {<span class="at">:x</span> {<span class="at">:field</span> <span class="at">:sepal-width</span>, <span class="at">:type</span> <span class="at">:quantitative</span>},</span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">:y</span> {<span class="at">:field</span> <span class="at">:sepal-length</span>, <span class="at">:type</span> <span class="at">:quantitative</span>}},</span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>   <span class="at">:data</span></span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>   {<span class="at">:values</span></span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">"rownames,sepal-length,sepal-width,petal-length,petal-width,species</span><span class="sc">\n</span><span class="st">1,5.1,3.5,1.4,0.2,setosa</span><span class="sc">\n</span><span class="st">2,4.9,3.0,1.4,0.2,setosa</span><span class="sc">\n</span><span class="st">3,4.7,3.2,1.3,0.2,setosa</span><span class="sc">\n</span><span class="st">4,4.6,3.1,1.5,0.2,setosa</span><span class="sc">\n</span><span class="st">5,5.0,3.6,1.4,0.2,setosa</span><span class="sc">\n</span><span class="st">6,5.4,3.9,1.7,0.4,setosa</span><span class="sc">\n</span><span class="st">7,4.6,3.4,1.4,0.3,setosa</span><span class="sc">\n</span><span class="st">8,5.0,3.4,1.5,0.2,setosa</span><span class="sc">\n</span><span class="st">9,4.4,2.9,1.4,0.2,setosa</span><span class="sc">\n</span><span class="st">10,4.9,3.1,1.5,0.1,setosa</span><span class="sc">\n</span><span class="st">11,5.4,3.7,1.5,0.2,setosa</span><span class="sc">\n</span><span class="st">12,4.8,3.4,1.6,0.2,setosa</span><span class="sc">\n</span><span class="st">13,4.8,3.0,1.4,0.1,setosa</span><span class="sc">\n</span><span class="st">14,4.3,3.0,1.1,0.1,setosa</span><span class="sc">\n</span><span class="st">15,5.8,4.0,1.2,0.2,setosa</span><span class="sc">\n</span><span class="st">16,5.7,4.4,1.5,0.4,setosa</span><span class="sc">\n</span><span class="st">17,5.4,3.9,1.3,0.4,setosa</span><span class="sc">\n</span><span class="st">18,5.1,3.5,1.4,0.3,setosa</span><span class="sc">\n</span><span class="st">19,5.7,3.8,1.7,0.3,setosa</span><span class="sc">\n</span><span class="st">20,5.1,3.8,1.5,0.3,setosa</span><span class="sc">\n</span><span class="st">21,5.4,3.4,1.7,0.2,setosa</span><span class="sc">\n</span><span class="st">22,5.1,3.7,1.5,0.4,setosa</span><span class="sc">\n</span><span class="st">23,4.6,3.6,1.0,0.2,setosa</span><span class="sc">\n</span><span class="st">24,5.1,3.3,1.7,0.5,setosa</span><span class="sc">\n</span><span class="st">25,4.8,3.4,1.9,0.2,setosa</span><span class="sc">\n</span><span class="st">26,5.0,3.0,1.6,0.2,setosa</span><span class="sc">\n</span><span class="st">27,5.0,3.4,1.6,0.4,setosa</span><span class="sc">\n</span><span class="st">28,5.2,3.5,1.5,0.2,setosa</span><span class="sc">\n</span><span class="st">29,5.2,3.4,1.4,0.2,setosa</span><span class="sc">\n</span><span class="st">30,4.7,3.2,1.6,0.2,setosa</span><span class="sc">\n</span><span class="st">31,4.8,3.1,1.6,0.2,setosa</span><span class="sc">\n</span><span class="st">32,5.4,3.4,1.5,0.4,setosa</span><span class="sc">\n</span><span class="st">33,5.2,4.1,1.5,0.1,setosa</span><span class="sc">\n</span><span class="st">34,5.5,4.2,1.4,0.2,setosa</span><span class="sc">\n</span><span class="st">35,4.9,3.1,1.5,0.2,setosa</span><span class="sc">\n</span><span class="st">36,5.0,3.2,1.2,0.2,setosa</span><span class="sc">\n</span><span class="st">37,5.5,3.5,1.3,0.2,setosa</span><span class="sc">\n</span><span class="st">38,4.9,3.6,1.4,0.1,setosa</span><span class="sc">\n</span><span class="st">39,4.4,3.0,1.3,0.2,setosa</span><span class="sc">\n</span><span class="st">40,5.1,3.4,1.5,0.2,setosa</span><span class="sc">\n</span><span class="st">41,5.0,3.5,1.3,0.3,setosa</span><span class="sc">\n</span><span class="st">42,4.5,2.3,1.3,0.3,setosa</span><span class="sc">\n</span><span class="st">43,4.4,3.2,1.3,0.2,setosa</span><span class="sc">\n</span><span class="st">44,5.0,3.5,1.6,0.6,setosa</span><span class="sc">\n</span><span class="st">45,5.1,3.8,1.9,0.4,setosa</span><span class="sc">\n</span><span class="st">46,4.8,3.0,1.4,0.3,setosa</span><span class="sc">\n</span><span class="st">47,5.1,3.8,1.6,0.2,setosa</span><span class="sc">\n</span><span class="st">48,4.6,3.2,1.4,0.2,setosa</span><span class="sc">\n</span><span class="st">49,5.3,3.7,1.5,0.2,setosa</span><span class="sc">\n</span><span class="st">50,5.0,3.3,1.4,0.2,setosa</span><span class="sc">\n</span><span class="st">51,7.0,3.2,4.7,1.4,versicolor</span><span class="sc">\n</span><span class="st">52,6.4,3.2,4.5,1.5,versicolor</span><span class="sc">\n</span><span class="st">53,6.9,3.1,4.9,1.5,versicolor</span><span class="sc">\n</span><span class="st">54,5.5,2.3,4.0,1.3,versicolor</span><span class="sc">\n</span><span class="st">55,6.5,2.8,4.6,1.5,versicolor</span><span class="sc">\n</span><span class="st">56,5.7,2.8,4.5,1.3,versicolor</span><span class="sc">\n</span><span class="st">57,6.3,3.3,4.7,1.6,versicolor</span><span class="sc">\n</span><span class="st">58,4.9,2.4,3.3,1.0,versicolor</span><span class="sc">\n</span><span class="st">59,6.6,2.9,4.6,1.3,versicolor</span><span class="sc">\n</span><span class="st">60,5.2,2.7,3.9,1.4,versicolor</span><span class="sc">\n</span><span class="st">61,5.0,2.0,3.5,1.0,versicolor</span><span class="sc">\n</span><span class="st">62,5.9,3.0,4.2,1.5,versicolor</span><span class="sc">\n</span><span class="st">63,6.0,2.2,4.0,1.0,versicolor</span><span class="sc">\n</span><span class="st">64,6.1,2.9,4.7,1.4,versicolor</span><span class="sc">\n</span><span class="st">65,5.6,2.9,3.6,1.3,versicolor</span><span class="sc">\n</span><span class="st">66,6.7,3.1,4.4,1.4,versicolor</span><span class="sc">\n</span><span class="st">67,5.6,3.0,4.5,1.5,versicolor</span><span class="sc">\n</span><span class="st">68,5.8,2.7,4.1,1.0,versicolor</span><span class="sc">\n</span><span class="st">69,6.2,2.2,4.5,1.5,versicolor</span><span class="sc">\n</span><span class="st">70,5.6,2.5,3.9,1.1,versicolor</span><span class="sc">\n</span><span class="st">71,5.9,3.2,4.8,1.8,versicolor</span><span class="sc">\n</span><span class="st">72,6.1,2.8,4.0,1.3,versicolor</span><span class="sc">\n</span><span class="st">73,6.3,2.5,4.9,1.5,versicolor</span><span class="sc">\n</span><span class="st">74,6.1,2.8,4.7,1.2,versicolor</span><span class="sc">\n</span><span class="st">75,6.4,2.9,4.3,1.3,versicolor</span><span class="sc">\n</span><span class="st">76,6.6,3.0,4.4,1.4,versicolor</span><span class="sc">\n</span><span class="st">77,6.8,2.8,4.8,1.4,versicolor</span><span class="sc">\n</span><span class="st">78,6.7,3.0,5.0,1.7,versicolor</span><span class="sc">\n</span><span class="st">79,6.0,2.9,4.5,1.5,versicolor</span><span class="sc">\n</span><span class="st">80,5.7,2.6,3.5,1.0,versicolor</span><span class="sc">\n</span><span class="st">81,5.5,2.4,3.8,1.1,versicolor</span><span class="sc">\n</span><span class="st">82,5.5,2.4,3.7,1.0,versicolor</span><span class="sc">\n</span><span class="st">83,5.8,2.7,3.9,1.2,versicolor</span><span class="sc">\n</span><span class="st">84,6.0,2.7,5.1,1.6,versicolor</span><span class="sc">\n</span><span class="st">85,5.4,3.0,4.5,1.5,versicolor</span><span class="sc">\n</span><span class="st">86,6.0,3.4,4.5,1.6,versicolor</span><span class="sc">\n</span><span class="st">87,6.7,3.1,4.7,1.5,versicolor</span><span class="sc">\n</span><span class="st">88,6.3,2.3,4.4,1.3,versicolor</span><span class="sc">\n</span><span class="st">89,5.6,3.0,4.1,1.3,versicolor</span><span class="sc">\n</span><span class="st">90,5.5,2.5,4.0,1.3,versicolor</span><span class="sc">\n</span><span class="st">91,5.5,2.6,4.4,1.2,versicolor</span><span class="sc">\n</span><span class="st">92,6.1,3.0,4.6,1.4,versicolor</span><span class="sc">\n</span><span class="st">93,5.8,2.6,4.0,1.2,versicolor</span><span class="sc">\n</span><span class="st">94,5.0,2.3,3.3,1.0,versicolor</span><span class="sc">\n</span><span class="st">95,5.6,2.7,4.2,1.3,versicolor</span><span class="sc">\n</span><span class="st">96,5.7,3.0,4.2,1.2,versicolor</span><span class="sc">\n</span><span class="st">97,5.7,2.9,4.2,1.3,versicolor</span><span class="sc">\n</span><span class="st">98,6.2,2.9,4.3,1.3,versicolor</span><span class="sc">\n</span><span class="st">99,5.1,2.5,3.0,1.1,versicolor</span><span class="sc">\n</span><span class="st">100,5.7,2.8,4.1,1.3,versicolor</span><span class="sc">\n</span><span class="st">101,6.3,3.3,6.0,2.5,virginica</span><span class="sc">\n</span><span class="st">102,5.8,2.7,5.1,1.9,virginica</span><span class="sc">\n</span><span class="st">103,7.1,3.0,5.9,2.1,virginica</span><span class="sc">\n</span><span class="st">104,6.3,2.9,5.6,1.8,virginica</span><span class="sc">\n</span><span class="st">105,6.5,3.0,5.8,2.2,virginica</span><span class="sc">\n</span><span class="st">106,7.6,3.0,6.6,2.1,virginica</span><span class="sc">\n</span><span class="st">107,4.9,2.5,4.5,1.7,virginica</span><span class="sc">\n</span><span class="st">108,7.3,2.9,6.3,1.8,virginica</span><span class="sc">\n</span><span class="st">109,6.7,2.5,5.8,1.8,virginica</span><span class="sc">\n</span><span class="st">110,7.2,3.6,6.1,2.5,virginica</span><span class="sc">\n</span><span class="st">111,6.5,3.2,5.1,2.0,virginica</span><span class="sc">\n</span><span class="st">112,6.4,2.7,5.3,1.9,virginica</span><span class="sc">\n</span><span class="st">113,6.8,3.0,5.5,2.1,virginica</span><span class="sc">\n</span><span class="st">114,5.7,2.5,5.0,2.0,virginica</span><span class="sc">\n</span><span class="st">115,5.8,2.8,5.1,2.4,virginica</span><span class="sc">\n</span><span class="st">116,6.4,3.2,5.3,2.3,virginica</span><span class="sc">\n</span><span class="st">117,6.5,3.0,5.5,1.8,virginica</span><span class="sc">\n</span><span class="st">118,7.7,3.8,6.7,2.2,virginica</span><span class="sc">\n</span><span class="st">119,7.7,2.6,6.9,2.3,virginica</span><span class="sc">\n</span><span class="st">120,6.0,2.2,5.0,1.5,virginica</span><span class="sc">\n</span><span class="st">121,6.9,3.2,5.7,2.3,virginica</span><span class="sc">\n</span><span class="st">122,5.6,2.8,4.9,2.0,virginica</span><span class="sc">\n</span><span class="st">123,7.7,2.8,6.7,2.0,virginica</span><span class="sc">\n</span><span class="st">124,6.3,2.7,4.9,1.8,virginica</span><span class="sc">\n</span><span class="st">125,6.7,3.3,5.7,2.1,virginica</span><span class="sc">\n</span><span class="st">126,7.2,3.2,6.0,1.8,virginica</span><span class="sc">\n</span><span class="st">127,6.2,2.8,4.8,1.8,virginica</span><span class="sc">\n</span><span class="st">128,6.1,3.0,4.9,1.8,virginica</span><span class="sc">\n</span><span class="st">129,6.4,2.8,5.6,2.1,virginica</span><span class="sc">\n</span><span class="st">130,7.2,3.0,5.8,1.6,virginica</span><span class="sc">\n</span><span class="st">131,7.4,2.8,6.1,1.9,virginica</span><span class="sc">\n</span><span class="st">132,7.9,3.8,6.4,2.0,virginica</span><span class="sc">\n</span><span class="st">133,6.4,2.8,5.6,2.2,virginica</span><span class="sc">\n</span><span class="st">134,6.3,2.8,5.1,1.5,virginica</span><span class="sc">\n</span><span class="st">135,6.1,2.6,5.6,1.4,virginica</span><span class="sc">\n</span><span class="st">136,7.7,3.0,6.1,2.3,virginica</span><span class="sc">\n</span><span class="st">137,6.3,3.4,5.6,2.4,virginica</span><span class="sc">\n</span><span class="st">138,6.4,3.1,5.5,1.8,virginica</span><span class="sc">\n</span><span class="st">139,6.0,3.0,4.8,1.8,virginica</span><span class="sc">\n</span><span class="st">140,6.9,3.1,5.4,2.1,virginica</span><span class="sc">\n</span><span class="st">141,6.7,3.1,5.6,2.4,virginica</span><span class="sc">\n</span><span class="st">142,6.9,3.1,5.1,2.3,virginica</span><span class="sc">\n</span><span class="st">143,5.8,2.7,5.1,1.9,virginica</span><span class="sc">\n</span><span class="st">144,6.8,3.2,5.9,2.3,virginica</span><span class="sc">\n</span><span class="st">145,6.7,3.3,5.7,2.5,virginica</span><span class="sc">\n</span><span class="st">146,6.7,3.0,5.2,2.3,virginica</span><span class="sc">\n</span><span class="st">147,6.3,2.5,5.0,1.9,virginica</span><span class="sc">\n</span><span class="st">148,6.5,3.0,5.2,2.0,virginica</span><span class="sc">\n</span><span class="st">149,6.2,3.4,5.4,2.3,virginica</span><span class="sc">\n</span><span class="st">150,5.9,3.0,5.1,1.8,virginica</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">:format</span> {<span class="at">:type</span> <span class="st">"csv"</span>}}}</span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>  {<span class="at">:mark</span> {<span class="at">:type</span> <span class="st">"circle"</span>, <span class="at">:color</span> <span class="st">"green"</span>, <span class="at">:size</span> <span class="dv">200</span>, <span class="at">:tooltip</span> <span class="va">true</span>},</span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a>   <span class="at">:encoding</span></span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a>   {<span class="at">:x</span> {<span class="at">:field</span> <span class="at">:sepal-width</span>, <span class="at">:type</span> <span class="at">:quantitative</span>},</span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">:y</span> {<span class="at">:field</span> <span class="at">:sepal-length</span>, <span class="at">:type</span> <span class="at">:quantitative</span>}},</span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a>   <span class="at">:data</span></span>
<span id="cb29-22"><a href="#cb29-22" aria-hidden="true" tabindex="-1"></a>   {<span class="at">:values</span></span>
<span id="cb29-23"><a href="#cb29-23" aria-hidden="true" tabindex="-1"></a>    <span class="st">"rownames,sepal-length,sepal-width,petal-length,petal-width,species</span><span class="sc">\n</span><span class="st">65,5.6,2.9,3.6,1.3,versicolor</span><span class="sc">\n</span><span class="st">46,4.8,3.0,1.4,0.3,setosa</span><span class="sc">\n</span><span class="st">79,6.0,2.9,4.5,1.5,versicolor</span><span class="sc">\n</span><span class="st">42,4.5,2.3,1.3,0.3,setosa</span><span class="sc">\n</span><span class="st">115,5.8,2.8,5.1,2.4,virginica</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb29-24"><a href="#cb29-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">:format</span> {<span class="at">:type</span> <span class="st">"csv"</span>}}}],</span>
<span id="cb29-25"><a href="#cb29-25" aria-hidden="true" tabindex="-1"></a> <span class="at">:height</span> <span class="dv">300</span>,</span>
<span id="cb29-26"><a href="#cb29-26" aria-hidden="true" tabindex="-1"></a> <span class="at">:data</span></span>
<span id="cb29-27"><a href="#cb29-27" aria-hidden="true" tabindex="-1"></a> {<span class="at">:values</span></span>
<span id="cb29-28"><a href="#cb29-28" aria-hidden="true" tabindex="-1"></a>  <span class="st">"rownames,sepal-length,sepal-width,petal-length,petal-width,species</span><span class="sc">\n</span><span class="st">65,5.6,2.9,3.6,1.3,versicolor</span><span class="sc">\n</span><span class="st">46,4.8,3.0,1.4,0.3,setosa</span><span class="sc">\n</span><span class="st">79,6.0,2.9,4.5,1.5,versicolor</span><span class="sc">\n</span><span class="st">42,4.5,2.3,1.3,0.3,setosa</span><span class="sc">\n</span><span class="st">115,5.8,2.8,5.1,2.4,virginica</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb29-29"><a href="#cb29-29" aria-hidden="true" tabindex="-1"></a>  <span class="at">:format</span> {<span class="at">:type</span> <span class="st">"csv"</span>}}}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>While this in itself does not affect the display of the plot, it allows us to keep editing it as a Vega-Lite spec. For example, let us change the backgound colour this way:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb30"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> iris</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>    (hanami/base #<span class="at">:hanami</span>{<span class="at">:title</span> <span class="st">"dummy"</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:mark-color</span> <span class="st">"green"</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:x</span> <span class="at">:sepal-width</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:y</span> <span class="at">:sepal-length</span>})</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>    (hanami/layer-line #<span class="at">:hanami</span>{<span class="at">:mark-size</span> <span class="dv">4</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>                                <span class="at">:mark-color</span> <span class="st">"brown"</span>})</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>    (hanami/update-data tc/random <span class="dv">5</span>)</span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>    (hanami/layer-point #<span class="at">:hanami</span>{<span class="at">:mark-size</span> <span class="dv">200</span>})</span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>    hanami/plot</span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">assoc</span> <span class="at">:background</span> <span class="st">"lightgrey"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div><script>vegaEmbed(document.currentScript.parentElement, {"encoding":{"x":{"field":"sepal-width","type":"quantitative"},"y":{"field":"sepal-length","type":"quantitative"}},"usermeta":{"embedOptions":{"renderer":"svg"}},"width":400,"background":"lightgrey","title":"dummy","layer":[{"mark":{"type":"line","color":"brown","size":4,"tooltip":true},"encoding":{"x":{"field":"sepal-width","type":"quantitative"},"y":{"field":"sepal-length","type":"quantitative"}},"data":{"values":"rownames,sepal-length,sepal-width,petal-length,petal-width,species\n1,5.1,3.5,1.4,0.2,setosa\n2,4.9,3.0,1.4,0.2,setosa\n3,4.7,3.2,1.3,0.2,setosa\n4,4.6,3.1,1.5,0.2,setosa\n5,5.0,3.6,1.4,0.2,setosa\n6,5.4,3.9,1.7,0.4,setosa\n7,4.6,3.4,1.4,0.3,setosa\n8,5.0,3.4,1.5,0.2,setosa\n9,4.4,2.9,1.4,0.2,setosa\n10,4.9,3.1,1.5,0.1,setosa\n11,5.4,3.7,1.5,0.2,setosa\n12,4.8,3.4,1.6,0.2,setosa\n13,4.8,3.0,1.4,0.1,setosa\n14,4.3,3.0,1.1,0.1,setosa\n15,5.8,4.0,1.2,0.2,setosa\n16,5.7,4.4,1.5,0.4,setosa\n17,5.4,3.9,1.3,0.4,setosa\n18,5.1,3.5,1.4,0.3,setosa\n19,5.7,3.8,1.7,0.3,setosa\n20,5.1,3.8,1.5,0.3,setosa\n21,5.4,3.4,1.7,0.2,setosa\n22,5.1,3.7,1.5,0.4,setosa\n23,4.6,3.6,1.0,0.2,setosa\n24,5.1,3.3,1.7,0.5,setosa\n25,4.8,3.4,1.9,0.2,setosa\n26,5.0,3.0,1.6,0.2,setosa\n27,5.0,3.4,1.6,0.4,setosa\n28,5.2,3.5,1.5,0.2,setosa\n29,5.2,3.4,1.4,0.2,setosa\n30,4.7,3.2,1.6,0.2,setosa\n31,4.8,3.1,1.6,0.2,setosa\n32,5.4,3.4,1.5,0.4,setosa\n33,5.2,4.1,1.5,0.1,setosa\n34,5.5,4.2,1.4,0.2,setosa\n35,4.9,3.1,1.5,0.2,setosa\n36,5.0,3.2,1.2,0.2,setosa\n37,5.5,3.5,1.3,0.2,setosa\n38,4.9,3.6,1.4,0.1,setosa\n39,4.4,3.0,1.3,0.2,setosa\n40,5.1,3.4,1.5,0.2,setosa\n41,5.0,3.5,1.3,0.3,setosa\n42,4.5,2.3,1.3,0.3,setosa\n43,4.4,3.2,1.3,0.2,setosa\n44,5.0,3.5,1.6,0.6,setosa\n45,5.1,3.8,1.9,0.4,setosa\n46,4.8,3.0,1.4,0.3,setosa\n47,5.1,3.8,1.6,0.2,setosa\n48,4.6,3.2,1.4,0.2,setosa\n49,5.3,3.7,1.5,0.2,setosa\n50,5.0,3.3,1.4,0.2,setosa\n51,7.0,3.2,4.7,1.4,versicolor\n52,6.4,3.2,4.5,1.5,versicolor\n53,6.9,3.1,4.9,1.5,versicolor\n54,5.5,2.3,4.0,1.3,versicolor\n55,6.5,2.8,4.6,1.5,versicolor\n56,5.7,2.8,4.5,1.3,versicolor\n57,6.3,3.3,4.7,1.6,versicolor\n58,4.9,2.4,3.3,1.0,versicolor\n59,6.6,2.9,4.6,1.3,versicolor\n60,5.2,2.7,3.9,1.4,versicolor\n61,5.0,2.0,3.5,1.0,versicolor\n62,5.9,3.0,4.2,1.5,versicolor\n63,6.0,2.2,4.0,1.0,versicolor\n64,6.1,2.9,4.7,1.4,versicolor\n65,5.6,2.9,3.6,1.3,versicolor\n66,6.7,3.1,4.4,1.4,versicolor\n67,5.6,3.0,4.5,1.5,versicolor\n68,5.8,2.7,4.1,1.0,versicolor\n69,6.2,2.2,4.5,1.5,versicolor\n70,5.6,2.5,3.9,1.1,versicolor\n71,5.9,3.2,4.8,1.8,versicolor\n72,6.1,2.8,4.0,1.3,versicolor\n73,6.3,2.5,4.9,1.5,versicolor\n74,6.1,2.8,4.7,1.2,versicolor\n75,6.4,2.9,4.3,1.3,versicolor\n76,6.6,3.0,4.4,1.4,versicolor\n77,6.8,2.8,4.8,1.4,versicolor\n78,6.7,3.0,5.0,1.7,versicolor\n79,6.0,2.9,4.5,1.5,versicolor\n80,5.7,2.6,3.5,1.0,versicolor\n81,5.5,2.4,3.8,1.1,versicolor\n82,5.5,2.4,3.7,1.0,versicolor\n83,5.8,2.7,3.9,1.2,versicolor\n84,6.0,2.7,5.1,1.6,versicolor\n85,5.4,3.0,4.5,1.5,versicolor\n86,6.0,3.4,4.5,1.6,versicolor\n87,6.7,3.1,4.7,1.5,versicolor\n88,6.3,2.3,4.4,1.3,versicolor\n89,5.6,3.0,4.1,1.3,versicolor\n90,5.5,2.5,4.0,1.3,versicolor\n91,5.5,2.6,4.4,1.2,versicolor\n92,6.1,3.0,4.6,1.4,versicolor\n93,5.8,2.6,4.0,1.2,versicolor\n94,5.0,2.3,3.3,1.0,versicolor\n95,5.6,2.7,4.2,1.3,versicolor\n96,5.7,3.0,4.2,1.2,versicolor\n97,5.7,2.9,4.2,1.3,versicolor\n98,6.2,2.9,4.3,1.3,versicolor\n99,5.1,2.5,3.0,1.1,versicolor\n100,5.7,2.8,4.1,1.3,versicolor\n101,6.3,3.3,6.0,2.5,virginica\n102,5.8,2.7,5.1,1.9,virginica\n103,7.1,3.0,5.9,2.1,virginica\n104,6.3,2.9,5.6,1.8,virginica\n105,6.5,3.0,5.8,2.2,virginica\n106,7.6,3.0,6.6,2.1,virginica\n107,4.9,2.5,4.5,1.7,virginica\n108,7.3,2.9,6.3,1.8,virginica\n109,6.7,2.5,5.8,1.8,virginica\n110,7.2,3.6,6.1,2.5,virginica\n111,6.5,3.2,5.1,2.0,virginica\n112,6.4,2.7,5.3,1.9,virginica\n113,6.8,3.0,5.5,2.1,virginica\n114,5.7,2.5,5.0,2.0,virginica\n115,5.8,2.8,5.1,2.4,virginica\n116,6.4,3.2,5.3,2.3,virginica\n117,6.5,3.0,5.5,1.8,virginica\n118,7.7,3.8,6.7,2.2,virginica\n119,7.7,2.6,6.9,2.3,virginica\n120,6.0,2.2,5.0,1.5,virginica\n121,6.9,3.2,5.7,2.3,virginica\n122,5.6,2.8,4.9,2.0,virginica\n123,7.7,2.8,6.7,2.0,virginica\n124,6.3,2.7,4.9,1.8,virginica\n125,6.7,3.3,5.7,2.1,virginica\n126,7.2,3.2,6.0,1.8,virginica\n127,6.2,2.8,4.8,1.8,virginica\n128,6.1,3.0,4.9,1.8,virginica\n129,6.4,2.8,5.6,2.1,virginica\n130,7.2,3.0,5.8,1.6,virginica\n131,7.4,2.8,6.1,1.9,virginica\n132,7.9,3.8,6.4,2.0,virginica\n133,6.4,2.8,5.6,2.2,virginica\n134,6.3,2.8,5.1,1.5,virginica\n135,6.1,2.6,5.6,1.4,virginica\n136,7.7,3.0,6.1,2.3,virginica\n137,6.3,3.4,5.6,2.4,virginica\n138,6.4,3.1,5.5,1.8,virginica\n139,6.0,3.0,4.8,1.8,virginica\n140,6.9,3.1,5.4,2.1,virginica\n141,6.7,3.1,5.6,2.4,virginica\n142,6.9,3.1,5.1,2.3,virginica\n143,5.8,2.7,5.1,1.9,virginica\n144,6.8,3.2,5.9,2.3,virginica\n145,6.7,3.3,5.7,2.5,virginica\n146,6.7,3.0,5.2,2.3,virginica\n147,6.3,2.5,5.0,1.9,virginica\n148,6.5,3.0,5.2,2.0,virginica\n149,6.2,3.4,5.4,2.3,virginica\n150,5.9,3.0,5.1,1.8,virginica\n","format":{"type":"csv"}}},{"mark":{"type":"circle","color":"green","size":200,"tooltip":true},"encoding":{"x":{"field":"sepal-width","type":"quantitative"},"y":{"field":"sepal-length","type":"quantitative"}},"data":{"values":"rownames,sepal-length,sepal-width,petal-length,petal-width,species\n58,4.9,2.4,3.3,1.0,versicolor\n37,5.5,3.5,1.3,0.2,setosa\n142,6.9,3.1,5.1,2.3,virginica\n114,5.7,2.5,5.0,2.0,virginica\n20,5.1,3.8,1.5,0.3,setosa\n","format":{"type":"csv"}}}],"height":300,"data":{"url":"hanamicloth.walkthrough_files\/3.csv","format":{"type":"csv"}}});</script></div>
</section>
<section id="smoothing" class="level2" data-number="2.11">
<h2 data-number="2.11" class="anchored" data-anchor-id="smoothing"><span class="header-section-number">2.11</span> Smoothing</h2>
<p><code>hanami/layer-smooth</code> is a layer that applies some statistical processing to the dataset to model it as a smooth shape. It is inspired by ggplotâ€™s <a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></p>
<p>At the moment, it can only be used to model <code>:y</code> by linear regression. Soon we will add more ways of modelling the data.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb31"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> iris</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>    (hanami/base #<span class="at">:hanami</span>{<span class="at">:title</span> <span class="st">"dummy"</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:mark-color</span> <span class="st">"green"</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:x</span> <span class="at">:sepal-width</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:y</span> <span class="at">:sepal-length</span>})</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>    hanami/layer-point</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>    (hanami/layer-smooth #<span class="at">:hanami</span>{<span class="at">:mark-color</span> <span class="st">"orange"</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div><script>vegaEmbed(document.currentScript.parentElement, {"encoding":{"x":{"field":"sepal-width","type":"quantitative"},"y":{"field":"sepal-length","type":"quantitative"}},"usermeta":{"embedOptions":{"renderer":"svg"}},"width":400,"background":"floralwhite","title":"dummy","layer":[{"mark":{"type":"circle","color":"green","tooltip":true},"encoding":{"x":{"field":"sepal-width","type":"quantitative"},"y":{"field":"sepal-length","type":"quantitative"}},"data":{"values":"rownames,sepal-length,sepal-width,petal-length,petal-width,species\n1,5.1,3.5,1.4,0.2,setosa\n2,4.9,3.0,1.4,0.2,setosa\n3,4.7,3.2,1.3,0.2,setosa\n4,4.6,3.1,1.5,0.2,setosa\n5,5.0,3.6,1.4,0.2,setosa\n6,5.4,3.9,1.7,0.4,setosa\n7,4.6,3.4,1.4,0.3,setosa\n8,5.0,3.4,1.5,0.2,setosa\n9,4.4,2.9,1.4,0.2,setosa\n10,4.9,3.1,1.5,0.1,setosa\n11,5.4,3.7,1.5,0.2,setosa\n12,4.8,3.4,1.6,0.2,setosa\n13,4.8,3.0,1.4,0.1,setosa\n14,4.3,3.0,1.1,0.1,setosa\n15,5.8,4.0,1.2,0.2,setosa\n16,5.7,4.4,1.5,0.4,setosa\n17,5.4,3.9,1.3,0.4,setosa\n18,5.1,3.5,1.4,0.3,setosa\n19,5.7,3.8,1.7,0.3,setosa\n20,5.1,3.8,1.5,0.3,setosa\n21,5.4,3.4,1.7,0.2,setosa\n22,5.1,3.7,1.5,0.4,setosa\n23,4.6,3.6,1.0,0.2,setosa\n24,5.1,3.3,1.7,0.5,setosa\n25,4.8,3.4,1.9,0.2,setosa\n26,5.0,3.0,1.6,0.2,setosa\n27,5.0,3.4,1.6,0.4,setosa\n28,5.2,3.5,1.5,0.2,setosa\n29,5.2,3.4,1.4,0.2,setosa\n30,4.7,3.2,1.6,0.2,setosa\n31,4.8,3.1,1.6,0.2,setosa\n32,5.4,3.4,1.5,0.4,setosa\n33,5.2,4.1,1.5,0.1,setosa\n34,5.5,4.2,1.4,0.2,setosa\n35,4.9,3.1,1.5,0.2,setosa\n36,5.0,3.2,1.2,0.2,setosa\n37,5.5,3.5,1.3,0.2,setosa\n38,4.9,3.6,1.4,0.1,setosa\n39,4.4,3.0,1.3,0.2,setosa\n40,5.1,3.4,1.5,0.2,setosa\n41,5.0,3.5,1.3,0.3,setosa\n42,4.5,2.3,1.3,0.3,setosa\n43,4.4,3.2,1.3,0.2,setosa\n44,5.0,3.5,1.6,0.6,setosa\n45,5.1,3.8,1.9,0.4,setosa\n46,4.8,3.0,1.4,0.3,setosa\n47,5.1,3.8,1.6,0.2,setosa\n48,4.6,3.2,1.4,0.2,setosa\n49,5.3,3.7,1.5,0.2,setosa\n50,5.0,3.3,1.4,0.2,setosa\n51,7.0,3.2,4.7,1.4,versicolor\n52,6.4,3.2,4.5,1.5,versicolor\n53,6.9,3.1,4.9,1.5,versicolor\n54,5.5,2.3,4.0,1.3,versicolor\n55,6.5,2.8,4.6,1.5,versicolor\n56,5.7,2.8,4.5,1.3,versicolor\n57,6.3,3.3,4.7,1.6,versicolor\n58,4.9,2.4,3.3,1.0,versicolor\n59,6.6,2.9,4.6,1.3,versicolor\n60,5.2,2.7,3.9,1.4,versicolor\n61,5.0,2.0,3.5,1.0,versicolor\n62,5.9,3.0,4.2,1.5,versicolor\n63,6.0,2.2,4.0,1.0,versicolor\n64,6.1,2.9,4.7,1.4,versicolor\n65,5.6,2.9,3.6,1.3,versicolor\n66,6.7,3.1,4.4,1.4,versicolor\n67,5.6,3.0,4.5,1.5,versicolor\n68,5.8,2.7,4.1,1.0,versicolor\n69,6.2,2.2,4.5,1.5,versicolor\n70,5.6,2.5,3.9,1.1,versicolor\n71,5.9,3.2,4.8,1.8,versicolor\n72,6.1,2.8,4.0,1.3,versicolor\n73,6.3,2.5,4.9,1.5,versicolor\n74,6.1,2.8,4.7,1.2,versicolor\n75,6.4,2.9,4.3,1.3,versicolor\n76,6.6,3.0,4.4,1.4,versicolor\n77,6.8,2.8,4.8,1.4,versicolor\n78,6.7,3.0,5.0,1.7,versicolor\n79,6.0,2.9,4.5,1.5,versicolor\n80,5.7,2.6,3.5,1.0,versicolor\n81,5.5,2.4,3.8,1.1,versicolor\n82,5.5,2.4,3.7,1.0,versicolor\n83,5.8,2.7,3.9,1.2,versicolor\n84,6.0,2.7,5.1,1.6,versicolor\n85,5.4,3.0,4.5,1.5,versicolor\n86,6.0,3.4,4.5,1.6,versicolor\n87,6.7,3.1,4.7,1.5,versicolor\n88,6.3,2.3,4.4,1.3,versicolor\n89,5.6,3.0,4.1,1.3,versicolor\n90,5.5,2.5,4.0,1.3,versicolor\n91,5.5,2.6,4.4,1.2,versicolor\n92,6.1,3.0,4.6,1.4,versicolor\n93,5.8,2.6,4.0,1.2,versicolor\n94,5.0,2.3,3.3,1.0,versicolor\n95,5.6,2.7,4.2,1.3,versicolor\n96,5.7,3.0,4.2,1.2,versicolor\n97,5.7,2.9,4.2,1.3,versicolor\n98,6.2,2.9,4.3,1.3,versicolor\n99,5.1,2.5,3.0,1.1,versicolor\n100,5.7,2.8,4.1,1.3,versicolor\n101,6.3,3.3,6.0,2.5,virginica\n102,5.8,2.7,5.1,1.9,virginica\n103,7.1,3.0,5.9,2.1,virginica\n104,6.3,2.9,5.6,1.8,virginica\n105,6.5,3.0,5.8,2.2,virginica\n106,7.6,3.0,6.6,2.1,virginica\n107,4.9,2.5,4.5,1.7,virginica\n108,7.3,2.9,6.3,1.8,virginica\n109,6.7,2.5,5.8,1.8,virginica\n110,7.2,3.6,6.1,2.5,virginica\n111,6.5,3.2,5.1,2.0,virginica\n112,6.4,2.7,5.3,1.9,virginica\n113,6.8,3.0,5.5,2.1,virginica\n114,5.7,2.5,5.0,2.0,virginica\n115,5.8,2.8,5.1,2.4,virginica\n116,6.4,3.2,5.3,2.3,virginica\n117,6.5,3.0,5.5,1.8,virginica\n118,7.7,3.8,6.7,2.2,virginica\n119,7.7,2.6,6.9,2.3,virginica\n120,6.0,2.2,5.0,1.5,virginica\n121,6.9,3.2,5.7,2.3,virginica\n122,5.6,2.8,4.9,2.0,virginica\n123,7.7,2.8,6.7,2.0,virginica\n124,6.3,2.7,4.9,1.8,virginica\n125,6.7,3.3,5.7,2.1,virginica\n126,7.2,3.2,6.0,1.8,virginica\n127,6.2,2.8,4.8,1.8,virginica\n128,6.1,3.0,4.9,1.8,virginica\n129,6.4,2.8,5.6,2.1,virginica\n130,7.2,3.0,5.8,1.6,virginica\n131,7.4,2.8,6.1,1.9,virginica\n132,7.9,3.8,6.4,2.0,virginica\n133,6.4,2.8,5.6,2.2,virginica\n134,6.3,2.8,5.1,1.5,virginica\n135,6.1,2.6,5.6,1.4,virginica\n136,7.7,3.0,6.1,2.3,virginica\n137,6.3,3.4,5.6,2.4,virginica\n138,6.4,3.1,5.5,1.8,virginica\n139,6.0,3.0,4.8,1.8,virginica\n140,6.9,3.1,5.4,2.1,virginica\n141,6.7,3.1,5.6,2.4,virginica\n142,6.9,3.1,5.1,2.3,virginica\n143,5.8,2.7,5.1,1.9,virginica\n144,6.8,3.2,5.9,2.3,virginica\n145,6.7,3.3,5.7,2.5,virginica\n146,6.7,3.0,5.2,2.3,virginica\n147,6.3,2.5,5.0,1.9,virginica\n148,6.5,3.0,5.2,2.0,virginica\n149,6.2,3.4,5.4,2.3,virginica\n150,5.9,3.0,5.1,1.8,virginica\n","format":{"type":"csv"}}},{"mark":{"type":"line","color":"orange","tooltip":true},"encoding":{"x":{"field":"sepal-width","type":"quantitative"},"y":{"field":"sepal-length","type":"quantitative"}},"data":{"values":"rownames,sepal-length,sepal-width,petal-length,petal-width,species\n1,5.744458836939828,3.5,1.4,0.2,setosa\n2,5.85613936750478,3.0,1.4,0.2,setosa\n3,5.811467155278799,3.2,1.3,0.2,setosa\n4,5.83380326139179,3.1,1.5,0.2,setosa\n5,5.722122730826838,3.6,1.4,0.2,setosa\n6,5.655114412487867,3.9,1.7,0.4,setosa\n7,5.766794943052819,3.4,1.4,0.3,setosa\n8,5.766794943052819,3.4,1.5,0.2,setosa\n9,5.878475473617771,2.9,1.4,0.2,setosa\n10,5.83380326139179,3.1,1.5,0.1,setosa\n11,5.699786624713847,3.7,1.5,0.2,setosa\n12,5.766794943052819,3.4,1.6,0.2,setosa\n13,5.85613936750478,3.0,1.4,0.1,setosa\n14,5.85613936750478,3.0,1.1,0.1,setosa\n15,5.632778306374877,4.0,1.2,0.2,setosa\n16,5.543433881922915,4.4,1.5,0.4,setosa\n17,5.655114412487867,3.9,1.3,0.4,setosa\n18,5.744458836939828,3.5,1.4,0.3,setosa\n19,5.677450518600858,3.8,1.7,0.3,setosa\n20,5.677450518600858,3.8,1.5,0.3,setosa\n21,5.766794943052819,3.4,1.7,0.2,setosa\n22,5.699786624713847,3.7,1.5,0.4,setosa\n23,5.722122730826838,3.6,1.0,0.2,setosa\n24,5.7891310491658095,3.3,1.7,0.5,setosa\n25,5.766794943052819,3.4,1.9,0.2,setosa\n26,5.85613936750478,3.0,1.6,0.2,setosa\n27,5.766794943052819,3.4,1.6,0.4,setosa\n28,5.744458836939828,3.5,1.5,0.2,setosa\n29,5.766794943052819,3.4,1.4,0.2,setosa\n30,5.811467155278799,3.2,1.6,0.2,setosa\n31,5.83380326139179,3.1,1.6,0.2,setosa\n32,5.766794943052819,3.4,1.5,0.4,setosa\n33,5.610442200261886,4.1,1.5,0.1,setosa\n34,5.588106094148896,4.2,1.4,0.2,setosa\n35,5.83380326139179,3.1,1.5,0.2,setosa\n36,5.811467155278799,3.2,1.2,0.2,setosa\n37,5.744458836939828,3.5,1.3,0.2,setosa\n38,5.722122730826838,3.6,1.4,0.1,setosa\n39,5.85613936750478,3.0,1.3,0.2,setosa\n40,5.766794943052819,3.4,1.5,0.2,setosa\n41,5.744458836939828,3.5,1.3,0.3,setosa\n42,6.012492110295713,2.3,1.3,0.3,setosa\n43,5.811467155278799,3.2,1.3,0.2,setosa\n44,5.744458836939828,3.5,1.6,0.6,setosa\n45,5.677450518600858,3.8,1.9,0.4,setosa\n46,5.85613936750478,3.0,1.4,0.3,setosa\n47,5.677450518600858,3.8,1.6,0.2,setosa\n48,5.811467155278799,3.2,1.4,0.2,setosa\n49,5.699786624713847,3.7,1.5,0.2,setosa\n50,5.7891310491658095,3.3,1.4,0.2,setosa\n51,5.811467155278799,3.2,4.7,1.4,versicolor\n52,5.811467155278799,3.2,4.5,1.5,versicolor\n53,5.83380326139179,3.1,4.9,1.5,versicolor\n54,6.012492110295713,2.3,4.0,1.3,versicolor\n55,5.900811579730761,2.8,4.6,1.5,versicolor\n56,5.900811579730761,2.8,4.5,1.3,versicolor\n57,5.7891310491658095,3.3,4.7,1.6,versicolor\n58,5.990156004182722,2.4,3.3,1.0,versicolor\n59,5.878475473617771,2.9,4.6,1.3,versicolor\n60,5.923147685843751,2.7,3.9,1.4,versicolor\n61,6.079500428634684,2.0,3.5,1.0,versicolor\n62,5.85613936750478,3.0,4.2,1.5,versicolor\n63,6.034828216408703,2.2,4.0,1.0,versicolor\n64,5.878475473617771,2.9,4.7,1.4,versicolor\n65,5.878475473617771,2.9,3.6,1.3,versicolor\n66,5.83380326139179,3.1,4.4,1.4,versicolor\n67,5.85613936750478,3.0,4.5,1.5,versicolor\n68,5.923147685843751,2.7,4.1,1.0,versicolor\n69,6.034828216408703,2.2,4.5,1.5,versicolor\n70,5.967819898069732,2.5,3.9,1.1,versicolor\n71,5.811467155278799,3.2,4.8,1.8,versicolor\n72,5.900811579730761,2.8,4.0,1.3,versicolor\n73,5.967819898069732,2.5,4.9,1.5,versicolor\n74,5.900811579730761,2.8,4.7,1.2,versicolor\n75,5.878475473617771,2.9,4.3,1.3,versicolor\n76,5.85613936750478,3.0,4.4,1.4,versicolor\n77,5.900811579730761,2.8,4.8,1.4,versicolor\n78,5.85613936750478,3.0,5.0,1.7,versicolor\n79,5.878475473617771,2.9,4.5,1.5,versicolor\n80,5.945483791956741,2.6,3.5,1.0,versicolor\n81,5.990156004182722,2.4,3.8,1.1,versicolor\n82,5.990156004182722,2.4,3.7,1.0,versicolor\n83,5.923147685843751,2.7,3.9,1.2,versicolor\n84,5.923147685843751,2.7,5.1,1.6,versicolor\n85,5.85613936750478,3.0,4.5,1.5,versicolor\n86,5.766794943052819,3.4,4.5,1.6,versicolor\n87,5.83380326139179,3.1,4.7,1.5,versicolor\n88,6.012492110295713,2.3,4.4,1.3,versicolor\n89,5.85613936750478,3.0,4.1,1.3,versicolor\n90,5.967819898069732,2.5,4.0,1.3,versicolor\n91,5.945483791956741,2.6,4.4,1.2,versicolor\n92,5.85613936750478,3.0,4.6,1.4,versicolor\n93,5.945483791956741,2.6,4.0,1.2,versicolor\n94,6.012492110295713,2.3,3.3,1.0,versicolor\n95,5.923147685843751,2.7,4.2,1.3,versicolor\n96,5.85613936750478,3.0,4.2,1.2,versicolor\n97,5.878475473617771,2.9,4.2,1.3,versicolor\n98,5.878475473617771,2.9,4.3,1.3,versicolor\n99,5.967819898069732,2.5,3.0,1.1,versicolor\n100,5.900811579730761,2.8,4.1,1.3,versicolor\n101,5.7891310491658095,3.3,6.0,2.5,virginica\n102,5.923147685843751,2.7,5.1,1.9,virginica\n103,5.85613936750478,3.0,5.9,2.1,virginica\n104,5.878475473617771,2.9,5.6,1.8,virginica\n105,5.85613936750478,3.0,5.8,2.2,virginica\n106,5.85613936750478,3.0,6.6,2.1,virginica\n107,5.967819898069732,2.5,4.5,1.7,virginica\n108,5.878475473617771,2.9,6.3,1.8,virginica\n109,5.967819898069732,2.5,5.8,1.8,virginica\n110,5.722122730826838,3.6,6.1,2.5,virginica\n111,5.811467155278799,3.2,5.1,2.0,virginica\n112,5.923147685843751,2.7,5.3,1.9,virginica\n113,5.85613936750478,3.0,5.5,2.1,virginica\n114,5.967819898069732,2.5,5.0,2.0,virginica\n115,5.900811579730761,2.8,5.1,2.4,virginica\n116,5.811467155278799,3.2,5.3,2.3,virginica\n117,5.85613936750478,3.0,5.5,1.8,virginica\n118,5.677450518600858,3.8,6.7,2.2,virginica\n119,5.945483791956741,2.6,6.9,2.3,virginica\n120,6.034828216408703,2.2,5.0,1.5,virginica\n121,5.811467155278799,3.2,5.7,2.3,virginica\n122,5.900811579730761,2.8,4.9,2.0,virginica\n123,5.900811579730761,2.8,6.7,2.0,virginica\n124,5.923147685843751,2.7,4.9,1.8,virginica\n125,5.7891310491658095,3.3,5.7,2.1,virginica\n126,5.811467155278799,3.2,6.0,1.8,virginica\n127,5.900811579730761,2.8,4.8,1.8,virginica\n128,5.85613936750478,3.0,4.9,1.8,virginica\n129,5.900811579730761,2.8,5.6,2.1,virginica\n130,5.85613936750478,3.0,5.8,1.6,virginica\n131,5.900811579730761,2.8,6.1,1.9,virginica\n132,5.677450518600858,3.8,6.4,2.0,virginica\n133,5.900811579730761,2.8,5.6,2.2,virginica\n134,5.900811579730761,2.8,5.1,1.5,virginica\n135,5.945483791956741,2.6,5.6,1.4,virginica\n136,5.85613936750478,3.0,6.1,2.3,virginica\n137,5.766794943052819,3.4,5.6,2.4,virginica\n138,5.83380326139179,3.1,5.5,1.8,virginica\n139,5.85613936750478,3.0,4.8,1.8,virginica\n140,5.83380326139179,3.1,5.4,2.1,virginica\n141,5.83380326139179,3.1,5.6,2.4,virginica\n142,5.83380326139179,3.1,5.1,2.3,virginica\n143,5.923147685843751,2.7,5.1,1.9,virginica\n144,5.811467155278799,3.2,5.9,2.3,virginica\n145,5.7891310491658095,3.3,5.7,2.5,virginica\n146,5.85613936750478,3.0,5.2,2.3,virginica\n147,5.967819898069732,2.5,5.0,1.9,virginica\n148,5.85613936750478,3.0,5.2,2.0,virginica\n149,5.766794943052819,3.4,5.4,2.3,virginica\n150,5.85613936750478,3.0,5.1,1.8,virginica\n","format":{"type":"csv"}}}],"height":300,"data":{"url":"hanamicloth.walkthrough_files\/0.csv","format":{"type":"csv"}}});</script></div>
<p>By default, the regression is computed with only one predictore variable, which is <code>:x</code>. But this can be overriden using the <code>:predictors</code> key. We may compute a regression with more than one predictor.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb32"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> iris</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>    (hanami/base #<span class="at">:hanami</span>{<span class="at">:x</span> <span class="at">:sepal-width</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:y</span> <span class="at">:sepal-length</span>})</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>    hanami/layer-point</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>    (hanami/layer-smooth #<span class="at">:hanami</span>{<span class="at">:predictors</span> [<span class="at">:petal-width</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>                                               <span class="at">:petal-length</span>]}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div><script>vegaEmbed(document.currentScript.parentElement, {"encoding":{"x":{"field":"sepal-width","type":"quantitative"},"y":{"field":"sepal-length","type":"quantitative"}},"usermeta":{"embedOptions":{"renderer":"svg"}},"width":400,"background":"floralwhite","layer":[{"mark":{"type":"circle","tooltip":true},"encoding":{"x":{"field":"sepal-width","type":"quantitative"},"y":{"field":"sepal-length","type":"quantitative"}},"data":{"values":"rownames,sepal-length,sepal-width,petal-length,petal-width,species\n1,5.1,3.5,1.4,0.2,setosa\n2,4.9,3.0,1.4,0.2,setosa\n3,4.7,3.2,1.3,0.2,setosa\n4,4.6,3.1,1.5,0.2,setosa\n5,5.0,3.6,1.4,0.2,setosa\n6,5.4,3.9,1.7,0.4,setosa\n7,4.6,3.4,1.4,0.3,setosa\n8,5.0,3.4,1.5,0.2,setosa\n9,4.4,2.9,1.4,0.2,setosa\n10,4.9,3.1,1.5,0.1,setosa\n11,5.4,3.7,1.5,0.2,setosa\n12,4.8,3.4,1.6,0.2,setosa\n13,4.8,3.0,1.4,0.1,setosa\n14,4.3,3.0,1.1,0.1,setosa\n15,5.8,4.0,1.2,0.2,setosa\n16,5.7,4.4,1.5,0.4,setosa\n17,5.4,3.9,1.3,0.4,setosa\n18,5.1,3.5,1.4,0.3,setosa\n19,5.7,3.8,1.7,0.3,setosa\n20,5.1,3.8,1.5,0.3,setosa\n21,5.4,3.4,1.7,0.2,setosa\n22,5.1,3.7,1.5,0.4,setosa\n23,4.6,3.6,1.0,0.2,setosa\n24,5.1,3.3,1.7,0.5,setosa\n25,4.8,3.4,1.9,0.2,setosa\n26,5.0,3.0,1.6,0.2,setosa\n27,5.0,3.4,1.6,0.4,setosa\n28,5.2,3.5,1.5,0.2,setosa\n29,5.2,3.4,1.4,0.2,setosa\n30,4.7,3.2,1.6,0.2,setosa\n31,4.8,3.1,1.6,0.2,setosa\n32,5.4,3.4,1.5,0.4,setosa\n33,5.2,4.1,1.5,0.1,setosa\n34,5.5,4.2,1.4,0.2,setosa\n35,4.9,3.1,1.5,0.2,setosa\n36,5.0,3.2,1.2,0.2,setosa\n37,5.5,3.5,1.3,0.2,setosa\n38,4.9,3.6,1.4,0.1,setosa\n39,4.4,3.0,1.3,0.2,setosa\n40,5.1,3.4,1.5,0.2,setosa\n41,5.0,3.5,1.3,0.3,setosa\n42,4.5,2.3,1.3,0.3,setosa\n43,4.4,3.2,1.3,0.2,setosa\n44,5.0,3.5,1.6,0.6,setosa\n45,5.1,3.8,1.9,0.4,setosa\n46,4.8,3.0,1.4,0.3,setosa\n47,5.1,3.8,1.6,0.2,setosa\n48,4.6,3.2,1.4,0.2,setosa\n49,5.3,3.7,1.5,0.2,setosa\n50,5.0,3.3,1.4,0.2,setosa\n51,7.0,3.2,4.7,1.4,versicolor\n52,6.4,3.2,4.5,1.5,versicolor\n53,6.9,3.1,4.9,1.5,versicolor\n54,5.5,2.3,4.0,1.3,versicolor\n55,6.5,2.8,4.6,1.5,versicolor\n56,5.7,2.8,4.5,1.3,versicolor\n57,6.3,3.3,4.7,1.6,versicolor\n58,4.9,2.4,3.3,1.0,versicolor\n59,6.6,2.9,4.6,1.3,versicolor\n60,5.2,2.7,3.9,1.4,versicolor\n61,5.0,2.0,3.5,1.0,versicolor\n62,5.9,3.0,4.2,1.5,versicolor\n63,6.0,2.2,4.0,1.0,versicolor\n64,6.1,2.9,4.7,1.4,versicolor\n65,5.6,2.9,3.6,1.3,versicolor\n66,6.7,3.1,4.4,1.4,versicolor\n67,5.6,3.0,4.5,1.5,versicolor\n68,5.8,2.7,4.1,1.0,versicolor\n69,6.2,2.2,4.5,1.5,versicolor\n70,5.6,2.5,3.9,1.1,versicolor\n71,5.9,3.2,4.8,1.8,versicolor\n72,6.1,2.8,4.0,1.3,versicolor\n73,6.3,2.5,4.9,1.5,versicolor\n74,6.1,2.8,4.7,1.2,versicolor\n75,6.4,2.9,4.3,1.3,versicolor\n76,6.6,3.0,4.4,1.4,versicolor\n77,6.8,2.8,4.8,1.4,versicolor\n78,6.7,3.0,5.0,1.7,versicolor\n79,6.0,2.9,4.5,1.5,versicolor\n80,5.7,2.6,3.5,1.0,versicolor\n81,5.5,2.4,3.8,1.1,versicolor\n82,5.5,2.4,3.7,1.0,versicolor\n83,5.8,2.7,3.9,1.2,versicolor\n84,6.0,2.7,5.1,1.6,versicolor\n85,5.4,3.0,4.5,1.5,versicolor\n86,6.0,3.4,4.5,1.6,versicolor\n87,6.7,3.1,4.7,1.5,versicolor\n88,6.3,2.3,4.4,1.3,versicolor\n89,5.6,3.0,4.1,1.3,versicolor\n90,5.5,2.5,4.0,1.3,versicolor\n91,5.5,2.6,4.4,1.2,versicolor\n92,6.1,3.0,4.6,1.4,versicolor\n93,5.8,2.6,4.0,1.2,versicolor\n94,5.0,2.3,3.3,1.0,versicolor\n95,5.6,2.7,4.2,1.3,versicolor\n96,5.7,3.0,4.2,1.2,versicolor\n97,5.7,2.9,4.2,1.3,versicolor\n98,6.2,2.9,4.3,1.3,versicolor\n99,5.1,2.5,3.0,1.1,versicolor\n100,5.7,2.8,4.1,1.3,versicolor\n101,6.3,3.3,6.0,2.5,virginica\n102,5.8,2.7,5.1,1.9,virginica\n103,7.1,3.0,5.9,2.1,virginica\n104,6.3,2.9,5.6,1.8,virginica\n105,6.5,3.0,5.8,2.2,virginica\n106,7.6,3.0,6.6,2.1,virginica\n107,4.9,2.5,4.5,1.7,virginica\n108,7.3,2.9,6.3,1.8,virginica\n109,6.7,2.5,5.8,1.8,virginica\n110,7.2,3.6,6.1,2.5,virginica\n111,6.5,3.2,5.1,2.0,virginica\n112,6.4,2.7,5.3,1.9,virginica\n113,6.8,3.0,5.5,2.1,virginica\n114,5.7,2.5,5.0,2.0,virginica\n115,5.8,2.8,5.1,2.4,virginica\n116,6.4,3.2,5.3,2.3,virginica\n117,6.5,3.0,5.5,1.8,virginica\n118,7.7,3.8,6.7,2.2,virginica\n119,7.7,2.6,6.9,2.3,virginica\n120,6.0,2.2,5.0,1.5,virginica\n121,6.9,3.2,5.7,2.3,virginica\n122,5.6,2.8,4.9,2.0,virginica\n123,7.7,2.8,6.7,2.0,virginica\n124,6.3,2.7,4.9,1.8,virginica\n125,6.7,3.3,5.7,2.1,virginica\n126,7.2,3.2,6.0,1.8,virginica\n127,6.2,2.8,4.8,1.8,virginica\n128,6.1,3.0,4.9,1.8,virginica\n129,6.4,2.8,5.6,2.1,virginica\n130,7.2,3.0,5.8,1.6,virginica\n131,7.4,2.8,6.1,1.9,virginica\n132,7.9,3.8,6.4,2.0,virginica\n133,6.4,2.8,5.6,2.2,virginica\n134,6.3,2.8,5.1,1.5,virginica\n135,6.1,2.6,5.6,1.4,virginica\n136,7.7,3.0,6.1,2.3,virginica\n137,6.3,3.4,5.6,2.4,virginica\n138,6.4,3.1,5.5,1.8,virginica\n139,6.0,3.0,4.8,1.8,virginica\n140,6.9,3.1,5.4,2.1,virginica\n141,6.7,3.1,5.6,2.4,virginica\n142,6.9,3.1,5.1,2.3,virginica\n143,5.8,2.7,5.1,1.9,virginica\n144,6.8,3.2,5.9,2.3,virginica\n145,6.7,3.3,5.7,2.5,virginica\n146,6.7,3.0,5.2,2.3,virginica\n147,6.3,2.5,5.0,1.9,virginica\n148,6.5,3.0,5.2,2.0,virginica\n149,6.2,3.4,5.4,2.3,virginica\n150,5.9,3.0,5.1,1.8,virginica\n","format":{"type":"csv"}}},{"mark":{"type":"line","tooltip":true},"encoding":{"x":{"field":"sepal-width","type":"quantitative"},"y":{"field":"sepal-length","type":"quantitative"}},"data":{"values":"rownames,sepal-length,sepal-width,petal-length,petal-width,species\n1,4.885160331757632,3.5,1.4,0.2,setosa\n2,4.885160331757632,3.0,1.4,0.2,setosa\n3,4.830982616383621,3.2,1.3,0.2,setosa\n4,4.939338047131642,3.1,1.5,0.2,setosa\n5,4.885160331757632,3.6,1.4,0.2,setosa\n6,4.9837833657495505,3.9,1.7,0.4,setosa\n7,4.853205275692575,3.4,1.4,0.3,setosa\n8,4.939338047131642,3.4,1.5,0.2,setosa\n9,4.885160331757632,2.9,1.4,0.2,setosa\n10,4.9712931031966985,3.1,1.5,0.1,setosa\n11,4.939338047131642,3.7,1.5,0.2,setosa\n12,4.993515762505653,3.4,1.6,0.2,setosa\n13,4.9171153878226885,3.0,1.4,0.1,setosa\n14,4.754582241700657,3.0,1.1,0.1,setosa\n15,4.77680490100961,4.0,1.2,0.2,setosa\n16,4.875427935001529,4.4,1.5,0.4,setosa\n17,4.767072504253508,3.9,1.3,0.4,setosa\n18,4.853205275692575,3.5,1.4,0.3,setosa\n19,5.015738421814607,3.8,1.7,0.3,setosa\n20,4.907382991066585,3.8,1.5,0.3,setosa\n21,5.047693477879664,3.4,1.7,0.2,setosa\n22,4.875427935001529,3.7,1.5,0.4,setosa\n23,4.6684494702615895,3.6,1.0,0.2,setosa\n24,4.951828309684494,3.3,1.7,0.5,setosa\n25,5.156048908627684,3.4,1.9,0.2,setosa\n26,4.993515762505653,3.0,1.6,0.2,setosa\n27,4.92960565037554,3.4,1.6,0.4,setosa\n28,4.939338047131642,3.5,1.5,0.2,setosa\n29,4.885160331757632,3.4,1.4,0.2,setosa\n30,4.993515762505653,3.2,1.6,0.2,setosa\n31,4.993515762505653,3.1,1.6,0.2,setosa\n32,4.875427935001529,3.4,1.5,0.4,setosa\n33,4.9712931031966985,4.1,1.5,0.1,setosa\n34,4.885160331757632,4.2,1.4,0.2,setosa\n35,4.939338047131642,3.1,1.5,0.2,setosa\n36,4.77680490100961,3.2,1.2,0.2,setosa\n37,4.830982616383621,3.5,1.3,0.2,setosa\n38,4.9171153878226885,3.6,1.4,0.1,setosa\n39,4.830982616383621,3.0,1.3,0.2,setosa\n40,4.939338047131642,3.4,1.5,0.2,setosa\n41,4.799027560318565,3.5,1.3,0.3,setosa\n42,4.799027560318565,2.3,1.3,0.3,setosa\n43,4.830982616383621,3.2,1.3,0.2,setosa\n44,4.865695538245427,3.5,1.6,0.6,setosa\n45,5.092138796497571,3.8,1.9,0.4,setosa\n46,4.853205275692575,3.0,1.4,0.3,setosa\n47,4.993515762505653,3.8,1.6,0.2,setosa\n48,4.885160331757632,3.2,1.4,0.2,setosa\n49,4.939338047131642,3.7,1.5,0.2,setosa\n50,4.885160331757632,3.3,1.4,0.2,setosa\n51,6.289564266319303,3.2,4.7,1.4,versicolor\n52,6.149253779506225,3.2,4.5,1.5,versicolor\n53,6.365964641002267,3.1,4.9,1.5,versicolor\n54,5.942275314766285,2.3,4.0,1.3,versicolor\n55,6.203431494880235,2.8,4.6,1.5,versicolor\n56,6.213163891636338,2.8,4.5,1.3,versicolor\n57,6.22565415418919,3.3,4.7,1.6,versicolor\n58,5.65889647534338,2.4,3.3,1.0,versicolor\n59,6.267341607010348,2.9,4.6,1.3,versicolor\n60,5.856142543327218,2.7,3.9,1.4,versicolor\n61,5.767251906091401,2.0,3.5,1.0,versicolor\n62,5.986720633384193,3.0,4.2,1.5,versicolor\n63,6.038140482961454,2.2,4.0,1.0,versicolor\n64,6.289564266319303,2.9,4.7,1.4,versicolor\n65,5.725564453270243,2.9,3.6,1.3,versicolor\n66,6.127031120197271,3.1,4.4,1.4,versicolor\n67,6.149253779506225,3.0,4.5,1.5,versicolor\n68,6.092318198335464,2.7,4.1,1.0,versicolor\n69,6.149253779506225,2.2,4.5,1.5,versicolor\n70,5.952007711522388,2.5,3.9,1.1,versicolor\n71,6.215921757433087,3.2,4.8,1.8,versicolor\n72,5.942275314766285,2.8,4.0,1.3,versicolor\n73,6.365964641002267,2.5,4.9,1.5,versicolor\n74,6.353474378449415,2.8,4.7,1.2,versicolor\n75,6.104808460888316,2.9,4.3,1.3,versicolor\n76,6.127031120197271,3.0,4.4,1.4,versicolor\n77,6.343741981693313,2.8,4.8,1.4,versicolor\n78,6.356232244246165,3.0,5.0,1.7,versicolor\n79,6.149253779506225,2.9,4.5,1.5,versicolor\n80,5.767251906091401,2.6,3.5,1.0,versicolor\n81,5.897829996148376,2.4,3.8,1.1,versicolor\n82,5.875607336839423,2.4,3.7,1.0,versicolor\n83,5.920052655457331,2.7,3.9,1.2,versicolor\n84,6.4423650156852315,2.7,5.1,1.6,versicolor\n85,6.149253779506225,3.0,4.5,1.5,versicolor\n86,6.117298723441168,3.4,4.5,1.6,versicolor\n87,6.257609210254246,3.1,4.7,1.5,versicolor\n88,6.158986176262327,2.3,4.4,1.3,versicolor\n89,5.996453030140295,3.0,4.1,1.3,versicolor\n90,5.942275314766285,2.5,4.0,1.3,versicolor\n91,6.190941232327384,2.6,4.4,1.2,versicolor\n92,6.235386550945291,3.0,4.6,1.4,versicolor\n93,5.974230370831341,2.6,4.0,1.2,versicolor\n94,5.65889647534338,2.3,3.3,1.0,versicolor\n95,6.050630745514306,2.7,4.2,1.3,versicolor\n96,6.082585801579363,3.0,4.2,1.2,versicolor\n97,6.050630745514306,2.9,4.2,1.3,versicolor\n98,6.104808460888316,2.9,4.3,1.3,versicolor\n99,5.464408273156292,2.5,3.0,1.1,versicolor\n100,5.996453030140295,2.8,4.1,1.3,versicolor\n101,6.642368949465818,3.3,6.0,2.5,virginica\n102,6.346499847490062,2.7,5.1,1.9,virginica\n103,6.716011458352034,3.0,5.9,2.1,virginica\n104,6.649343480425171,2.9,5.6,1.8,virginica\n105,6.629878686912966,3.0,5.8,2.2,virginica\n106,7.095255465970107,3.0,6.6,2.1,virginica\n107,6.085343667376112,2.5,4.5,1.7,virginica\n108,7.028587488043245,2.9,6.3,1.8,virginica\n109,6.757698911173192,2.5,5.8,1.8,virginica\n110,6.696546664839829,3.6,6.1,2.5,virginica\n111,6.314544791425005,3.2,5.1,2.0,virginica\n112,6.4548552782380835,2.7,5.3,1.9,virginica\n113,6.499300596855991,3.0,5.5,2.1,virginica\n114,6.260367076050995,2.5,5.0,2.0,virginica\n115,6.186724567164779,2.8,5.1,2.4,virginica\n116,6.327035053977857,3.2,5.3,2.3,virginica\n117,6.595165765051161,3.0,5.5,1.8,virginica\n118,7.117478125279062,3.8,6.7,2.2,virginica\n119,7.193878499962027,2.6,6.9,2.3,virginica\n120,6.420142356376278,2.2,5.0,1.5,virginica\n121,6.5437459154739,3.2,5.7,2.3,virginica\n122,6.206189360676985,2.8,4.9,2.0,virginica\n123,7.181388237409175,2.8,6.7,2.0,virginica\n124,6.270099472807098,2.7,4.9,1.8,virginica\n125,6.607656027604012,3.3,5.7,2.1,virginica\n126,6.866054341921213,3.2,6.0,1.8,virginica\n127,6.215921757433087,2.8,4.8,1.8,virginica\n128,6.270099472807098,3.0,4.9,1.8,virginica\n129,6.553478312230002,2.8,5.6,2.1,virginica\n130,6.821609023303305,3.0,5.8,1.6,virginica\n131,6.8882770012301675,2.8,6.1,1.9,virginica\n132,7.0188550912871435,3.8,6.4,2.0,virginica\n133,6.521523256164945,2.8,5.6,2.2,virginica\n134,6.474320071750288,2.8,5.1,1.5,virginica\n135,6.777163704685397,2.6,5.6,1.4,virginica\n136,6.760456776969942,3.0,6.1,2.3,virginica\n137,6.457613144034832,3.4,5.6,2.4,virginica\n138,6.595165765051161,3.1,5.5,1.8,virginica\n139,6.215921757433087,3.0,4.8,1.8,virginica\n140,6.44512288148198,3.1,5.4,2.1,virginica\n141,6.457613144034832,3.1,5.6,2.4,virginica\n142,6.218679623229836,3.1,5.1,2.3,virginica\n143,6.346499847490062,2.7,5.1,1.9,virginica\n144,6.6521013462219205,3.2,5.9,2.3,virginica\n145,6.479835803343787,3.3,5.7,2.5,virginica\n146,6.272857338603847,3.0,5.2,2.3,virginica\n147,6.292322132116052,2.5,5.0,1.9,virginica\n148,6.368722506799016,3.0,5.2,2.0,virginica\n149,6.381212769351868,3.4,5.4,2.3,virginica\n150,6.378454903555118,3.0,5.1,1.8,virginica\n","format":{"type":"csv"}}}],"height":300,"data":{"url":"hanamicloth.walkthrough_files\/0.csv","format":{"type":"csv"}}});</script></div>
</section>
<section id="grouping" class="level2" data-number="2.12">
<h2 data-number="2.12" class="anchored" data-anchor-id="grouping"><span class="header-section-number">2.12</span> Grouping</h2>
<p>The regression computed by <code>hanami/layer-smooth</code> is affected by the inferred grouping of the data.</p>
<p>For example, here we recieve three regression lines, each for every species.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb33"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> iris</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>    (hanami/base #<span class="at">:hanami</span>{<span class="at">:title</span> <span class="st">"dummy"</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:color</span> <span class="at">:species</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:x</span> <span class="at">:sepal-width</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:y</span> <span class="at">:sepal-length</span>})</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>    hanami/layer-point</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>    hanami/layer-smooth)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div><script>vegaEmbed(document.currentScript.parentElement, {"encoding":{"color":{"field":"species","type":"nominal"},"x":{"field":"sepal-width","type":"quantitative"},"y":{"field":"sepal-length","type":"quantitative"}},"usermeta":{"embedOptions":{"renderer":"svg"}},"width":400,"background":"floralwhite","title":"dummy","layer":[{"mark":{"type":"circle","tooltip":true},"encoding":{"color":{"field":"species","type":"nominal"},"x":{"field":"sepal-width","type":"quantitative"},"y":{"field":"sepal-length","type":"quantitative"}},"data":{"values":"rownames,sepal-length,sepal-width,petal-length,petal-width,species\n1,5.1,3.5,1.4,0.2,setosa\n2,4.9,3.0,1.4,0.2,setosa\n3,4.7,3.2,1.3,0.2,setosa\n4,4.6,3.1,1.5,0.2,setosa\n5,5.0,3.6,1.4,0.2,setosa\n6,5.4,3.9,1.7,0.4,setosa\n7,4.6,3.4,1.4,0.3,setosa\n8,5.0,3.4,1.5,0.2,setosa\n9,4.4,2.9,1.4,0.2,setosa\n10,4.9,3.1,1.5,0.1,setosa\n11,5.4,3.7,1.5,0.2,setosa\n12,4.8,3.4,1.6,0.2,setosa\n13,4.8,3.0,1.4,0.1,setosa\n14,4.3,3.0,1.1,0.1,setosa\n15,5.8,4.0,1.2,0.2,setosa\n16,5.7,4.4,1.5,0.4,setosa\n17,5.4,3.9,1.3,0.4,setosa\n18,5.1,3.5,1.4,0.3,setosa\n19,5.7,3.8,1.7,0.3,setosa\n20,5.1,3.8,1.5,0.3,setosa\n21,5.4,3.4,1.7,0.2,setosa\n22,5.1,3.7,1.5,0.4,setosa\n23,4.6,3.6,1.0,0.2,setosa\n24,5.1,3.3,1.7,0.5,setosa\n25,4.8,3.4,1.9,0.2,setosa\n26,5.0,3.0,1.6,0.2,setosa\n27,5.0,3.4,1.6,0.4,setosa\n28,5.2,3.5,1.5,0.2,setosa\n29,5.2,3.4,1.4,0.2,setosa\n30,4.7,3.2,1.6,0.2,setosa\n31,4.8,3.1,1.6,0.2,setosa\n32,5.4,3.4,1.5,0.4,setosa\n33,5.2,4.1,1.5,0.1,setosa\n34,5.5,4.2,1.4,0.2,setosa\n35,4.9,3.1,1.5,0.2,setosa\n36,5.0,3.2,1.2,0.2,setosa\n37,5.5,3.5,1.3,0.2,setosa\n38,4.9,3.6,1.4,0.1,setosa\n39,4.4,3.0,1.3,0.2,setosa\n40,5.1,3.4,1.5,0.2,setosa\n41,5.0,3.5,1.3,0.3,setosa\n42,4.5,2.3,1.3,0.3,setosa\n43,4.4,3.2,1.3,0.2,setosa\n44,5.0,3.5,1.6,0.6,setosa\n45,5.1,3.8,1.9,0.4,setosa\n46,4.8,3.0,1.4,0.3,setosa\n47,5.1,3.8,1.6,0.2,setosa\n48,4.6,3.2,1.4,0.2,setosa\n49,5.3,3.7,1.5,0.2,setosa\n50,5.0,3.3,1.4,0.2,setosa\n51,7.0,3.2,4.7,1.4,versicolor\n52,6.4,3.2,4.5,1.5,versicolor\n53,6.9,3.1,4.9,1.5,versicolor\n54,5.5,2.3,4.0,1.3,versicolor\n55,6.5,2.8,4.6,1.5,versicolor\n56,5.7,2.8,4.5,1.3,versicolor\n57,6.3,3.3,4.7,1.6,versicolor\n58,4.9,2.4,3.3,1.0,versicolor\n59,6.6,2.9,4.6,1.3,versicolor\n60,5.2,2.7,3.9,1.4,versicolor\n61,5.0,2.0,3.5,1.0,versicolor\n62,5.9,3.0,4.2,1.5,versicolor\n63,6.0,2.2,4.0,1.0,versicolor\n64,6.1,2.9,4.7,1.4,versicolor\n65,5.6,2.9,3.6,1.3,versicolor\n66,6.7,3.1,4.4,1.4,versicolor\n67,5.6,3.0,4.5,1.5,versicolor\n68,5.8,2.7,4.1,1.0,versicolor\n69,6.2,2.2,4.5,1.5,versicolor\n70,5.6,2.5,3.9,1.1,versicolor\n71,5.9,3.2,4.8,1.8,versicolor\n72,6.1,2.8,4.0,1.3,versicolor\n73,6.3,2.5,4.9,1.5,versicolor\n74,6.1,2.8,4.7,1.2,versicolor\n75,6.4,2.9,4.3,1.3,versicolor\n76,6.6,3.0,4.4,1.4,versicolor\n77,6.8,2.8,4.8,1.4,versicolor\n78,6.7,3.0,5.0,1.7,versicolor\n79,6.0,2.9,4.5,1.5,versicolor\n80,5.7,2.6,3.5,1.0,versicolor\n81,5.5,2.4,3.8,1.1,versicolor\n82,5.5,2.4,3.7,1.0,versicolor\n83,5.8,2.7,3.9,1.2,versicolor\n84,6.0,2.7,5.1,1.6,versicolor\n85,5.4,3.0,4.5,1.5,versicolor\n86,6.0,3.4,4.5,1.6,versicolor\n87,6.7,3.1,4.7,1.5,versicolor\n88,6.3,2.3,4.4,1.3,versicolor\n89,5.6,3.0,4.1,1.3,versicolor\n90,5.5,2.5,4.0,1.3,versicolor\n91,5.5,2.6,4.4,1.2,versicolor\n92,6.1,3.0,4.6,1.4,versicolor\n93,5.8,2.6,4.0,1.2,versicolor\n94,5.0,2.3,3.3,1.0,versicolor\n95,5.6,2.7,4.2,1.3,versicolor\n96,5.7,3.0,4.2,1.2,versicolor\n97,5.7,2.9,4.2,1.3,versicolor\n98,6.2,2.9,4.3,1.3,versicolor\n99,5.1,2.5,3.0,1.1,versicolor\n100,5.7,2.8,4.1,1.3,versicolor\n101,6.3,3.3,6.0,2.5,virginica\n102,5.8,2.7,5.1,1.9,virginica\n103,7.1,3.0,5.9,2.1,virginica\n104,6.3,2.9,5.6,1.8,virginica\n105,6.5,3.0,5.8,2.2,virginica\n106,7.6,3.0,6.6,2.1,virginica\n107,4.9,2.5,4.5,1.7,virginica\n108,7.3,2.9,6.3,1.8,virginica\n109,6.7,2.5,5.8,1.8,virginica\n110,7.2,3.6,6.1,2.5,virginica\n111,6.5,3.2,5.1,2.0,virginica\n112,6.4,2.7,5.3,1.9,virginica\n113,6.8,3.0,5.5,2.1,virginica\n114,5.7,2.5,5.0,2.0,virginica\n115,5.8,2.8,5.1,2.4,virginica\n116,6.4,3.2,5.3,2.3,virginica\n117,6.5,3.0,5.5,1.8,virginica\n118,7.7,3.8,6.7,2.2,virginica\n119,7.7,2.6,6.9,2.3,virginica\n120,6.0,2.2,5.0,1.5,virginica\n121,6.9,3.2,5.7,2.3,virginica\n122,5.6,2.8,4.9,2.0,virginica\n123,7.7,2.8,6.7,2.0,virginica\n124,6.3,2.7,4.9,1.8,virginica\n125,6.7,3.3,5.7,2.1,virginica\n126,7.2,3.2,6.0,1.8,virginica\n127,6.2,2.8,4.8,1.8,virginica\n128,6.1,3.0,4.9,1.8,virginica\n129,6.4,2.8,5.6,2.1,virginica\n130,7.2,3.0,5.8,1.6,virginica\n131,7.4,2.8,6.1,1.9,virginica\n132,7.9,3.8,6.4,2.0,virginica\n133,6.4,2.8,5.6,2.2,virginica\n134,6.3,2.8,5.1,1.5,virginica\n135,6.1,2.6,5.6,1.4,virginica\n136,7.7,3.0,6.1,2.3,virginica\n137,6.3,3.4,5.6,2.4,virginica\n138,6.4,3.1,5.5,1.8,virginica\n139,6.0,3.0,4.8,1.8,virginica\n140,6.9,3.1,5.4,2.1,virginica\n141,6.7,3.1,5.6,2.4,virginica\n142,6.9,3.1,5.1,2.3,virginica\n143,5.8,2.7,5.1,1.9,virginica\n144,6.8,3.2,5.9,2.3,virginica\n145,6.7,3.3,5.7,2.5,virginica\n146,6.7,3.0,5.2,2.3,virginica\n147,6.3,2.5,5.0,1.9,virginica\n148,6.5,3.0,5.2,2.0,virginica\n149,6.2,3.4,5.4,2.3,virginica\n150,5.9,3.0,5.1,1.8,virginica\n","format":{"type":"csv"}}},{"mark":{"type":"line","tooltip":true},"encoding":{"color":{"field":"species","type":"nominal"},"x":{"field":"sepal-width","type":"quantitative"},"y":{"field":"sepal-length","type":"quantitative"}},"data":{"values":"rownames,sepal-length,sepal-width,petal-length,petal-width,species\n1,5.055715259629592,3.5,1.4,0.2,setosa\n2,4.71047040109079,3.0,1.4,0.2,setosa\n3,4.848568344506311,3.2,1.3,0.2,setosa\n4,4.77951937279855,3.1,1.5,0.2,setosa\n5,5.124764231337354,3.6,1.4,0.2,setosa\n6,5.3319111464606355,3.9,1.7,0.4,setosa\n7,4.986666287921832,3.4,1.4,0.3,setosa\n8,4.986666287921832,3.4,1.5,0.2,setosa\n9,4.641421429383028,2.9,1.4,0.2,setosa\n10,4.77951937279855,3.1,1.5,0.1,setosa\n11,5.193813203045114,3.7,1.5,0.2,setosa\n12,4.986666287921832,3.4,1.6,0.2,setosa\n13,4.71047040109079,3.0,1.4,0.1,setosa\n14,4.71047040109079,3.0,1.1,0.1,setosa\n15,5.4009601181683955,4.0,1.2,0.2,setosa\n16,5.677156004999438,4.4,1.5,0.4,setosa\n17,5.3319111464606355,3.9,1.3,0.4,setosa\n18,5.055715259629592,3.5,1.4,0.3,setosa\n19,5.262862174752874,3.8,1.7,0.3,setosa\n20,5.262862174752874,3.8,1.5,0.3,setosa\n21,4.986666287921832,3.4,1.7,0.2,setosa\n22,5.193813203045114,3.7,1.5,0.4,setosa\n23,5.124764231337354,3.6,1.0,0.2,setosa\n24,4.917617316214071,3.3,1.7,0.5,setosa\n25,4.986666287921832,3.4,1.9,0.2,setosa\n26,4.71047040109079,3.0,1.6,0.2,setosa\n27,4.986666287921832,3.4,1.6,0.4,setosa\n28,5.055715259629592,3.5,1.5,0.2,setosa\n29,4.986666287921832,3.4,1.4,0.2,setosa\n30,4.848568344506311,3.2,1.6,0.2,setosa\n31,4.77951937279855,3.1,1.6,0.2,setosa\n32,4.986666287921832,3.4,1.5,0.4,setosa\n33,5.4700090898761555,4.1,1.5,0.1,setosa\n34,5.539058061583917,4.2,1.4,0.2,setosa\n35,4.77951937279855,3.1,1.5,0.2,setosa\n36,4.848568344506311,3.2,1.2,0.2,setosa\n37,5.055715259629592,3.5,1.3,0.2,setosa\n38,5.124764231337354,3.6,1.4,0.1,setosa\n39,4.71047040109079,3.0,1.3,0.2,setosa\n40,4.986666287921832,3.4,1.5,0.2,setosa\n41,5.055715259629592,3.5,1.3,0.3,setosa\n42,4.227127599136464,2.3,1.3,0.3,setosa\n43,4.848568344506311,3.2,1.3,0.2,setosa\n44,5.055715259629592,3.5,1.6,0.6,setosa\n45,5.262862174752874,3.8,1.9,0.4,setosa\n46,4.71047040109079,3.0,1.4,0.3,setosa\n47,5.262862174752874,3.8,1.6,0.2,setosa\n48,4.848568344506311,3.2,1.4,0.2,setosa\n49,5.193813203045114,3.7,1.5,0.2,setosa\n50,4.917617316214071,3.3,1.4,0.2,setosa\n51,6.307983419689125,3.2,4.7,1.4,versicolor\n52,6.307983419689125,3.2,4.5,1.5,versicolor\n53,6.2214756476684,3.1,4.9,1.5,versicolor\n54,5.529413471502593,2.3,4.0,1.3,versicolor\n55,5.961952331606222,2.8,4.6,1.5,versicolor\n56,5.961952331606222,2.8,4.5,1.3,versicolor\n57,6.39449119170985,3.3,4.7,1.6,versicolor\n58,5.615921243523319,2.4,3.3,1.0,versicolor\n59,6.048460103626947,2.9,4.6,1.3,versicolor\n60,5.875444559585497,2.7,3.9,1.4,versicolor\n61,5.269890155440416,2.0,3.5,1.0,versicolor\n62,6.134967875647674,3.0,4.2,1.5,versicolor\n63,5.4429056994818685,2.2,4.0,1.0,versicolor\n64,6.048460103626947,2.9,4.7,1.4,versicolor\n65,6.048460103626947,2.9,3.6,1.3,versicolor\n66,6.2214756476684,3.1,4.4,1.4,versicolor\n67,6.134967875647674,3.0,4.5,1.5,versicolor\n68,5.875444559585497,2.7,4.1,1.0,versicolor\n69,5.4429056994818685,2.2,4.5,1.5,versicolor\n70,5.702429015544045,2.5,3.9,1.1,versicolor\n71,6.307983419689125,3.2,4.8,1.8,versicolor\n72,5.961952331606222,2.8,4.0,1.3,versicolor\n73,5.702429015544045,2.5,4.9,1.5,versicolor\n74,5.961952331606222,2.8,4.7,1.2,versicolor\n75,6.048460103626947,2.9,4.3,1.3,versicolor\n76,6.134967875647674,3.0,4.4,1.4,versicolor\n77,5.961952331606222,2.8,4.8,1.4,versicolor\n78,6.134967875647674,3.0,5.0,1.7,versicolor\n79,6.048460103626947,2.9,4.5,1.5,versicolor\n80,5.78893678756477,2.6,3.5,1.0,versicolor\n81,5.615921243523319,2.4,3.8,1.1,versicolor\n82,5.615921243523319,2.4,3.7,1.0,versicolor\n83,5.875444559585497,2.7,3.9,1.2,versicolor\n84,5.875444559585497,2.7,5.1,1.6,versicolor\n85,6.134967875647674,3.0,4.5,1.5,versicolor\n86,6.480998963730577,3.4,4.5,1.6,versicolor\n87,6.2214756476684,3.1,4.7,1.5,versicolor\n88,5.529413471502593,2.3,4.4,1.3,versicolor\n89,6.134967875647674,3.0,4.1,1.3,versicolor\n90,5.702429015544045,2.5,4.0,1.3,versicolor\n91,5.78893678756477,2.6,4.4,1.2,versicolor\n92,6.134967875647674,3.0,4.6,1.4,versicolor\n93,5.78893678756477,2.6,4.0,1.2,versicolor\n94,5.529413471502593,2.3,3.3,1.0,versicolor\n95,5.875444559585497,2.7,4.2,1.3,versicolor\n96,6.134967875647674,3.0,4.2,1.2,versicolor\n97,6.048460103626947,2.9,4.2,1.3,versicolor\n98,6.048460103626947,2.9,4.3,1.3,versicolor\n99,5.702429015544045,2.5,3.0,1.1,versicolor\n100,5.961952331606222,2.8,4.1,1.3,versicolor\n101,6.881900239394058,3.3,6.0,2.5,virginica\n102,6.3409795533927245,2.7,5.1,1.9,virginica\n103,6.611439896393391,3.0,5.9,2.1,virginica\n104,6.521286448726502,2.9,5.6,1.8,virginica\n105,6.611439896393391,3.0,5.8,2.2,virginica\n106,6.611439896393391,3.0,6.6,2.1,virginica\n107,6.160672658058946,2.5,4.5,1.7,virginica\n108,6.521286448726502,2.9,6.3,1.8,virginica\n109,6.160672658058946,2.5,5.8,1.8,virginica\n110,7.152360582394726,3.6,6.1,2.5,virginica\n111,6.79174679172717,3.2,5.1,2.0,virginica\n112,6.3409795533927245,2.7,5.3,1.9,virginica\n113,6.611439896393391,3.0,5.5,2.1,virginica\n114,6.160672658058946,2.5,5.0,2.0,virginica\n115,6.431133001059613,2.8,5.1,2.4,virginica\n116,6.79174679172717,3.2,5.3,2.3,virginica\n117,6.611439896393391,3.0,5.5,1.8,virginica\n118,7.332667477728505,3.8,6.7,2.2,virginica\n119,6.250826105725835,2.6,6.9,2.3,virginica\n120,5.890212315058278,2.2,5.0,1.5,virginica\n121,6.79174679172717,3.2,5.7,2.3,virginica\n122,6.431133001059613,2.8,4.9,2.0,virginica\n123,6.431133001059613,2.8,6.7,2.0,virginica\n124,6.3409795533927245,2.7,4.9,1.8,virginica\n125,6.881900239394058,3.3,5.7,2.1,virginica\n126,6.79174679172717,3.2,6.0,1.8,virginica\n127,6.431133001059613,2.8,4.8,1.8,virginica\n128,6.611439896393391,3.0,4.9,1.8,virginica\n129,6.431133001059613,2.8,5.6,2.1,virginica\n130,6.611439896393391,3.0,5.8,1.6,virginica\n131,6.431133001059613,2.8,6.1,1.9,virginica\n132,7.332667477728505,3.8,6.4,2.0,virginica\n133,6.431133001059613,2.8,5.6,2.2,virginica\n134,6.431133001059613,2.8,5.1,1.5,virginica\n135,6.250826105725835,2.6,5.6,1.4,virginica\n136,6.611439896393391,3.0,6.1,2.3,virginica\n137,6.9720536870609475,3.4,5.6,2.4,virginica\n138,6.701593344060281,3.1,5.5,1.8,virginica\n139,6.611439896393391,3.0,4.8,1.8,virginica\n140,6.701593344060281,3.1,5.4,2.1,virginica\n141,6.701593344060281,3.1,5.6,2.4,virginica\n142,6.701593344060281,3.1,5.1,2.3,virginica\n143,6.3409795533927245,2.7,5.1,1.9,virginica\n144,6.79174679172717,3.2,5.9,2.3,virginica\n145,6.881900239394058,3.3,5.7,2.5,virginica\n146,6.611439896393391,3.0,5.2,2.3,virginica\n147,6.160672658058946,2.5,5.0,1.9,virginica\n148,6.611439896393391,3.0,5.2,2.0,virginica\n149,6.9720536870609475,3.4,5.4,2.3,virginica\n150,6.611439896393391,3.0,5.1,1.8,virginica\n","format":{"type":"csv"}}}],"height":300,"data":{"url":"hanamicloth.walkthrough_files\/0.csv","format":{"type":"csv"}}});</script></div>
<p>This happened because the <code>:color</code> field was <code>:species</code>, which is of <code>:nominal</code> type.</p>
<p>But we may override this using the <code>:group</code> key. For example, let us avoid grouping:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb34"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> iris</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>    (hanami/base #<span class="at">:hanami</span>{<span class="at">:title</span> <span class="st">"dummy"</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:mark-color</span> <span class="st">"green"</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:color</span> <span class="at">:species</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:group</span> []</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:x</span> <span class="at">:sepal-width</span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:y</span> <span class="at">:sepal-length</span>})</span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>    hanami/layer-point</span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>    hanami/layer-smooth)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div><script>vegaEmbed(document.currentScript.parentElement, {"encoding":{"color":{"field":"species","type":"nominal"},"x":{"field":"sepal-width","type":"quantitative"},"y":{"field":"sepal-length","type":"quantitative"}},"usermeta":{"embedOptions":{"renderer":"svg"}},"width":400,"background":"floralwhite","title":"dummy","layer":[{"mark":{"type":"circle","color":"green","tooltip":true},"encoding":{"color":{"field":"species","type":"nominal"},"x":{"field":"sepal-width","type":"quantitative"},"y":{"field":"sepal-length","type":"quantitative"}},"data":{"values":"rownames,sepal-length,sepal-width,petal-length,petal-width,species\n1,5.1,3.5,1.4,0.2,setosa\n2,4.9,3.0,1.4,0.2,setosa\n3,4.7,3.2,1.3,0.2,setosa\n4,4.6,3.1,1.5,0.2,setosa\n5,5.0,3.6,1.4,0.2,setosa\n6,5.4,3.9,1.7,0.4,setosa\n7,4.6,3.4,1.4,0.3,setosa\n8,5.0,3.4,1.5,0.2,setosa\n9,4.4,2.9,1.4,0.2,setosa\n10,4.9,3.1,1.5,0.1,setosa\n11,5.4,3.7,1.5,0.2,setosa\n12,4.8,3.4,1.6,0.2,setosa\n13,4.8,3.0,1.4,0.1,setosa\n14,4.3,3.0,1.1,0.1,setosa\n15,5.8,4.0,1.2,0.2,setosa\n16,5.7,4.4,1.5,0.4,setosa\n17,5.4,3.9,1.3,0.4,setosa\n18,5.1,3.5,1.4,0.3,setosa\n19,5.7,3.8,1.7,0.3,setosa\n20,5.1,3.8,1.5,0.3,setosa\n21,5.4,3.4,1.7,0.2,setosa\n22,5.1,3.7,1.5,0.4,setosa\n23,4.6,3.6,1.0,0.2,setosa\n24,5.1,3.3,1.7,0.5,setosa\n25,4.8,3.4,1.9,0.2,setosa\n26,5.0,3.0,1.6,0.2,setosa\n27,5.0,3.4,1.6,0.4,setosa\n28,5.2,3.5,1.5,0.2,setosa\n29,5.2,3.4,1.4,0.2,setosa\n30,4.7,3.2,1.6,0.2,setosa\n31,4.8,3.1,1.6,0.2,setosa\n32,5.4,3.4,1.5,0.4,setosa\n33,5.2,4.1,1.5,0.1,setosa\n34,5.5,4.2,1.4,0.2,setosa\n35,4.9,3.1,1.5,0.2,setosa\n36,5.0,3.2,1.2,0.2,setosa\n37,5.5,3.5,1.3,0.2,setosa\n38,4.9,3.6,1.4,0.1,setosa\n39,4.4,3.0,1.3,0.2,setosa\n40,5.1,3.4,1.5,0.2,setosa\n41,5.0,3.5,1.3,0.3,setosa\n42,4.5,2.3,1.3,0.3,setosa\n43,4.4,3.2,1.3,0.2,setosa\n44,5.0,3.5,1.6,0.6,setosa\n45,5.1,3.8,1.9,0.4,setosa\n46,4.8,3.0,1.4,0.3,setosa\n47,5.1,3.8,1.6,0.2,setosa\n48,4.6,3.2,1.4,0.2,setosa\n49,5.3,3.7,1.5,0.2,setosa\n50,5.0,3.3,1.4,0.2,setosa\n51,7.0,3.2,4.7,1.4,versicolor\n52,6.4,3.2,4.5,1.5,versicolor\n53,6.9,3.1,4.9,1.5,versicolor\n54,5.5,2.3,4.0,1.3,versicolor\n55,6.5,2.8,4.6,1.5,versicolor\n56,5.7,2.8,4.5,1.3,versicolor\n57,6.3,3.3,4.7,1.6,versicolor\n58,4.9,2.4,3.3,1.0,versicolor\n59,6.6,2.9,4.6,1.3,versicolor\n60,5.2,2.7,3.9,1.4,versicolor\n61,5.0,2.0,3.5,1.0,versicolor\n62,5.9,3.0,4.2,1.5,versicolor\n63,6.0,2.2,4.0,1.0,versicolor\n64,6.1,2.9,4.7,1.4,versicolor\n65,5.6,2.9,3.6,1.3,versicolor\n66,6.7,3.1,4.4,1.4,versicolor\n67,5.6,3.0,4.5,1.5,versicolor\n68,5.8,2.7,4.1,1.0,versicolor\n69,6.2,2.2,4.5,1.5,versicolor\n70,5.6,2.5,3.9,1.1,versicolor\n71,5.9,3.2,4.8,1.8,versicolor\n72,6.1,2.8,4.0,1.3,versicolor\n73,6.3,2.5,4.9,1.5,versicolor\n74,6.1,2.8,4.7,1.2,versicolor\n75,6.4,2.9,4.3,1.3,versicolor\n76,6.6,3.0,4.4,1.4,versicolor\n77,6.8,2.8,4.8,1.4,versicolor\n78,6.7,3.0,5.0,1.7,versicolor\n79,6.0,2.9,4.5,1.5,versicolor\n80,5.7,2.6,3.5,1.0,versicolor\n81,5.5,2.4,3.8,1.1,versicolor\n82,5.5,2.4,3.7,1.0,versicolor\n83,5.8,2.7,3.9,1.2,versicolor\n84,6.0,2.7,5.1,1.6,versicolor\n85,5.4,3.0,4.5,1.5,versicolor\n86,6.0,3.4,4.5,1.6,versicolor\n87,6.7,3.1,4.7,1.5,versicolor\n88,6.3,2.3,4.4,1.3,versicolor\n89,5.6,3.0,4.1,1.3,versicolor\n90,5.5,2.5,4.0,1.3,versicolor\n91,5.5,2.6,4.4,1.2,versicolor\n92,6.1,3.0,4.6,1.4,versicolor\n93,5.8,2.6,4.0,1.2,versicolor\n94,5.0,2.3,3.3,1.0,versicolor\n95,5.6,2.7,4.2,1.3,versicolor\n96,5.7,3.0,4.2,1.2,versicolor\n97,5.7,2.9,4.2,1.3,versicolor\n98,6.2,2.9,4.3,1.3,versicolor\n99,5.1,2.5,3.0,1.1,versicolor\n100,5.7,2.8,4.1,1.3,versicolor\n101,6.3,3.3,6.0,2.5,virginica\n102,5.8,2.7,5.1,1.9,virginica\n103,7.1,3.0,5.9,2.1,virginica\n104,6.3,2.9,5.6,1.8,virginica\n105,6.5,3.0,5.8,2.2,virginica\n106,7.6,3.0,6.6,2.1,virginica\n107,4.9,2.5,4.5,1.7,virginica\n108,7.3,2.9,6.3,1.8,virginica\n109,6.7,2.5,5.8,1.8,virginica\n110,7.2,3.6,6.1,2.5,virginica\n111,6.5,3.2,5.1,2.0,virginica\n112,6.4,2.7,5.3,1.9,virginica\n113,6.8,3.0,5.5,2.1,virginica\n114,5.7,2.5,5.0,2.0,virginica\n115,5.8,2.8,5.1,2.4,virginica\n116,6.4,3.2,5.3,2.3,virginica\n117,6.5,3.0,5.5,1.8,virginica\n118,7.7,3.8,6.7,2.2,virginica\n119,7.7,2.6,6.9,2.3,virginica\n120,6.0,2.2,5.0,1.5,virginica\n121,6.9,3.2,5.7,2.3,virginica\n122,5.6,2.8,4.9,2.0,virginica\n123,7.7,2.8,6.7,2.0,virginica\n124,6.3,2.7,4.9,1.8,virginica\n125,6.7,3.3,5.7,2.1,virginica\n126,7.2,3.2,6.0,1.8,virginica\n127,6.2,2.8,4.8,1.8,virginica\n128,6.1,3.0,4.9,1.8,virginica\n129,6.4,2.8,5.6,2.1,virginica\n130,7.2,3.0,5.8,1.6,virginica\n131,7.4,2.8,6.1,1.9,virginica\n132,7.9,3.8,6.4,2.0,virginica\n133,6.4,2.8,5.6,2.2,virginica\n134,6.3,2.8,5.1,1.5,virginica\n135,6.1,2.6,5.6,1.4,virginica\n136,7.7,3.0,6.1,2.3,virginica\n137,6.3,3.4,5.6,2.4,virginica\n138,6.4,3.1,5.5,1.8,virginica\n139,6.0,3.0,4.8,1.8,virginica\n140,6.9,3.1,5.4,2.1,virginica\n141,6.7,3.1,5.6,2.4,virginica\n142,6.9,3.1,5.1,2.3,virginica\n143,5.8,2.7,5.1,1.9,virginica\n144,6.8,3.2,5.9,2.3,virginica\n145,6.7,3.3,5.7,2.5,virginica\n146,6.7,3.0,5.2,2.3,virginica\n147,6.3,2.5,5.0,1.9,virginica\n148,6.5,3.0,5.2,2.0,virginica\n149,6.2,3.4,5.4,2.3,virginica\n150,5.9,3.0,5.1,1.8,virginica\n","format":{"type":"csv"}}},{"mark":{"type":"line","color":"green","tooltip":true},"encoding":{"color":{"field":"species","type":"nominal"},"x":{"field":"sepal-width","type":"quantitative"},"y":{"field":"sepal-length","type":"quantitative"}},"data":{"values":"rownames,sepal-length,sepal-width,petal-length,petal-width,species\n1,5.744458836939828,3.5,1.4,0.2,setosa\n2,5.85613936750478,3.0,1.4,0.2,setosa\n3,5.811467155278799,3.2,1.3,0.2,setosa\n4,5.83380326139179,3.1,1.5,0.2,setosa\n5,5.722122730826838,3.6,1.4,0.2,setosa\n6,5.655114412487867,3.9,1.7,0.4,setosa\n7,5.766794943052819,3.4,1.4,0.3,setosa\n8,5.766794943052819,3.4,1.5,0.2,setosa\n9,5.878475473617771,2.9,1.4,0.2,setosa\n10,5.83380326139179,3.1,1.5,0.1,setosa\n11,5.699786624713847,3.7,1.5,0.2,setosa\n12,5.766794943052819,3.4,1.6,0.2,setosa\n13,5.85613936750478,3.0,1.4,0.1,setosa\n14,5.85613936750478,3.0,1.1,0.1,setosa\n15,5.632778306374877,4.0,1.2,0.2,setosa\n16,5.543433881922915,4.4,1.5,0.4,setosa\n17,5.655114412487867,3.9,1.3,0.4,setosa\n18,5.744458836939828,3.5,1.4,0.3,setosa\n19,5.677450518600858,3.8,1.7,0.3,setosa\n20,5.677450518600858,3.8,1.5,0.3,setosa\n21,5.766794943052819,3.4,1.7,0.2,setosa\n22,5.699786624713847,3.7,1.5,0.4,setosa\n23,5.722122730826838,3.6,1.0,0.2,setosa\n24,5.7891310491658095,3.3,1.7,0.5,setosa\n25,5.766794943052819,3.4,1.9,0.2,setosa\n26,5.85613936750478,3.0,1.6,0.2,setosa\n27,5.766794943052819,3.4,1.6,0.4,setosa\n28,5.744458836939828,3.5,1.5,0.2,setosa\n29,5.766794943052819,3.4,1.4,0.2,setosa\n30,5.811467155278799,3.2,1.6,0.2,setosa\n31,5.83380326139179,3.1,1.6,0.2,setosa\n32,5.766794943052819,3.4,1.5,0.4,setosa\n33,5.610442200261886,4.1,1.5,0.1,setosa\n34,5.588106094148896,4.2,1.4,0.2,setosa\n35,5.83380326139179,3.1,1.5,0.2,setosa\n36,5.811467155278799,3.2,1.2,0.2,setosa\n37,5.744458836939828,3.5,1.3,0.2,setosa\n38,5.722122730826838,3.6,1.4,0.1,setosa\n39,5.85613936750478,3.0,1.3,0.2,setosa\n40,5.766794943052819,3.4,1.5,0.2,setosa\n41,5.744458836939828,3.5,1.3,0.3,setosa\n42,6.012492110295713,2.3,1.3,0.3,setosa\n43,5.811467155278799,3.2,1.3,0.2,setosa\n44,5.744458836939828,3.5,1.6,0.6,setosa\n45,5.677450518600858,3.8,1.9,0.4,setosa\n46,5.85613936750478,3.0,1.4,0.3,setosa\n47,5.677450518600858,3.8,1.6,0.2,setosa\n48,5.811467155278799,3.2,1.4,0.2,setosa\n49,5.699786624713847,3.7,1.5,0.2,setosa\n50,5.7891310491658095,3.3,1.4,0.2,setosa\n51,5.811467155278799,3.2,4.7,1.4,versicolor\n52,5.811467155278799,3.2,4.5,1.5,versicolor\n53,5.83380326139179,3.1,4.9,1.5,versicolor\n54,6.012492110295713,2.3,4.0,1.3,versicolor\n55,5.900811579730761,2.8,4.6,1.5,versicolor\n56,5.900811579730761,2.8,4.5,1.3,versicolor\n57,5.7891310491658095,3.3,4.7,1.6,versicolor\n58,5.990156004182722,2.4,3.3,1.0,versicolor\n59,5.878475473617771,2.9,4.6,1.3,versicolor\n60,5.923147685843751,2.7,3.9,1.4,versicolor\n61,6.079500428634684,2.0,3.5,1.0,versicolor\n62,5.85613936750478,3.0,4.2,1.5,versicolor\n63,6.034828216408703,2.2,4.0,1.0,versicolor\n64,5.878475473617771,2.9,4.7,1.4,versicolor\n65,5.878475473617771,2.9,3.6,1.3,versicolor\n66,5.83380326139179,3.1,4.4,1.4,versicolor\n67,5.85613936750478,3.0,4.5,1.5,versicolor\n68,5.923147685843751,2.7,4.1,1.0,versicolor\n69,6.034828216408703,2.2,4.5,1.5,versicolor\n70,5.967819898069732,2.5,3.9,1.1,versicolor\n71,5.811467155278799,3.2,4.8,1.8,versicolor\n72,5.900811579730761,2.8,4.0,1.3,versicolor\n73,5.967819898069732,2.5,4.9,1.5,versicolor\n74,5.900811579730761,2.8,4.7,1.2,versicolor\n75,5.878475473617771,2.9,4.3,1.3,versicolor\n76,5.85613936750478,3.0,4.4,1.4,versicolor\n77,5.900811579730761,2.8,4.8,1.4,versicolor\n78,5.85613936750478,3.0,5.0,1.7,versicolor\n79,5.878475473617771,2.9,4.5,1.5,versicolor\n80,5.945483791956741,2.6,3.5,1.0,versicolor\n81,5.990156004182722,2.4,3.8,1.1,versicolor\n82,5.990156004182722,2.4,3.7,1.0,versicolor\n83,5.923147685843751,2.7,3.9,1.2,versicolor\n84,5.923147685843751,2.7,5.1,1.6,versicolor\n85,5.85613936750478,3.0,4.5,1.5,versicolor\n86,5.766794943052819,3.4,4.5,1.6,versicolor\n87,5.83380326139179,3.1,4.7,1.5,versicolor\n88,6.012492110295713,2.3,4.4,1.3,versicolor\n89,5.85613936750478,3.0,4.1,1.3,versicolor\n90,5.967819898069732,2.5,4.0,1.3,versicolor\n91,5.945483791956741,2.6,4.4,1.2,versicolor\n92,5.85613936750478,3.0,4.6,1.4,versicolor\n93,5.945483791956741,2.6,4.0,1.2,versicolor\n94,6.012492110295713,2.3,3.3,1.0,versicolor\n95,5.923147685843751,2.7,4.2,1.3,versicolor\n96,5.85613936750478,3.0,4.2,1.2,versicolor\n97,5.878475473617771,2.9,4.2,1.3,versicolor\n98,5.878475473617771,2.9,4.3,1.3,versicolor\n99,5.967819898069732,2.5,3.0,1.1,versicolor\n100,5.900811579730761,2.8,4.1,1.3,versicolor\n101,5.7891310491658095,3.3,6.0,2.5,virginica\n102,5.923147685843751,2.7,5.1,1.9,virginica\n103,5.85613936750478,3.0,5.9,2.1,virginica\n104,5.878475473617771,2.9,5.6,1.8,virginica\n105,5.85613936750478,3.0,5.8,2.2,virginica\n106,5.85613936750478,3.0,6.6,2.1,virginica\n107,5.967819898069732,2.5,4.5,1.7,virginica\n108,5.878475473617771,2.9,6.3,1.8,virginica\n109,5.967819898069732,2.5,5.8,1.8,virginica\n110,5.722122730826838,3.6,6.1,2.5,virginica\n111,5.811467155278799,3.2,5.1,2.0,virginica\n112,5.923147685843751,2.7,5.3,1.9,virginica\n113,5.85613936750478,3.0,5.5,2.1,virginica\n114,5.967819898069732,2.5,5.0,2.0,virginica\n115,5.900811579730761,2.8,5.1,2.4,virginica\n116,5.811467155278799,3.2,5.3,2.3,virginica\n117,5.85613936750478,3.0,5.5,1.8,virginica\n118,5.677450518600858,3.8,6.7,2.2,virginica\n119,5.945483791956741,2.6,6.9,2.3,virginica\n120,6.034828216408703,2.2,5.0,1.5,virginica\n121,5.811467155278799,3.2,5.7,2.3,virginica\n122,5.900811579730761,2.8,4.9,2.0,virginica\n123,5.900811579730761,2.8,6.7,2.0,virginica\n124,5.923147685843751,2.7,4.9,1.8,virginica\n125,5.7891310491658095,3.3,5.7,2.1,virginica\n126,5.811467155278799,3.2,6.0,1.8,virginica\n127,5.900811579730761,2.8,4.8,1.8,virginica\n128,5.85613936750478,3.0,4.9,1.8,virginica\n129,5.900811579730761,2.8,5.6,2.1,virginica\n130,5.85613936750478,3.0,5.8,1.6,virginica\n131,5.900811579730761,2.8,6.1,1.9,virginica\n132,5.677450518600858,3.8,6.4,2.0,virginica\n133,5.900811579730761,2.8,5.6,2.2,virginica\n134,5.900811579730761,2.8,5.1,1.5,virginica\n135,5.945483791956741,2.6,5.6,1.4,virginica\n136,5.85613936750478,3.0,6.1,2.3,virginica\n137,5.766794943052819,3.4,5.6,2.4,virginica\n138,5.83380326139179,3.1,5.5,1.8,virginica\n139,5.85613936750478,3.0,4.8,1.8,virginica\n140,5.83380326139179,3.1,5.4,2.1,virginica\n141,5.83380326139179,3.1,5.6,2.4,virginica\n142,5.83380326139179,3.1,5.1,2.3,virginica\n143,5.923147685843751,2.7,5.1,1.9,virginica\n144,5.811467155278799,3.2,5.9,2.3,virginica\n145,5.7891310491658095,3.3,5.7,2.5,virginica\n146,5.85613936750478,3.0,5.2,2.3,virginica\n147,5.967819898069732,2.5,5.0,1.9,virginica\n148,5.85613936750478,3.0,5.2,2.0,virginica\n149,5.766794943052819,3.4,5.4,2.3,virginica\n150,5.85613936750478,3.0,5.1,1.8,virginica\n","format":{"type":"csv"}}}],"height":300,"data":{"url":"hanamicloth.walkthrough_files\/0.csv","format":{"type":"csv"}}});</script></div>
</section>
<section id="example-out-of-sample-predictions" class="level2" data-number="2.13">
<h2 data-number="2.13" class="anchored" data-anchor-id="example-out-of-sample-predictions"><span class="header-section-number">2.13</span> Example: out-of-sample predictions</h2>
<p>Here is a slighly more elaborate example inpired by the London Clojurians <a href="https://www.youtube.com/watch?v=eUFf3-og_-Y">talk</a> mentioned in the preface. We use the same regression line for the <code>Past</code> and <code>Future</code> groups. The line is affected only by the past, since in the Future, <code>:y</code> is missing.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb35"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> iris</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>    (tc/concat (tc/dataset {<span class="at">:sepal-width</span> (<span class="kw">range</span> <span class="dv">4</span> <span class="dv">10</span>)</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>                            <span class="at">:sepal-length</span> (<span class="kw">repeat</span> <span class="dv">6</span> <span class="va">nil</span>)}))</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>    (tc/map-columns <span class="at">:relative-time</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>                    [<span class="at">:sepal-length</span>]</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>                    #(<span class="kw">if</span> <span class="va">%</span> <span class="st">"Past"</span> <span class="st">"Future"</span>))</span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>    (hanami/base #<span class="at">:hanami</span>{<span class="at">:x</span> <span class="at">:sepal-width</span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:y</span> <span class="at">:sepal-length</span></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:color</span> <span class="st">"relative-time"</span></span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>                          <span class="at">:group</span> []})</span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a>    hanami/layer-point</span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a>    hanami/layer-smooth)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div><script>vegaEmbed(document.currentScript.parentElement, {"encoding":{"color":{"field":"relative-time","type":"nominal"},"x":{"field":"sepal-width","type":"quantitative"},"y":{"field":"sepal-length","type":"quantitative"}},"usermeta":{"embedOptions":{"renderer":"svg"}},"width":400,"background":"floralwhite","layer":[{"mark":{"type":"circle","tooltip":true},"encoding":{"color":{"field":"relative-time","type":"nominal"},"x":{"field":"sepal-width","type":"quantitative"},"y":{"field":"sepal-length","type":"quantitative"}},"data":{"values":"rownames,sepal-length,sepal-width,petal-length,petal-width,species,relative-time\n1,5.1,3.5,1.4,0.2,setosa,Past\n2,4.9,3.0,1.4,0.2,setosa,Past\n3,4.7,3.2,1.3,0.2,setosa,Past\n4,4.6,3.1,1.5,0.2,setosa,Past\n5,5.0,3.6,1.4,0.2,setosa,Past\n6,5.4,3.9,1.7,0.4,setosa,Past\n7,4.6,3.4,1.4,0.3,setosa,Past\n8,5.0,3.4,1.5,0.2,setosa,Past\n9,4.4,2.9,1.4,0.2,setosa,Past\n10,4.9,3.1,1.5,0.1,setosa,Past\n11,5.4,3.7,1.5,0.2,setosa,Past\n12,4.8,3.4,1.6,0.2,setosa,Past\n13,4.8,3.0,1.4,0.1,setosa,Past\n14,4.3,3.0,1.1,0.1,setosa,Past\n15,5.8,4.0,1.2,0.2,setosa,Past\n16,5.7,4.4,1.5,0.4,setosa,Past\n17,5.4,3.9,1.3,0.4,setosa,Past\n18,5.1,3.5,1.4,0.3,setosa,Past\n19,5.7,3.8,1.7,0.3,setosa,Past\n20,5.1,3.8,1.5,0.3,setosa,Past\n21,5.4,3.4,1.7,0.2,setosa,Past\n22,5.1,3.7,1.5,0.4,setosa,Past\n23,4.6,3.6,1.0,0.2,setosa,Past\n24,5.1,3.3,1.7,0.5,setosa,Past\n25,4.8,3.4,1.9,0.2,setosa,Past\n26,5.0,3.0,1.6,0.2,setosa,Past\n27,5.0,3.4,1.6,0.4,setosa,Past\n28,5.2,3.5,1.5,0.2,setosa,Past\n29,5.2,3.4,1.4,0.2,setosa,Past\n30,4.7,3.2,1.6,0.2,setosa,Past\n31,4.8,3.1,1.6,0.2,setosa,Past\n32,5.4,3.4,1.5,0.4,setosa,Past\n33,5.2,4.1,1.5,0.1,setosa,Past\n34,5.5,4.2,1.4,0.2,setosa,Past\n35,4.9,3.1,1.5,0.2,setosa,Past\n36,5.0,3.2,1.2,0.2,setosa,Past\n37,5.5,3.5,1.3,0.2,setosa,Past\n38,4.9,3.6,1.4,0.1,setosa,Past\n39,4.4,3.0,1.3,0.2,setosa,Past\n40,5.1,3.4,1.5,0.2,setosa,Past\n41,5.0,3.5,1.3,0.3,setosa,Past\n42,4.5,2.3,1.3,0.3,setosa,Past\n43,4.4,3.2,1.3,0.2,setosa,Past\n44,5.0,3.5,1.6,0.6,setosa,Past\n45,5.1,3.8,1.9,0.4,setosa,Past\n46,4.8,3.0,1.4,0.3,setosa,Past\n47,5.1,3.8,1.6,0.2,setosa,Past\n48,4.6,3.2,1.4,0.2,setosa,Past\n49,5.3,3.7,1.5,0.2,setosa,Past\n50,5.0,3.3,1.4,0.2,setosa,Past\n51,7.0,3.2,4.7,1.4,versicolor,Past\n52,6.4,3.2,4.5,1.5,versicolor,Past\n53,6.9,3.1,4.9,1.5,versicolor,Past\n54,5.5,2.3,4.0,1.3,versicolor,Past\n55,6.5,2.8,4.6,1.5,versicolor,Past\n56,5.7,2.8,4.5,1.3,versicolor,Past\n57,6.3,3.3,4.7,1.6,versicolor,Past\n58,4.9,2.4,3.3,1.0,versicolor,Past\n59,6.6,2.9,4.6,1.3,versicolor,Past\n60,5.2,2.7,3.9,1.4,versicolor,Past\n61,5.0,2.0,3.5,1.0,versicolor,Past\n62,5.9,3.0,4.2,1.5,versicolor,Past\n63,6.0,2.2,4.0,1.0,versicolor,Past\n64,6.1,2.9,4.7,1.4,versicolor,Past\n65,5.6,2.9,3.6,1.3,versicolor,Past\n66,6.7,3.1,4.4,1.4,versicolor,Past\n67,5.6,3.0,4.5,1.5,versicolor,Past\n68,5.8,2.7,4.1,1.0,versicolor,Past\n69,6.2,2.2,4.5,1.5,versicolor,Past\n70,5.6,2.5,3.9,1.1,versicolor,Past\n71,5.9,3.2,4.8,1.8,versicolor,Past\n72,6.1,2.8,4.0,1.3,versicolor,Past\n73,6.3,2.5,4.9,1.5,versicolor,Past\n74,6.1,2.8,4.7,1.2,versicolor,Past\n75,6.4,2.9,4.3,1.3,versicolor,Past\n76,6.6,3.0,4.4,1.4,versicolor,Past\n77,6.8,2.8,4.8,1.4,versicolor,Past\n78,6.7,3.0,5.0,1.7,versicolor,Past\n79,6.0,2.9,4.5,1.5,versicolor,Past\n80,5.7,2.6,3.5,1.0,versicolor,Past\n81,5.5,2.4,3.8,1.1,versicolor,Past\n82,5.5,2.4,3.7,1.0,versicolor,Past\n83,5.8,2.7,3.9,1.2,versicolor,Past\n84,6.0,2.7,5.1,1.6,versicolor,Past\n85,5.4,3.0,4.5,1.5,versicolor,Past\n86,6.0,3.4,4.5,1.6,versicolor,Past\n87,6.7,3.1,4.7,1.5,versicolor,Past\n88,6.3,2.3,4.4,1.3,versicolor,Past\n89,5.6,3.0,4.1,1.3,versicolor,Past\n90,5.5,2.5,4.0,1.3,versicolor,Past\n91,5.5,2.6,4.4,1.2,versicolor,Past\n92,6.1,3.0,4.6,1.4,versicolor,Past\n93,5.8,2.6,4.0,1.2,versicolor,Past\n94,5.0,2.3,3.3,1.0,versicolor,Past\n95,5.6,2.7,4.2,1.3,versicolor,Past\n96,5.7,3.0,4.2,1.2,versicolor,Past\n97,5.7,2.9,4.2,1.3,versicolor,Past\n98,6.2,2.9,4.3,1.3,versicolor,Past\n99,5.1,2.5,3.0,1.1,versicolor,Past\n100,5.7,2.8,4.1,1.3,versicolor,Past\n101,6.3,3.3,6.0,2.5,virginica,Past\n102,5.8,2.7,5.1,1.9,virginica,Past\n103,7.1,3.0,5.9,2.1,virginica,Past\n104,6.3,2.9,5.6,1.8,virginica,Past\n105,6.5,3.0,5.8,2.2,virginica,Past\n106,7.6,3.0,6.6,2.1,virginica,Past\n107,4.9,2.5,4.5,1.7,virginica,Past\n108,7.3,2.9,6.3,1.8,virginica,Past\n109,6.7,2.5,5.8,1.8,virginica,Past\n110,7.2,3.6,6.1,2.5,virginica,Past\n111,6.5,3.2,5.1,2.0,virginica,Past\n112,6.4,2.7,5.3,1.9,virginica,Past\n113,6.8,3.0,5.5,2.1,virginica,Past\n114,5.7,2.5,5.0,2.0,virginica,Past\n115,5.8,2.8,5.1,2.4,virginica,Past\n116,6.4,3.2,5.3,2.3,virginica,Past\n117,6.5,3.0,5.5,1.8,virginica,Past\n118,7.7,3.8,6.7,2.2,virginica,Past\n119,7.7,2.6,6.9,2.3,virginica,Past\n120,6.0,2.2,5.0,1.5,virginica,Past\n121,6.9,3.2,5.7,2.3,virginica,Past\n122,5.6,2.8,4.9,2.0,virginica,Past\n123,7.7,2.8,6.7,2.0,virginica,Past\n124,6.3,2.7,4.9,1.8,virginica,Past\n125,6.7,3.3,5.7,2.1,virginica,Past\n126,7.2,3.2,6.0,1.8,virginica,Past\n127,6.2,2.8,4.8,1.8,virginica,Past\n128,6.1,3.0,4.9,1.8,virginica,Past\n129,6.4,2.8,5.6,2.1,virginica,Past\n130,7.2,3.0,5.8,1.6,virginica,Past\n131,7.4,2.8,6.1,1.9,virginica,Past\n132,7.9,3.8,6.4,2.0,virginica,Past\n133,6.4,2.8,5.6,2.2,virginica,Past\n134,6.3,2.8,5.1,1.5,virginica,Past\n135,6.1,2.6,5.6,1.4,virginica,Past\n136,7.7,3.0,6.1,2.3,virginica,Past\n137,6.3,3.4,5.6,2.4,virginica,Past\n138,6.4,3.1,5.5,1.8,virginica,Past\n139,6.0,3.0,4.8,1.8,virginica,Past\n140,6.9,3.1,5.4,2.1,virginica,Past\n141,6.7,3.1,5.6,2.4,virginica,Past\n142,6.9,3.1,5.1,2.3,virginica,Past\n143,5.8,2.7,5.1,1.9,virginica,Past\n144,6.8,3.2,5.9,2.3,virginica,Past\n145,6.7,3.3,5.7,2.5,virginica,Past\n146,6.7,3.0,5.2,2.3,virginica,Past\n147,6.3,2.5,5.0,1.9,virginica,Past\n148,6.5,3.0,5.2,2.0,virginica,Past\n149,6.2,3.4,5.4,2.3,virginica,Past\n150,5.9,3.0,5.1,1.8,virginica,Past\n,,4.0,,,,Future\n,,5.0,,,,Future\n,,6.0,,,,Future\n,,7.0,,,,Future\n,,8.0,,,,Future\n,,9.0,,,,Future\n","format":{"type":"csv"}}},{"mark":{"type":"line","tooltip":true},"encoding":{"color":{"field":"relative-time","type":"nominal"},"x":{"field":"sepal-width","type":"quantitative"},"y":{"field":"sepal-length","type":"quantitative"}},"data":{"values":"rownames,sepal-length,sepal-width,petal-length,petal-width,species,relative-time\n1,5.744458836939828,3.5,1.4,0.2,setosa,Past\n2,5.85613936750478,3.0,1.4,0.2,setosa,Past\n3,5.811467155278799,3.2,1.3,0.2,setosa,Past\n4,5.83380326139179,3.1,1.5,0.2,setosa,Past\n5,5.722122730826838,3.6,1.4,0.2,setosa,Past\n6,5.655114412487867,3.9,1.7,0.4,setosa,Past\n7,5.766794943052819,3.4,1.4,0.3,setosa,Past\n8,5.766794943052819,3.4,1.5,0.2,setosa,Past\n9,5.878475473617771,2.9,1.4,0.2,setosa,Past\n10,5.83380326139179,3.1,1.5,0.1,setosa,Past\n11,5.699786624713847,3.7,1.5,0.2,setosa,Past\n12,5.766794943052819,3.4,1.6,0.2,setosa,Past\n13,5.85613936750478,3.0,1.4,0.1,setosa,Past\n14,5.85613936750478,3.0,1.1,0.1,setosa,Past\n15,5.632778306374877,4.0,1.2,0.2,setosa,Past\n16,5.543433881922915,4.4,1.5,0.4,setosa,Past\n17,5.655114412487867,3.9,1.3,0.4,setosa,Past\n18,5.744458836939828,3.5,1.4,0.3,setosa,Past\n19,5.677450518600858,3.8,1.7,0.3,setosa,Past\n20,5.677450518600858,3.8,1.5,0.3,setosa,Past\n21,5.766794943052819,3.4,1.7,0.2,setosa,Past\n22,5.699786624713847,3.7,1.5,0.4,setosa,Past\n23,5.722122730826838,3.6,1.0,0.2,setosa,Past\n24,5.7891310491658095,3.3,1.7,0.5,setosa,Past\n25,5.766794943052819,3.4,1.9,0.2,setosa,Past\n26,5.85613936750478,3.0,1.6,0.2,setosa,Past\n27,5.766794943052819,3.4,1.6,0.4,setosa,Past\n28,5.744458836939828,3.5,1.5,0.2,setosa,Past\n29,5.766794943052819,3.4,1.4,0.2,setosa,Past\n30,5.811467155278799,3.2,1.6,0.2,setosa,Past\n31,5.83380326139179,3.1,1.6,0.2,setosa,Past\n32,5.766794943052819,3.4,1.5,0.4,setosa,Past\n33,5.610442200261886,4.1,1.5,0.1,setosa,Past\n34,5.588106094148896,4.2,1.4,0.2,setosa,Past\n35,5.83380326139179,3.1,1.5,0.2,setosa,Past\n36,5.811467155278799,3.2,1.2,0.2,setosa,Past\n37,5.744458836939828,3.5,1.3,0.2,setosa,Past\n38,5.722122730826838,3.6,1.4,0.1,setosa,Past\n39,5.85613936750478,3.0,1.3,0.2,setosa,Past\n40,5.766794943052819,3.4,1.5,0.2,setosa,Past\n41,5.744458836939828,3.5,1.3,0.3,setosa,Past\n42,6.012492110295713,2.3,1.3,0.3,setosa,Past\n43,5.811467155278799,3.2,1.3,0.2,setosa,Past\n44,5.744458836939828,3.5,1.6,0.6,setosa,Past\n45,5.677450518600858,3.8,1.9,0.4,setosa,Past\n46,5.85613936750478,3.0,1.4,0.3,setosa,Past\n47,5.677450518600858,3.8,1.6,0.2,setosa,Past\n48,5.811467155278799,3.2,1.4,0.2,setosa,Past\n49,5.699786624713847,3.7,1.5,0.2,setosa,Past\n50,5.7891310491658095,3.3,1.4,0.2,setosa,Past\n51,5.811467155278799,3.2,4.7,1.4,versicolor,Past\n52,5.811467155278799,3.2,4.5,1.5,versicolor,Past\n53,5.83380326139179,3.1,4.9,1.5,versicolor,Past\n54,6.012492110295713,2.3,4.0,1.3,versicolor,Past\n55,5.900811579730761,2.8,4.6,1.5,versicolor,Past\n56,5.900811579730761,2.8,4.5,1.3,versicolor,Past\n57,5.7891310491658095,3.3,4.7,1.6,versicolor,Past\n58,5.990156004182722,2.4,3.3,1.0,versicolor,Past\n59,5.878475473617771,2.9,4.6,1.3,versicolor,Past\n60,5.923147685843751,2.7,3.9,1.4,versicolor,Past\n61,6.079500428634684,2.0,3.5,1.0,versicolor,Past\n62,5.85613936750478,3.0,4.2,1.5,versicolor,Past\n63,6.034828216408703,2.2,4.0,1.0,versicolor,Past\n64,5.878475473617771,2.9,4.7,1.4,versicolor,Past\n65,5.878475473617771,2.9,3.6,1.3,versicolor,Past\n66,5.83380326139179,3.1,4.4,1.4,versicolor,Past\n67,5.85613936750478,3.0,4.5,1.5,versicolor,Past\n68,5.923147685843751,2.7,4.1,1.0,versicolor,Past\n69,6.034828216408703,2.2,4.5,1.5,versicolor,Past\n70,5.967819898069732,2.5,3.9,1.1,versicolor,Past\n71,5.811467155278799,3.2,4.8,1.8,versicolor,Past\n72,5.900811579730761,2.8,4.0,1.3,versicolor,Past\n73,5.967819898069732,2.5,4.9,1.5,versicolor,Past\n74,5.900811579730761,2.8,4.7,1.2,versicolor,Past\n75,5.878475473617771,2.9,4.3,1.3,versicolor,Past\n76,5.85613936750478,3.0,4.4,1.4,versicolor,Past\n77,5.900811579730761,2.8,4.8,1.4,versicolor,Past\n78,5.85613936750478,3.0,5.0,1.7,versicolor,Past\n79,5.878475473617771,2.9,4.5,1.5,versicolor,Past\n80,5.945483791956741,2.6,3.5,1.0,versicolor,Past\n81,5.990156004182722,2.4,3.8,1.1,versicolor,Past\n82,5.990156004182722,2.4,3.7,1.0,versicolor,Past\n83,5.923147685843751,2.7,3.9,1.2,versicolor,Past\n84,5.923147685843751,2.7,5.1,1.6,versicolor,Past\n85,5.85613936750478,3.0,4.5,1.5,versicolor,Past\n86,5.766794943052819,3.4,4.5,1.6,versicolor,Past\n87,5.83380326139179,3.1,4.7,1.5,versicolor,Past\n88,6.012492110295713,2.3,4.4,1.3,versicolor,Past\n89,5.85613936750478,3.0,4.1,1.3,versicolor,Past\n90,5.967819898069732,2.5,4.0,1.3,versicolor,Past\n91,5.945483791956741,2.6,4.4,1.2,versicolor,Past\n92,5.85613936750478,3.0,4.6,1.4,versicolor,Past\n93,5.945483791956741,2.6,4.0,1.2,versicolor,Past\n94,6.012492110295713,2.3,3.3,1.0,versicolor,Past\n95,5.923147685843751,2.7,4.2,1.3,versicolor,Past\n96,5.85613936750478,3.0,4.2,1.2,versicolor,Past\n97,5.878475473617771,2.9,4.2,1.3,versicolor,Past\n98,5.878475473617771,2.9,4.3,1.3,versicolor,Past\n99,5.967819898069732,2.5,3.0,1.1,versicolor,Past\n100,5.900811579730761,2.8,4.1,1.3,versicolor,Past\n101,5.7891310491658095,3.3,6.0,2.5,virginica,Past\n102,5.923147685843751,2.7,5.1,1.9,virginica,Past\n103,5.85613936750478,3.0,5.9,2.1,virginica,Past\n104,5.878475473617771,2.9,5.6,1.8,virginica,Past\n105,5.85613936750478,3.0,5.8,2.2,virginica,Past\n106,5.85613936750478,3.0,6.6,2.1,virginica,Past\n107,5.967819898069732,2.5,4.5,1.7,virginica,Past\n108,5.878475473617771,2.9,6.3,1.8,virginica,Past\n109,5.967819898069732,2.5,5.8,1.8,virginica,Past\n110,5.722122730826838,3.6,6.1,2.5,virginica,Past\n111,5.811467155278799,3.2,5.1,2.0,virginica,Past\n112,5.923147685843751,2.7,5.3,1.9,virginica,Past\n113,5.85613936750478,3.0,5.5,2.1,virginica,Past\n114,5.967819898069732,2.5,5.0,2.0,virginica,Past\n115,5.900811579730761,2.8,5.1,2.4,virginica,Past\n116,5.811467155278799,3.2,5.3,2.3,virginica,Past\n117,5.85613936750478,3.0,5.5,1.8,virginica,Past\n118,5.677450518600858,3.8,6.7,2.2,virginica,Past\n119,5.945483791956741,2.6,6.9,2.3,virginica,Past\n120,6.034828216408703,2.2,5.0,1.5,virginica,Past\n121,5.811467155278799,3.2,5.7,2.3,virginica,Past\n122,5.900811579730761,2.8,4.9,2.0,virginica,Past\n123,5.900811579730761,2.8,6.7,2.0,virginica,Past\n124,5.923147685843751,2.7,4.9,1.8,virginica,Past\n125,5.7891310491658095,3.3,5.7,2.1,virginica,Past\n126,5.811467155278799,3.2,6.0,1.8,virginica,Past\n127,5.900811579730761,2.8,4.8,1.8,virginica,Past\n128,5.85613936750478,3.0,4.9,1.8,virginica,Past\n129,5.900811579730761,2.8,5.6,2.1,virginica,Past\n130,5.85613936750478,3.0,5.8,1.6,virginica,Past\n131,5.900811579730761,2.8,6.1,1.9,virginica,Past\n132,5.677450518600858,3.8,6.4,2.0,virginica,Past\n133,5.900811579730761,2.8,5.6,2.2,virginica,Past\n134,5.900811579730761,2.8,5.1,1.5,virginica,Past\n135,5.945483791956741,2.6,5.6,1.4,virginica,Past\n136,5.85613936750478,3.0,6.1,2.3,virginica,Past\n137,5.766794943052819,3.4,5.6,2.4,virginica,Past\n138,5.83380326139179,3.1,5.5,1.8,virginica,Past\n139,5.85613936750478,3.0,4.8,1.8,virginica,Past\n140,5.83380326139179,3.1,5.4,2.1,virginica,Past\n141,5.83380326139179,3.1,5.6,2.4,virginica,Past\n142,5.83380326139179,3.1,5.1,2.3,virginica,Past\n143,5.923147685843751,2.7,5.1,1.9,virginica,Past\n144,5.811467155278799,3.2,5.9,2.3,virginica,Past\n145,5.7891310491658095,3.3,5.7,2.5,virginica,Past\n146,5.85613936750478,3.0,5.2,2.3,virginica,Past\n147,5.967819898069732,2.5,5.0,1.9,virginica,Past\n148,5.85613936750478,3.0,5.2,2.0,virginica,Past\n149,5.766794943052819,3.4,5.4,2.3,virginica,Past\n150,5.85613936750478,3.0,5.1,1.8,virginica,Past\n,5.632778306374877,4.0,,,,Future\n,5.409417245244973,5.0,,,,Future\n,5.18605618411507,6.0,,,,Future\n,4.962695122985166,7.0,,,,Future\n,4.739334061855263,8.0,,,,Future\n,4.515973000725359,9.0,,,,Future\n","format":{"type":"csv"}}}],"height":300,"data":{"url":"hanamicloth.walkthrough_files\/4.csv","format":{"type":"csv"}}});</script></div>
</section>
<section id="histograms" class="level2" data-number="2.14">
<h2 data-number="2.14" class="anchored" data-anchor-id="histograms"><span class="header-section-number">2.14</span> Histograms</h2>
<p>Histograms can also be represented as layers with statistical processing:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb36"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> iris</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>    (hanami/layer-histogram #<span class="at">:hanami</span>{<span class="at">:x</span> <span class="at">:sepal-width</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div><script>vegaEmbed(document.currentScript.parentElement, {"encoding":{"x":{"field":"x","type":"nominal"},"y":{"field":"y","type":"nominal"}},"usermeta":{"embedOptions":{"renderer":"svg"}},"width":400,"background":"floralwhite","layer":[{"mark":{"type":"bar","tooltip":true},"encoding":{"x":{"field":"left","type":"quantitative","title":"sepal-width","bin":{"binned":true}},"y":{"field":"count","type":"quantitative"},"x2":{"field":"right","type":"quantitative","title":"sepal-width","bin":{"binned":true}}},"data":{"values":"left,right,count\n2.0,2.24,4\n2.24,2.48,7\n2.48,2.72,22\n2.72,2.96,24\n2.96,3.2,37\n3.2,3.4400000000000004,31\n3.4400000000000004,3.68,10\n3.68,3.9200000000000004,11\n3.9200000000000004,4.16,2\n4.16,4.4,2\n","format":{"type":"csv"}}}],"height":300,"data":{"url":"hanamicloth.walkthrough_files\/0.csv","format":{"type":"csv"}}});</script></div>
<div class="sourceClojure">
<div class="sourceCode" id="cb37"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> iris</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>    (hanami/layer-histogram #<span class="at">:hanami</span>{<span class="at">:x</span> <span class="at">:sepal-width</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">:histogram-nbins</span> <span class="dv">30</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div><script>vegaEmbed(document.currentScript.parentElement, {"encoding":{"x":{"field":"x","type":"nominal"},"y":{"field":"y","type":"nominal"}},"usermeta":{"embedOptions":{"renderer":"svg"}},"width":400,"background":"floralwhite","layer":[{"mark":{"type":"bar","tooltip":true},"encoding":{"x":{"field":"left","type":"quantitative","title":"sepal-width","bin":{"binned":true}},"y":{"field":"count","type":"quantitative"},"x2":{"field":"right","type":"quantitative","title":"sepal-width","bin":{"binned":true}}},"data":{"values":"left,right,count\n2.0,2.08,1\n2.08,2.16,0\n2.16,2.24,3\n2.24,2.3200000000000003,4\n2.3200000000000003,2.4,0\n2.4,2.48,3\n2.48,2.56,8\n2.56,2.64,5\n2.64,2.72,9\n2.72,2.8,0\n2.8,2.88,14\n2.88,2.96,10\n2.96,3.04,26\n3.04,3.12,11\n3.12,3.2,0\n3.2,3.2800000000000002,13\n3.2800000000000002,3.3600000000000003,6\n3.3600000000000003,3.4400000000000004,12\n3.4400000000000004,3.5200000000000005,6\n3.5200000000000005,3.6,0\n3.6,3.68,4\n3.68,3.7600000000000002,3\n3.7600000000000002,3.8400000000000003,6\n3.8400000000000003,3.9200000000000004,2\n3.9200000000000004,4.0,0\n4.0,4.08,1\n4.08,4.16,1\n4.16,4.24,1\n4.24,4.32,0\n4.32,4.4,1\n","format":{"type":"csv"}}}],"height":300,"data":{"url":"hanamicloth.walkthrough_files\/0.csv","format":{"type":"csv"}}});</script></div>
<div style="background-color:grey;height:2px;width:100%;"></div>
<div><pre><small><small>source: <a href="https://github.com/scicloj/hanamicloth/blob/main/notebooks/hanamicloth/walkthrough.clj">notebooks/hanamicloth/walkthrough.clj</a></small></small></pre></div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "î§‹";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./index.html" class="pagination-link" aria-label="Preface">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Preface</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
  </div>
</nav>
</div> <!-- /content -->




</body></html>